<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 7 Otras utilidades y tablas especiales | Análisis de datos con tablas y gráficos en SegmentaNet con R</title>
  <meta name="description" content="Documento de usuario para reproducir tablas del tipo SPSS / BarbWin en SegmentaNet usando el paquete expss y visualizaciones de resultados con paquete highcharter. Introducción al uso de scripts con R." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 7 Otras utilidades y tablas especiales | Análisis de datos con tablas y gráficos en SegmentaNet con R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Documento de usuario para reproducir tablas del tipo SPSS / BarbWin en SegmentaNet usando el paquete expss y visualizaciones de resultados con paquete highcharter. Introducción al uso de scripts con R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 7 Otras utilidades y tablas especiales | Análisis de datos con tablas y gráficos en SegmentaNet con R" />
  
  <meta name="twitter:description" content="Documento de usuario para reproducir tablas del tipo SPSS / BarbWin en SegmentaNet usando el paquete expss y visualizaciones de resultados con paquete highcharter. Introducción al uso de scripts con R." />
  

<meta name="author" content="Roberto Gil-Saura" />


<meta name="date" content="2020-12-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tse05.html"/>
<link rel="next" href="tse07.html"/>
<script src="libs/jquery-3.5.0/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.2/htmlwidgets.js"></script>
<script src="libs/proj4js-2.3.15/proj4.js"></script>
<link href="libs/highcharts-8.1.2/css/motion.css" rel="stylesheet" />
<script src="libs/highcharts-8.1.2/highcharts.js"></script>
<script src="libs/highcharts-8.1.2/highcharts-3d.js"></script>
<script src="libs/highcharts-8.1.2/highcharts-more.js"></script>
<script src="libs/highcharts-8.1.2/modules/stock.js"></script>
<script src="libs/highcharts-8.1.2/modules/map.js"></script>
<script src="libs/highcharts-8.1.2/modules/annotations.js"></script>
<script src="libs/highcharts-8.1.2/modules/data.js"></script>
<script src="libs/highcharts-8.1.2/modules/drilldown.js"></script>
<script src="libs/highcharts-8.1.2/modules/item-series.js"></script>
<script src="libs/highcharts-8.1.2/modules/offline-exporting.js"></script>
<script src="libs/highcharts-8.1.2/modules/overlapping-datalabels.js"></script>
<script src="libs/highcharts-8.1.2/modules/exporting.js"></script>
<script src="libs/highcharts-8.1.2/modules/export-data.js"></script>
<script src="libs/highcharts-8.1.2/modules/funnel.js"></script>
<script src="libs/highcharts-8.1.2/modules/heatmap.js"></script>
<script src="libs/highcharts-8.1.2/modules/treemap.js"></script>
<script src="libs/highcharts-8.1.2/modules/sankey.js"></script>
<script src="libs/highcharts-8.1.2/modules/dependency-wheel.js"></script>
<script src="libs/highcharts-8.1.2/modules/organization.js"></script>
<script src="libs/highcharts-8.1.2/modules/solid-gauge.js"></script>
<script src="libs/highcharts-8.1.2/modules/streamgraph.js"></script>
<script src="libs/highcharts-8.1.2/modules/sunburst.js"></script>
<script src="libs/highcharts-8.1.2/modules/vector.js"></script>
<script src="libs/highcharts-8.1.2/modules/wordcloud.js"></script>
<script src="libs/highcharts-8.1.2/modules/xrange.js"></script>
<script src="libs/highcharts-8.1.2/modules/tilemap.js"></script>
<script src="libs/highcharts-8.1.2/modules/venn.js"></script>
<script src="libs/highcharts-8.1.2/modules/gantt.js"></script>
<script src="libs/highcharts-8.1.2/modules/timeline.js"></script>
<script src="libs/highcharts-8.1.2/modules/parallel-coordinates.js"></script>
<script src="libs/highcharts-8.1.2/modules/bullet.js"></script>
<script src="libs/highcharts-8.1.2/modules/coloraxis.js"></script>
<script src="libs/highcharts-8.1.2/modules/dumbbell.js"></script>
<script src="libs/highcharts-8.1.2/modules/lollipop.js"></script>
<script src="libs/highcharts-8.1.2/modules/series-label.js"></script>
<script src="libs/highcharts-8.1.2/plugins/motion.js"></script>
<script src="libs/highcharts-8.1.2/custom/reset.js"></script>
<script src="libs/highcharts-8.1.2/modules/boost.js"></script>
<script src="libs/highchart-binding-0.8.2/highchart.js"></script>
<script src="libs/plotly-binding-4.9.2.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.52.2/plotly-latest.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/jquery-sparkline-2.1.2/jquery.sparkline.css" rel="stylesheet" />
<script src="libs/jquery-sparkline-2.1.2/jquery.sparkline.js"></script>
<script src="libs/sparkline-binding-2.0/sparkline.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<a href="./">Análisis de datos con tablas y gráficos en SegmentaNet con R</a>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prefacio</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#requisitos"><i class="fa fa-check"></i><b>1.1</b> Requisitos</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#estructura-del-documento"><i class="fa fa-check"></i><b>1.2</b> Estructura del documento</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tse01.html"><a href="tse01.html"><i class="fa fa-check"></i><b>2</b> Introducción</a><ul>
<li class="chapter" data-level="2.1" data-path="tse01.html"><a href="tse01.html#preparar-nuestro-entorno"><i class="fa fa-check"></i><b>2.1</b> Preparar nuestro entorno</a><ul>
<li class="chapter" data-level="2.1.1" data-path="tse01.html"><a href="tse01.html#crear-proyecto"><i class="fa fa-check"></i><b>2.1.1</b> Crear proyecto</a></li>
<li class="chapter" data-level="2.1.2" data-path="tse01.html"><a href="tse01.html#crear-fuente-de-datos"><i class="fa fa-check"></i><b>2.1.2</b> Crear fuente de datos</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="tse01.html"><a href="tse01.html#mi-primer-análisis-con-scripting"><i class="fa fa-check"></i><b>2.2</b> Mi primer análisis con scripting</a><ul>
<li class="chapter" data-level="2.2.1" data-path="tse01.html"><a href="tse01.html#crear-análisis"><i class="fa fa-check"></i><b>2.2.1</b> Crear análisis</a></li>
<li class="chapter" data-level="2.2.2" data-path="tse01.html"><a href="tse01.html#conclusión"><i class="fa fa-check"></i><b>2.2.2</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="tse01.html"><a href="tse01.html#mi-primera-tabla-con-scripting"><i class="fa fa-check"></i><b>2.3</b> Mi primera tabla con scripting</a></li>
<li class="chapter" data-level="2.4" data-path="tse01.html"><a href="tse01.html#desde-dónde-creo-mis-scripts"><i class="fa fa-check"></i><b>2.4</b> ¿Desde dónde creo mis scripts?</a><ul>
<li class="chapter" data-level="2.4.1" data-path="tse01.html"><a href="tse01.html#análisis"><i class="fa fa-check"></i><b>2.4.1</b> Análisis</a></li>
<li class="chapter" data-level="2.4.2" data-path="tse01.html"><a href="tse01.html#procesos"><i class="fa fa-check"></i><b>2.4.2</b> Procesos</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="tse01.html"><a href="tse01.html#conclusión-1"><i class="fa fa-check"></i><b>2.5</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tse02.html"><a href="tse02.html"><i class="fa fa-check"></i><b>3</b> Términos</a><ul>
<li class="chapter" data-level="3.1" data-path="tse02.html"><a href="tse02.html#básicos-de-r-yo-proceso-de-datos"><i class="fa fa-check"></i><b>3.1</b> Básicos de R y/o proceso de datos</a></li>
<li class="chapter" data-level="3.2" data-path="tse02.html"><a href="tse02.html#básicos-de-tabulación"><i class="fa fa-check"></i><b>3.2</b> Básicos de tabulación</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tse03.html"><a href="tse03.html"><i class="fa fa-check"></i><b>4</b> Tablas marginales</a><ul>
<li class="chapter" data-level="4.1" data-path="tse03.html"><a href="tse03.html#frecuencias"><i class="fa fa-check"></i><b>4.1</b> Frecuencias</a><ul>
<li class="chapter" data-level="4.1.1" data-path="tse03.html"><a href="tse03.html#variables-de-respuesta-simple"><i class="fa fa-check"></i><b>4.1.1</b> Variables de respuesta simple</a></li>
<li class="chapter" data-level="4.1.2" data-path="tse03.html"><a href="tse03.html#variable-de-respuesta-múltiple"><i class="fa fa-check"></i><b>4.1.2</b> Variable de respuesta múltiple</a></li>
<li class="chapter" data-level="4.1.3" data-path="tse03.html"><a href="tse03.html#tablas-combinadas"><i class="fa fa-check"></i><b>4.1.3</b> Tablas combinadas</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="tse03.html"><a href="tse03.html#estadísticos"><i class="fa fa-check"></i><b>4.2</b> Estadísticos</a><ul>
<li class="chapter" data-level="4.2.1" data-path="tse03.html"><a href="tse03.html#estadísticos-básicos"><i class="fa fa-check"></i><b>4.2.1</b> Estadísticos básicos</a></li>
<li class="chapter" data-level="4.2.2" data-path="tse03.html"><a href="tse03.html#otros-estadísticos"><i class="fa fa-check"></i><b>4.2.2</b> Otros estadísticos</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="tse03.html"><a href="tse03.html#conclusión-2"><i class="fa fa-check"></i><b>4.3</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tse04.html"><a href="tse04.html"><i class="fa fa-check"></i><b>5</b> Tablas cruzadas</a><ul>
<li class="chapter" data-level="5.1" data-path="tse04.html"><a href="tse04.html#básica-con-variables-simples"><i class="fa fa-check"></i><b>5.1</b> Básica con variables simples</a><ul>
<li class="chapter" data-level="5.1.1" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-simple-y-sólo-absolutos"><i class="fa fa-check"></i><b>5.1.1</b> De frecuencias, variable simple y sólo absolutos</a></li>
<li class="chapter" data-level="5.1.2" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-simple-con-porcentajes-de-columna"><i class="fa fa-check"></i><b>5.1.2</b> De frecuencias, variable simple, con porcentajes de columna</a></li>
<li class="chapter" data-level="5.1.3" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-simple-con-porcentajes-de-fila"><i class="fa fa-check"></i><b>5.1.3</b> De frecuencias, variable simple, con porcentajes de fila</a></li>
<li class="chapter" data-level="5.1.4" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-simple-con-porcentajes-total-muestra"><i class="fa fa-check"></i><b>5.1.4</b> De frecuencias, variable simple, con porcentajes total muestra</a></li>
<li class="chapter" data-level="5.1.5" data-path="tse04.html"><a href="tse04.html#combinaciones-de-los-anteriores"><i class="fa fa-check"></i><b>5.1.5</b> Combinaciones de los anteriores</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="tse04.html"><a href="tse04.html#básica-con-múltiples"><i class="fa fa-check"></i><b>5.2</b> Básica con múltiples</a><ul>
<li class="chapter" data-level="5.2.1" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-múltiple-y-sólo-absolutos"><i class="fa fa-check"></i><b>5.2.1</b> De frecuencias, variable múltiple y sólo absolutos</a></li>
<li class="chapter" data-level="5.2.2" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-múltiple-con-porcentajes-de-columna"><i class="fa fa-check"></i><b>5.2.2</b> De frecuencias, variable múltiple, con porcentajes de columna</a></li>
<li class="chapter" data-level="5.2.3" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-múltiple-con-porcentajes-de-fila"><i class="fa fa-check"></i><b>5.2.3</b> De frecuencias, variable múltiple, con porcentajes de fila</a></li>
<li class="chapter" data-level="5.2.4" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-múltiple-con-porcentajes-total-muestra"><i class="fa fa-check"></i><b>5.2.4</b> De frecuencias, variable múltiple, con porcentajes total muestra</a></li>
<li class="chapter" data-level="5.2.5" data-path="tse04.html"><a href="tse04.html#combinaciones-de-los-anteriores-1"><i class="fa fa-check"></i><b>5.2.5</b> Combinaciones de los anteriores</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="tse04.html"><a href="tse04.html#básica-con-estadísticos"><i class="fa fa-check"></i><b>5.3</b> Básica con estadísticos</a><ul>
<li class="chapter" data-level="5.3.1" data-path="tse04.html"><a href="tse04.html#cruce-entre-variable-simple-y-dos-estadísticos"><i class="fa fa-check"></i><b>5.3.1</b> Cruce entre variable simple y dos estadísticos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tse05.html"><a href="tse05.html"><i class="fa fa-check"></i><b>6</b> Tablas especiales</a><ul>
<li class="chapter" data-level="6.1" data-path="tse05.html"><a href="tse05.html#subgrupos-filtros-en-la-tabla"><i class="fa fa-check"></i><b>6.1</b> Subgrupos (filtros en la tabla)</a></li>
<li class="chapter" data-level="6.2" data-path="tse05.html"><a href="tse05.html#bases-yo-con-anidación"><i class="fa fa-check"></i><b>6.2</b> Bases y/o con anidación</a></li>
<li class="chapter" data-level="6.3" data-path="tse05.html"><a href="tse05.html#características-avanzadas"><i class="fa fa-check"></i><b>6.3</b> Características avanzadas</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tse06.html"><a href="tse06.html"><i class="fa fa-check"></i><b>7</b> Otras utilidades y tablas especiales</a><ul>
<li class="chapter" data-level="7.1" data-path="tse06.html"><a href="tse06.html#recode"><i class="fa fa-check"></i><b>7.1</b> Recodificar</a></li>
<li class="chapter" data-level="7.2" data-path="tse06.html"><a href="tse06.html#cuadros"><i class="fa fa-check"></i><b>7.2</b> Cuadros</a></li>
<li class="chapter" data-level="7.3" data-path="tse06.html"><a href="tse06.html#ponderación"><i class="fa fa-check"></i><b>7.3</b> Ponderación</a></li>
<li class="chapter" data-level="7.4" data-path="tse06.html"><a href="tse06.html#subtotales-y-nets"><i class="fa fa-check"></i><b>7.4</b> Subtotales y NETS</a><ul>
<li class="chapter" data-level="7.4.1" data-path="tse06.html"><a href="tse06.html#subtotales"><i class="fa fa-check"></i><b>7.4.1</b> Subtotales</a></li>
<li class="chapter" data-level="7.4.2" data-path="tse06.html"><a href="tse06.html#nets"><i class="fa fa-check"></i><b>7.4.2</b> NETS</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="tse06.html"><a href="tse06.html#top-y-bottom"><i class="fa fa-check"></i><b>7.5</b> <em>Top</em> y <em>Bottom</em></a><ul>
<li class="chapter" data-level="7.5.1" data-path="tse06.html"><a href="tse06.html#gráficos-base"><i class="fa fa-check"></i><b>7.5.1</b> Gráficos base</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tse07.html"><a href="tse07.html"><i class="fa fa-check"></i><b>8</b> Pruebas inferenciales</a><ul>
<li class="chapter" data-level="8.1" data-path="tse07.html"><a href="tse07.html#prueba-de-dependencia"><i class="fa fa-check"></i><b>8.1</b> Prueba de dependencia</a><ul>
<li class="chapter" data-level="8.1.1" data-path="tse07.html"><a href="tse07.html#de-una-tabla"><i class="fa fa-check"></i><b>8.1.1</b> De una tabla</a></li>
<li class="chapter" data-level="8.1.2" data-path="tse07.html"><a href="tse07.html#de-una-celda-de-una-tabla"><i class="fa fa-check"></i><b>8.1.2</b> De una celda de una tabla</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="tse07.html"><a href="tse07.html#pruebas-de-diferencias"><i class="fa fa-check"></i><b>8.2</b> Pruebas de diferencias</a><ul>
<li class="chapter" data-level="8.2.1" data-path="tse07.html"><a href="tse07.html#porcentajes-prueba-z"><i class="fa fa-check"></i><b>8.2.1</b> Porcentajes (prueba z)</a></li>
<li class="chapter" data-level="8.2.2" data-path="tse07.html"><a href="tse07.html#medias-prueba-t"><i class="fa fa-check"></i><b>8.2.2</b> Medias (prueba t)</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="tse07.html"><a href="tse07.html#parámetros-posibles-en-las-pruebas-de-significación"><i class="fa fa-check"></i><b>8.3</b> Parámetros posibles en las pruebas de significación</a><ul>
<li class="chapter" data-level="8.3.1" data-path="tse07.html"><a href="tse07.html#algunos-ejemplos-de-uso-de-los-parámetros"><i class="fa fa-check"></i><b>8.3.1</b> Algunos ejemplos de uso de los parámetros</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="tse07.html"><a href="tse07.html#conclusión-3"><i class="fa fa-check"></i><b>8.4</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tse08.html"><a href="tse08.html"><i class="fa fa-check"></i><b>9</b> Visualización gráfica</a><ul>
<li class="chapter" data-level="9.1" data-path="tse08.html"><a href="tse08.html#highcharter-introducción"><i class="fa fa-check"></i><b>9.1</b> highcharteR, introducción</a><ul>
<li class="chapter" data-level="9.1.1" data-path="tse08.html"><a href="tse08.html#highchart"><i class="fa fa-check"></i><b>9.1.1</b> highchart()</a></li>
<li class="chapter" data-level="9.1.2" data-path="tse08.html"><a href="tse08.html#hchart"><i class="fa fa-check"></i><b>9.1.2</b> hchart()</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="tse08.html"><a href="tse08.html#mi-primer-gráfico"><i class="fa fa-check"></i><b>9.2</b> Mi primer gráfico</a></li>
<li class="chapter" data-level="9.3" data-path="tse08.html"><a href="tse08.html#gráfico-de-barras"><i class="fa fa-check"></i><b>9.3</b> Gráfico de barras</a><ul>
<li class="chapter" data-level="9.3.1" data-path="tse08.html"><a href="tse08.html#cambiar-el-nombre-de-la-serie-de-datos"><i class="fa fa-check"></i><b>9.3.1</b> Cambiar el nombre de la serie de datos</a></li>
<li class="chapter" data-level="9.3.2" data-path="tse08.html"><a href="tse08.html#añadir-créditos-al-gráfico"><i class="fa fa-check"></i><b>9.3.2</b> Añadir créditos al gráfico</a></li>
<li class="chapter" data-level="9.3.3" data-path="tse08.html"><a href="tse08.html#añadir-el-valor-del-dato-al-elemento-datalabels"><i class="fa fa-check"></i><b>9.3.3</b> Añadir el valor del dato al elemento (datalabels)</a></li>
<li class="chapter" data-level="9.3.4" data-path="tse08.html"><a href="tse08.html#guardar-y-exportar-el-gráfico"><i class="fa fa-check"></i><b>9.3.4</b> Guardar y exportar el gráfico</a></li>
<li class="chapter" data-level="9.3.5" data-path="tse08.html"><a href="tse08.html#api-de-highcharts-toda-la-potencia-de-los-gráficos"><i class="fa fa-check"></i><b>9.3.5</b> API de Highcharts, toda la potencia de los gráficos</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="tse08.html"><a href="tse08.html#gráfico-de-columna"><i class="fa fa-check"></i><b>9.4</b> Gráfico de columna</a><ul>
<li class="chapter" data-level="9.4.1" data-path="tse08.html"><a href="tse08.html#gráficos-polares"><i class="fa fa-check"></i><b>9.4.1</b> Gráficos polares</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="tse08.html"><a href="tse08.html#diagramas-de-secciones"><i class="fa fa-check"></i><b>9.5</b> Diagramas de secciones</a><ul>
<li class="chapter" data-level="9.5.1" data-path="tse08.html"><a href="tse08.html#tarta-pie-chart"><i class="fa fa-check"></i><b>9.5.1</b> Tarta / <em>pie chart</em></a></li>
<li class="chapter" data-level="9.5.2" data-path="tse08.html"><a href="tse08.html#anillo-doughnut"><i class="fa fa-check"></i><b>9.5.2</b> Anillo / <em>doughnut</em></a></li>
<li class="chapter" data-level="9.5.3" data-path="tse08.html"><a href="tse08.html#funnel"><i class="fa fa-check"></i><b>9.5.3</b> <em>Funnel</em></a></li>
<li class="chapter" data-level="9.5.4" data-path="tse08.html"><a href="tse08.html#pirámide"><i class="fa fa-check"></i><b>9.5.4</b> Pirámide</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="tse08.html"><a href="tse08.html#gráfico-de-línea"><i class="fa fa-check"></i><b>9.6</b> Gráfico de línea</a></li>
<li class="chapter" data-level="9.7" data-path="tse08.html"><a href="tse08.html#gráficos-de-columnas-barras-con-apilamiento"><i class="fa fa-check"></i><b>9.7</b> Gráficos de columnas / barras con apilamiento</a></li>
<li class="chapter" data-level="9.8" data-path="tse08.html"><a href="tse08.html#gráfico-de-área"><i class="fa fa-check"></i><b>9.8</b> Gráfico de área</a></li>
<li class="chapter" data-level="9.9" data-path="tse08.html"><a href="tse08.html#gráfico-de-puntos-scatterplot"><i class="fa fa-check"></i><b>9.9</b> Gráfico de puntos / <em>scatterplot</em></a></li>
<li class="chapter" data-level="9.10" data-path="tse08.html"><a href="tse08.html#histograma-o-gráfico-de-densidad"><i class="fa fa-check"></i><b>9.10</b> Histograma o gráfico de densidad</a></li>
<li class="chapter" data-level="9.11" data-path="tse08.html"><a href="tse08.html#gráficos-indicadores"><i class="fa fa-check"></i><b>9.11</b> Gráficos indicadores</a><ul>
<li class="chapter" data-level="9.11.1" data-path="tse08.html"><a href="tse08.html#gauge"><i class="fa fa-check"></i><b>9.11.1</b> Gauge</a></li>
<li class="chapter" data-level="9.11.2" data-path="tse08.html"><a href="tse08.html#bullet"><i class="fa fa-check"></i><b>9.11.2</b> Bullet</a></li>
</ul></li>
<li class="chapter" data-level="9.12" data-path="tse08.html"><a href="tse08.html#gráfico-boxplot"><i class="fa fa-check"></i><b>9.12</b> Gráfico / <em>boxplot</em></a></li>
<li class="chapter" data-level="9.13" data-path="tse08.html"><a href="tse08.html#gráfico-de-barras-de-error"><i class="fa fa-check"></i><b>9.13</b> Gráfico de barras de error</a></li>
<li class="chapter" data-level="9.14" data-path="tse08.html"><a href="tse08.html#gráficos-de-transiciones"><i class="fa fa-check"></i><b>9.14</b> Gráficos de transiciones</a><ul>
<li class="chapter" data-level="9.14.1" data-path="tse08.html"><a href="tse08.html#diagrama-de-sankey"><i class="fa fa-check"></i><b>9.14.1</b> Diagrama de Sankey</a></li>
<li class="chapter" data-level="9.14.2" data-path="tse08.html"><a href="tse08.html#diagrama-de-rueda"><i class="fa fa-check"></i><b>9.14.2</b> Diagrama de rueda</a></li>
<li class="chapter" data-level="9.14.3" data-path="tse08.html"><a href="tse08.html#diagrama-streamgraph"><i class="fa fa-check"></i><b>9.14.3</b> Diagrama <em>streamgraph</em></a></li>
<li class="chapter" data-level="9.14.4" data-path="tse08.html"><a href="tse08.html#diagrama-de-redes"><i class="fa fa-check"></i><b>9.14.4</b> Diagrama de redes</a></li>
</ul></li>
<li class="chapter" data-level="9.15" data-path="tse08.html"><a href="tse08.html#conclusión-4"><i class="fa fa-check"></i><b>9.15</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="tse-formateo.html"><a href="tse-formateo.html"><i class="fa fa-check"></i><b>10</b> Estilos y formatos de tabla</a><ul>
<li class="chapter" data-level="10.1" data-path="tse-formateo.html"><a href="tse-formateo.html#introducción"><i class="fa fa-check"></i><b>10.1</b> Introducción</a></li>
<li class="chapter" data-level="10.2" data-path="tse-formateo.html"><a href="tse-formateo.html#operaciones-con-tablas"><i class="fa fa-check"></i><b>10.2</b> Operaciones con tablas</a></li>
<li class="chapter" data-level="10.3" data-path="tse-formateo.html"><a href="tse-formateo.html#estilo-de-las-tablas"><i class="fa fa-check"></i><b>10.3</b> Estilo de las tablas</a><ul>
<li class="chapter" data-level="10.3.1" data-path="tse-formateo.html"><a href="tse-formateo.html#estilo-y-posición"><i class="fa fa-check"></i><b>10.3.1</b> Estilo y posición</a></li>
<li class="chapter" data-level="10.3.2" data-path="tse-formateo.html"><a href="tse-formateo.html#formato-específico-de-fila-o-columna"><i class="fa fa-check"></i><b>10.3.2</b> Formato específico de fila o columna</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="tse-formateo.html"><a href="tse-formateo.html#adición-de-imágenes-y-de-otros-elementos"><i class="fa fa-check"></i><b>10.4</b> Adición de imágenes y de otros elementos</a><ul>
<li class="chapter" data-level="10.4.1" data-path="tse-formateo.html"><a href="tse-formateo.html#adición-de-iconos-de-fontawesome"><i class="fa fa-check"></i><b>10.4.1</b> Adición de iconos de FontAwesome</a></li>
<li class="chapter" data-level="10.4.2" data-path="tse-formateo.html"><a href="tse-formateo.html#adición-de-gráficos-de-tipo-sparkline"><i class="fa fa-check"></i><b>10.4.2</b> Adición de gráficos de tipo sparkline</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="tse09.html"><a href="tse09.html"><i class="fa fa-check"></i><b>11</b> Condiciones</a><ul>
<li class="chapter" data-level="11.1" data-path="tse09.html"><a href="tse09.html#operadores-aritméticos"><i class="fa fa-check"></i><b>11.1</b> Operadores aritméticos</a></li>
<li class="chapter" data-level="11.2" data-path="tse09.html"><a href="tse09.html#operadores-relacionales"><i class="fa fa-check"></i><b>11.2</b> Operadores relacionales</a></li>
<li class="chapter" data-level="11.3" data-path="tse09.html"><a href="tse09.html#operadores-lógicos"><i class="fa fa-check"></i><b>11.3</b> Operadores lógicos</a></li>
<li class="chapter" data-level="11.4" data-path="tse09.html"><a href="tse09.html#operadores-de-asignación"><i class="fa fa-check"></i><b>11.4</b> Operadores de asignación</a></li>
<li class="chapter" data-level="11.5" data-path="tse09.html"><a href="tse09.html#criteria"><i class="fa fa-check"></i><b>11.5</b> Operadores específicos (criterios) en expss</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliografía.html"><a href="bibliografía.html"><i class="fa fa-check"></i>Bibliografía</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Análisis de datos con tablas y gráficos en SegmentaNet con R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tse06" class="section level1">
<h1><span class="header-section-number">Capítulo 7</span> Otras utilidades y tablas especiales</h1>
<div id="recode" class="section level2">
<h2><span class="header-section-number">7.1</span> Recodificar</h2>
<p>Aunque ya en el capítulo anterior hicimos una breve incursión en el uso de la recodificación, el paquete <code>expss</code> dispone de una serie de opciones muy interesantes acerca de este funcionalidad que usamos mucho en nuestro trabajo diario.</p>
<p>La función <code>recode</code> cambia la codificación de una variable en el contexto que se utiliza. Puede ser usada también para reorganizar o consolidar los valores de una variable existente en función de las condiciones. El diseño de esta función está inspirada en la utilidad <code>RECODE</code> de SPSS. El usuario facilita una secuencia de recodificaciones proporcionadas en forma de fórmulas.</p>
<p>Por ejemplo, <code>1:2 ~ 1</code> significa que todos los valores 1 y 2 se reemplazarán con 1. Cada valor se recodificará solo una vez, es decir, sea realiza una única ‘pasada’ por el registro empezando por el 1 y acabando por el N.</p>
<p>Dos formas de uso:</p>
<ul>
<li>Si <code>recode()</code> se usa como funcionalidad diferenciada, en este proceso de asignación aquellos valores que no cumplan ninguna condición permanecen sin cambios. * Si <code>recode()</code>se usa dentro de una tabla, los valores de recodificación (…) que no cumplen ninguna condición serán reemplazados por NA.</li>
</ul>
<p>Se pueden usar valores o condiciones lógicas más sofisticadas y funciones como condición. Hay varias funciones especiales para su uso como criterios; para más detalles, consulte los criterios <a href="tse09.html#criteria">11.5</a> en su sección <a href="tse08.html#tse08">9</a>.</p>
<p>El uso común se parece a este: <code>recode(x, 1:2 ~ -1, 3 ~ 0, 4:5 ~ 1, 99 ~ NA)</code>. Se puede observar que a los valores originales 1 y 2 se les imputa un -1, al 3 un 0, y a los valores 4 y 5 se les imputa un 1, el 99 se convierte en NA (valor perdido).</p>
<p>Para más información, ver detalles y ejemplos a continuación. Te dejamos los ejemplos del autor que ilustran muy bien las posibilidades de esta funcionalidad. Se reproducen los ejemplos de recodificación extraídos del manual de SPSS. Se utilizan datos ficticios generados en línea.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="tse06.html#cb73-1"></a><span class="co"># RECODE V1 TO V3 (0=1) (1=0) (2, 3=-1) (9=9) (ELSE=SYSMIS)</span></span>
<span id="cb73-2"><a href="tse06.html#cb73-2"></a>v1  =<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">10</span>) <span class="co"># se crea la variable</span></span>
<span id="cb73-3"><a href="tse06.html#cb73-3"></a>v1</span></code></pre></div>
<pre><code>## [1]  0  1  2  3  9 10</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="tse06.html#cb75-1"></a><span class="kw">recode</span>(v1) =<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">1</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">3</span> <span class="op">~</span><span class="st"> </span><span class="dv">-1</span>, <span class="dv">9</span> <span class="op">~</span><span class="st"> </span><span class="dv">9</span>, <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="ot">NA</span>)</span>
<span id="cb75-2"><a href="tse06.html#cb75-2"></a>v1</span></code></pre></div>
<pre><code>## [1]  1  0 -1 -1  9 NA</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="tse06.html#cb77-1"></a><span class="co"># RECODE QVAR(1 THRU 5=1)(6 THRU 10=2)(11 THRU HI=3)(ELSE=0).</span></span>
<span id="cb77-2"><a href="tse06.html#cb77-2"></a>qvar =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">20</span>, <span class="dv">97</span>, <span class="ot">NA</span>, <span class="ot">NA</span>)</span>
<span id="cb77-3"><a href="tse06.html#cb77-3"></a><span class="kw">recode</span>(qvar, <span class="dv">1</span> <span class="op">%thru%</span><span class="st"> </span><span class="dv">5</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">6</span> <span class="op">%thru%</span><span class="st"> </span><span class="dv">10</span> <span class="op">~</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">11</span> <span class="op">%thru%</span><span class="st"> </span>hi <span class="op">~</span><span class="st"> </span><span class="dv">3</span>, <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 0 0</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="tse06.html#cb79-1"></a><span class="co"># the same result</span></span>
<span id="cb79-2"><a href="tse06.html#cb79-2"></a><span class="kw">recode</span>(qvar, <span class="dv">1</span> <span class="op">%thru%</span><span class="st"> </span><span class="dv">5</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">6</span> <span class="op">%thru%</span><span class="st"> </span><span class="dv">10</span> <span class="op">~</span><span class="st"> </span><span class="dv">2</span>, <span class="kw">ge</span>(<span class="dv">11</span>) <span class="op">~</span><span class="st"> </span><span class="dv">3</span>, <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 0 0</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="tse06.html#cb81-1"></a><span class="co"># RECODE STRNGVAR (&#39;A&#39;, &#39;B&#39;, &#39;C&#39;=&#39;A&#39;)(&#39;D&#39;, &#39;E&#39;, &#39;F&#39;=&#39;B&#39;)(ELSE=&#39; &#39;). </span></span>
<span id="cb81-2"><a href="tse06.html#cb81-2"></a>strngvar =<span class="st"> </span>LETTERS</span>
<span id="cb81-3"><a href="tse06.html#cb81-3"></a><span class="kw">recode</span>(strngvar, <span class="kw">c</span>(<span class="st">&#39;A&#39;</span>, <span class="st">&#39;B&#39;</span>, <span class="st">&#39;C&#39;</span>) <span class="op">~</span><span class="st"> &#39;A&#39;</span>, <span class="kw">c</span>(<span class="st">&#39;D&#39;</span>, <span class="st">&#39;E&#39;</span>, <span class="st">&#39;F&#39;</span>) <span class="op">~</span><span class="st"> &#39;B&#39;</span>, <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &#39; &#39;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot;
## [20] &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot;</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="tse06.html#cb83-1"></a><span class="co"># recode in place. Note that we recode only first six letters</span></span>
<span id="cb83-2"><a href="tse06.html#cb83-2"></a><span class="kw">recode</span>(strngvar) =<span class="st"> </span><span class="kw">c</span>(<span class="kw">c</span>(<span class="st">&#39;A&#39;</span>, <span class="st">&#39;B&#39;</span>, <span class="st">&#39;C&#39;</span>) <span class="op">~</span><span class="st"> &#39;A&#39;</span>, <span class="kw">c</span>(<span class="st">&#39;D&#39;</span>, <span class="st">&#39;E&#39;</span>, <span class="st">&#39;F&#39;</span>) <span class="op">~</span><span class="st"> &#39;B&#39;</span>)</span>
<span id="cb83-3"><a href="tse06.html#cb83-3"></a>strngvar</span></code></pre></div>
<pre><code>##  [1] &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot; &quot;K&quot; &quot;L&quot; &quot;M&quot; &quot;N&quot; &quot;O&quot; &quot;P&quot; &quot;Q&quot; &quot;R&quot; &quot;S&quot;
## [20] &quot;T&quot; &quot;U&quot; &quot;V&quot; &quot;W&quot; &quot;X&quot; &quot;Y&quot; &quot;Z&quot;</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="tse06.html#cb85-1"></a><span class="co"># RECODE AGE (MISSING=9) (18 THRU HI=1) (0 THRU 18=0) INTO VOTER. </span></span>
<span id="cb85-2"><a href="tse06.html#cb85-2"></a>age =<span class="st"> </span><span class="kw">c</span>(<span class="ot">NA</span>, <span class="dv">2</span><span class="op">:</span><span class="dv">40</span>, <span class="ot">NA</span>)</span>
<span id="cb85-3"><a href="tse06.html#cb85-3"></a>voter =<span class="st"> </span><span class="kw">recode</span>(age, <span class="ot">NA</span> <span class="op">~</span><span class="st"> </span><span class="dv">9</span>, <span class="dv">18</span> <span class="op">%thru%</span><span class="st"> </span>hi <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">0</span> <span class="op">%thru%</span><span class="st"> </span><span class="dv">18</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb85-4"><a href="tse06.html#cb85-4"></a>voter</span></code></pre></div>
<pre><code>##  [1] 9 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
## [39] 1 1 9</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="tse06.html#cb87-1"></a><span class="co"># the same result with &#39;%into%&#39;</span></span>
<span id="cb87-2"><a href="tse06.html#cb87-2"></a><span class="kw">recode</span>(age, <span class="ot">NA</span> <span class="op">~</span><span class="st"> </span><span class="dv">9</span>, <span class="dv">18</span> <span class="op">%thru%</span><span class="st"> </span>hi <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">0</span> <span class="op">%thru%</span><span class="st"> </span><span class="dv">18</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%into%</span><span class="st"> </span>voter2</span>
<span id="cb87-3"><a href="tse06.html#cb87-3"></a>voter2</span></code></pre></div>
<pre><code>##  [1] 9 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
## [39] 1 1 9</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="tse06.html#cb89-1"></a><span class="co"># recode with adding labels</span></span>
<span id="cb89-2"><a href="tse06.html#cb89-2"></a>voter =<span class="st"> </span><span class="kw">recode</span>(age, <span class="st">&quot;Refuse to answer&quot;</span> =<span class="st"> </span><span class="ot">NA</span> <span class="op">~</span><span class="st"> </span><span class="dv">9</span>,<span class="st">&quot;Vote&quot;</span> =<span class="st"> </span><span class="dv">18</span> <span class="op">%thru%</span><span class="st"> </span>hi <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Don&#39;t vote&quot;</span> =<span class="st"> </span><span class="dv">0</span> <span class="op">%thru%</span><span class="st"> </span><span class="dv">18</span> <span class="op">~</span><span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb89-3"><a href="tse06.html#cb89-3"></a>voter</span></code></pre></div>
<pre><code>## VALUES:
## 9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 9
## VALUE LABELS:                   
##  0 Don&#39;t vote      
##  1 Vote            
##  9 Refuse to answer</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="tse06.html#cb91-1"></a><span class="co"># recoding with labels</span></span>
<span id="cb91-2"><a href="tse06.html#cb91-2"></a>ol =<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">7</span>, <span class="dv">99</span>)</span>
<span id="cb91-3"><a href="tse06.html#cb91-3"></a><span class="kw">var_lab</span>(ol) =<span class="st"> &quot;Liking&quot;</span> <span class="co">#texto extra</span></span>
<span id="cb91-4"><a href="tse06.html#cb91-4"></a><span class="kw">val_lab</span>(ol)  =<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;Disgusting&#39;</span> =<span class="dv">1</span>, <span class="st">&#39;Very Poor&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;Poor&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;So-so&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;Good&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;Very good&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;Excellent&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;Hard to say&#39;</span>=<span class="dv">99</span>) <span class="co">#etiquetas códigos</span></span>
<span id="cb91-5"><a href="tse06.html#cb91-5"></a><span class="kw">recode</span>(ol, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">5</span><span class="op">:</span><span class="dv">7</span> <span class="op">~</span><span class="st"> </span><span class="dv">7</span>, <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>copy, <span class="dt">with_labels =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## LABEL: Liking 
## VALUES:
## 1, 1, 1, 4, 7, 7, 7, 99
## VALUE LABELS:                             
##   1 Disgusting/Very Poor/Poor
##   4 So-so                    
##   7 Good/Very good/Excellent 
##  99 Hard to say</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="tse06.html#cb93-1"></a><span class="co"># &#39;rec&#39; is a shortcut for recoding with labels. Same result: </span></span>
<span id="cb93-2"><a href="tse06.html#cb93-2"></a><span class="kw">rec</span>(ol, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">5</span><span class="op">:</span><span class="dv">7</span> <span class="op">~</span><span class="st"> </span><span class="dv">7</span>, <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>copy)</span></code></pre></div>
<pre><code>## LABEL: Liking 
## VALUES:
## 1, 1, 1, 4, 7, 7, 7, 99
## VALUE LABELS:                             
##   1 Disgusting/Very Poor/Poor
##   4 So-so                    
##   7 Good/Very good/Excellent 
##  99 Hard to say</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="tse06.html#cb95-1"></a><span class="co"># another method of combining labels</span></span>
<span id="cb95-2"><a href="tse06.html#cb95-2"></a><span class="kw">recode</span>(ol, <span class="dv">1</span><span class="op">:</span><span class="dv">3</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">5</span><span class="op">:</span><span class="dv">7</span> <span class="op">~</span><span class="st"> </span><span class="dv">7</span>, <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>copy, <span class="dt">with_labels =</span> <span class="ot">TRUE</span>, <span class="dt">new_label =</span> <span class="st">&quot;range&quot;</span>)</span></code></pre></div>
<pre><code>## LABEL: Liking 
## VALUES:
## 1, 1, 1, 4, 7, 7, 7, 99
## VALUE LABELS:                     
##   1 Disgusting - Poor
##   4 So-so            
##   7 Good - Excellent 
##  99 Hard to say</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="tse06.html#cb97-1"></a><span class="co"># example with from/to notation</span></span>
<span id="cb97-2"><a href="tse06.html#cb97-2"></a></span>
<span id="cb97-3"><a href="tse06.html#cb97-3"></a><span class="co"># RECODE QVAR(1 THRU 5=1)(6 THRU 10=2)(11 THRU HI=3)(ELSE=0).</span></span>
<span id="cb97-4"><a href="tse06.html#cb97-4"></a>list_from =<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span> <span class="op">%thru%</span><span class="st"> </span><span class="dv">5</span>, <span class="dv">6</span> <span class="op">%thru%</span><span class="st"> </span><span class="dv">10</span>, <span class="kw">ge</span>(<span class="dv">11</span>), <span class="ot">TRUE</span>)</span>
<span id="cb97-5"><a href="tse06.html#cb97-5"></a>list_to =<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">0</span>)</span>
<span id="cb97-6"><a href="tse06.html#cb97-6"></a><span class="kw">recode</span>(qvar, <span class="kw">from_to</span>(list_from, list_to))</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 0 0</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="tse06.html#cb99-1"></a>list_from =<span class="st"> </span><span class="kw">list</span>(<span class="ot">NA</span>, <span class="dv">18</span> <span class="op">%thru%</span><span class="st"> </span>hi, <span class="dv">0</span> <span class="op">%thru%</span><span class="st"> </span><span class="dv">18</span>)</span>
<span id="cb99-2"><a href="tse06.html#cb99-2"></a>list_to =<span class="st"> </span><span class="kw">list</span>(<span class="st">&quot;Refuse to answer&quot;</span> =<span class="st"> </span><span class="dv">9</span>, <span class="st">&quot;Vote&quot;</span> =<span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Don&#39;t vote&quot;</span> =<span class="st"> </span><span class="dv">0</span>)</span>
<span id="cb99-3"><a href="tse06.html#cb99-3"></a>voter =<span class="st"> </span><span class="kw">recode</span>(age, <span class="kw">from_to</span>(list_from, list_to))</span>
<span id="cb99-4"><a href="tse06.html#cb99-4"></a>voter</span></code></pre></div>
<pre><code>## VALUES:
## 9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 9
## VALUE LABELS:                   
##  0 Don&#39;t vote      
##  1 Vote            
##  9 Refuse to answer</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="tse06.html#cb101-1"></a><span class="co"># &#39;ifs&#39; examples</span></span>
<span id="cb101-2"><a href="tse06.html#cb101-2"></a>a =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></span>
<span id="cb101-3"><a href="tse06.html#cb101-3"></a>b =<span class="st"> </span><span class="dv">5</span><span class="op">:</span><span class="dv">1</span></span>
<span id="cb101-4"><a href="tse06.html#cb101-4"></a>a</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="tse06.html#cb103-1"></a>b</span></code></pre></div>
<pre><code>## [1] 5 4 3 2 1</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="tse06.html#cb105-1"></a><span class="kw">ifs</span>(b<span class="op">&gt;</span><span class="dv">3</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>)                       <span class="co"># c(1, 1, NA, NA, NA)</span></span></code></pre></div>
<pre><code>## [1]  1  1 NA NA NA</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="tse06.html#cb107-1"></a><span class="kw">ifs</span>(b<span class="op">&gt;</span><span class="dv">3</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">3</span>)             <span class="co"># c(1, 1, 3, 3, 3)</span></span></code></pre></div>
<pre><code>## [1] 1 1 3 3 3</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="tse06.html#cb109-1"></a><span class="kw">ifs</span>(b<span class="op">&gt;</span><span class="dv">3</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, a<span class="op">&gt;</span><span class="dv">4</span> <span class="op">~</span><span class="st"> </span><span class="dv">7</span>, <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">3</span>)    <span class="co"># c(1, 1, 3, 3, 7)</span></span></code></pre></div>
<pre><code>## [1] 1 1 3 3 7</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="tse06.html#cb111-1"></a><span class="kw">ifs</span>(b<span class="op">&gt;</span><span class="dv">3</span> <span class="op">~</span><span class="st"> </span>a, <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span><span class="dv">42</span>)            <span class="co"># c(1, 2, 42, 42, 42)</span></span></code></pre></div>
<pre><code>## [1]  1  2 42 42 42</code></pre>
<p>El <code>recode()</code>puede ser utilizado como funcionalidad separada y con asignación o dentro de la definición de una variable. Por ejemplo:</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="tse06.html#cb113-1"></a>v1 &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb113-2"><a href="tse06.html#cb113-2"></a>v2 &lt;-<span class="st"> </span>v1</span>
<span id="cb113-3"><a href="tse06.html#cb113-3"></a>v1</span></code></pre></div>
<pre><code>##  [1] 1 2 3 2 1 2 3 4 5 6 5 4 3 2 1</code></pre>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="tse06.html#cb115-1"></a>v2</span></code></pre></div>
<pre><code>##  [1] 1 2 3 2 1 2 3 4 5 6 5 4 3 2 1</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="tse06.html#cb117-1"></a>v1 &lt;-<span class="st"> </span><span class="kw">recode</span>(v1, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">6</span><span class="op">:</span><span class="dv">10</span> <span class="op">~</span><span class="st"> </span><span class="dv">2</span>)</span>
<span id="cb117-2"><a href="tse06.html#cb117-2"></a><span class="kw">mean</span>(v1,<span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 1.066667</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="tse06.html#cb119-1"></a><span class="kw">mean</span>(<span class="kw">recode</span>(v2, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span> <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dv">6</span><span class="op">:</span><span class="dv">10</span> <span class="op">~</span><span class="st"> </span><span class="dv">2</span>), <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 1.066667</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="tse06.html#cb121-1"></a>v1</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="tse06.html#cb123-1"></a>v2</span></code></pre></div>
<pre><code>##  [1] 1 2 3 2 1 2 3 4 5 6 5 4 3 2 1</code></pre>
<p>Nótese que la diferencia estriba en que mientras que al finalizar el proceso <code>v1</code> tiene solo valores 1 y 2 recodificados, <code>v2</code> (copia de v1) mantiene los valores originales.</p>
</div>
<div id="cuadros" class="section level2">
<h2><span class="header-section-number">7.2</span> Cuadros</h2>
<p>En ocasiones es interesante reproducir algún tipo de cuadro que se ha presentado al entrevistado (baterías de ítems, cuadros, rejillas o grids, grillas o tablas de ítems, son sinónimos). Por ejemplo la pregunta <code>P9</code> del cuestionario nos presenta un cuadro en el que hay hasta 7 ítems valorados de 1 a 10, con los valores 98 y 99 como <code>NS</code> y <code>NC</code> respectivamente. Así que vamos a procesar esas tablas como cuadros.</p>
<p>Nuestro script es el siguiente …</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="tse06.html#cb125-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb125-2"><a href="tse06.html#cb125-2"></a><span class="st">    </span><span class="kw">tab_cells</span>(P901 <span class="op">%to%</span><span class="st"> </span>P907) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb125-3"><a href="tse06.html#cb125-3"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>() <span class="op">%&gt;%</span></span>
<span id="cb125-4"><a href="tse06.html#cb125-4"></a><span class="st">    </span><span class="kw">tab_pivot</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-bottom: 1px solid grey; font-weight: 900; border-top: 2px solid grey; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 #Total 
</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="2" style="font-weight: 900;">
 Los cuidados y la atención recibida del personal médico 
</td>
</tr>
<tr>
<td style="text-align: left;">
   1 Totalmente insatisfactorio 
</td>
<td style="text-align: right;">
0.6
</td>
</tr>
<tr>
<td style="text-align: left;">
   2 
</td>
<td style="text-align: right;">
0.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   3 
</td>
<td style="text-align: right;">
0.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   4 
</td>
<td style="text-align: right;">
2.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   5 
</td>
<td style="text-align: right;">
6.8
</td>
</tr>
<tr>
<td style="text-align: left;">
   6 
</td>
<td style="text-align: right;">
9.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
18.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
25.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   9 
</td>
<td style="text-align: right;">
15.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   10 Totalmente satisfactorio 
</td>
<td style="text-align: right;">
18.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
1.3
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   #Total cases 
</td>
<td style="text-align: right;">
2557
</td>
</tr>
<tr>
<td colspan="2" style="font-weight: 900;">
 Los cuidados y la atención recibida del personal de enfermería 
</td>
</tr>
<tr>
<td style="text-align: left;">
   1 Totalmente insatisfactorio 
</td>
<td style="text-align: right;">
0.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   2 
</td>
<td style="text-align: right;">
0.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   3 
</td>
<td style="text-align: right;">
0.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   4 
</td>
<td style="text-align: right;">
1.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   5 
</td>
<td style="text-align: right;">
6.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   6 
</td>
<td style="text-align: right;">
10.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
17.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
26.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   9 
</td>
<td style="text-align: right;">
14.8
</td>
</tr>
<tr>
<td style="text-align: left;">
   10 Totalmente satisfactorio 
</td>
<td style="text-align: right;">
16.6
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
5.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   #Total cases 
</td>
<td style="text-align: right;">
2557
</td>
</tr>
<tr>
<td colspan="2" style="font-weight: 900;">
 La confianza y seguridad que transmite el personal médico 
</td>
</tr>
<tr>
<td style="text-align: left;">
   1 Totalmente insatisfactorio 
</td>
<td style="text-align: right;">
1.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   2 
</td>
<td style="text-align: right;">
0.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   3 
</td>
<td style="text-align: right;">
0.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   4 
</td>
<td style="text-align: right;">
2.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   5 
</td>
<td style="text-align: right;">
6.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   6 
</td>
<td style="text-align: right;">
9.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
16.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
23.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   9 
</td>
<td style="text-align: right;">
16.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   10 Totalmente satisfactorio 
</td>
<td style="text-align: right;">
21.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
1.8
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   #Total cases 
</td>
<td style="text-align: right;">
2557
</td>
</tr>
<tr>
<td colspan="2" style="font-weight: 900;">
 La confianza y seguridad que transmite el personal de enfermería 
</td>
</tr>
<tr>
<td style="text-align: left;">
   1 Totalmente insatisfactorio 
</td>
<td style="text-align: right;">
0.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   2 
</td>
<td style="text-align: right;">
0.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   3 
</td>
<td style="text-align: right;">
0.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   4 
</td>
<td style="text-align: right;">
1.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   5 
</td>
<td style="text-align: right;">
6.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   6 
</td>
<td style="text-align: right;">
9.3
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
18.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
24.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   9 
</td>
<td style="text-align: right;">
14.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   10 Totalmente satisfactorio 
</td>
<td style="text-align: right;">
17.8
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
6.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   #Total cases 
</td>
<td style="text-align: right;">
2557
</td>
</tr>
<tr>
<td colspan="2" style="font-weight: 900;">
 El tiempo dedicado por el médico o la médica a cada enfermo o enferma 
</td>
</tr>
<tr>
<td style="text-align: left;">
   1 Totalmente insatisfactorio 
</td>
<td style="text-align: right;">
1.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   2 
</td>
<td style="text-align: right;">
1.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   3 
</td>
<td style="text-align: right;">
2.6
</td>
</tr>
<tr>
<td style="text-align: left;">
   4 
</td>
<td style="text-align: right;">
4.8
</td>
</tr>
<tr>
<td style="text-align: left;">
   5 
</td>
<td style="text-align: right;">
11.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   6 
</td>
<td style="text-align: right;">
13.6
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
17.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
18.3
</td>
</tr>
<tr>
<td style="text-align: left;">
   9 
</td>
<td style="text-align: right;">
11.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   10 Totalmente satisfactorio 
</td>
<td style="text-align: right;">
15.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
2.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   #Total cases 
</td>
<td style="text-align: right;">
2557
</td>
</tr>
<tr>
<td colspan="2" style="font-weight: 900;">
 El conocimiento del historial y seguimiento de los problemas de salud de cada usuario o usuaria 
</td>
</tr>
<tr>
<td style="text-align: left;">
   1 Totalmente insatisfactorio 
</td>
<td style="text-align: right;">
1.6
</td>
</tr>
<tr>
<td style="text-align: left;">
   2 
</td>
<td style="text-align: right;">
1.0
</td>
</tr>
<tr>
<td style="text-align: left;">
   3 
</td>
<td style="text-align: right;">
1.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   4 
</td>
<td style="text-align: right;">
3.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   5 
</td>
<td style="text-align: right;">
7.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   6 
</td>
<td style="text-align: right;">
10.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
16.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
21.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   9 
</td>
<td style="text-align: right;">
13.0
</td>
</tr>
<tr>
<td style="text-align: left;">
   10 Totalmente satisfactorio 
</td>
<td style="text-align: right;">
18.3
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
4.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   #Total cases 
</td>
<td style="text-align: right;">
2557
</td>
</tr>
<tr>
<td colspan="2" style="font-weight: 900;">
 La información recibida sobre su problema de salud 
</td>
</tr>
<tr>
<td style="text-align: left;">
   1 Totalmente insatisfactorio 
</td>
<td style="text-align: right;">
1.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   2 
</td>
<td style="text-align: right;">
1.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   3 
</td>
<td style="text-align: right;">
1.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   4 
</td>
<td style="text-align: right;">
3.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   5 
</td>
<td style="text-align: right;">
7.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   6 
</td>
<td style="text-align: right;">
10.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
17.0
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
21.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   9 
</td>
<td style="text-align: right;">
15.0
</td>
</tr>
<tr>
<td style="text-align: left;">
   10 Totalmente satisfactorio 
</td>
<td style="text-align: right;">
18.3
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
2.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.4
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
   #Total cases 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
2557
</td>
</tr>
</tbody>
</table>
<p>Esta sería la salida lógica que damos a la tabla. Sin embargo utilizando algunos pequeños trucos, podemos presentarlo así.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="tse06.html#cb126-1"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P901) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb126-2"><a href="tse06.html#cb126-2"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P902) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb126-3"><a href="tse06.html#cb126-3"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P903) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb126-4"><a href="tse06.html#cb126-4"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P904) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb126-5"><a href="tse06.html#cb126-5"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P905) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb126-6"><a href="tse06.html#cb126-6"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P906) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb126-7"><a href="tse06.html#cb126-7"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P907) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb126-8"><a href="tse06.html#cb126-8"></a></span>
<span id="cb126-9"><a href="tse06.html#cb126-9"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb126-10"><a href="tse06.html#cb126-10"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="st">&#39;|&#39;</span>=<span class="kw">unvr</span>(P901)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb126-11"><a href="tse06.html#cb126-11"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>(<span class="dt">label=</span><span class="kw">var_lab</span>(P901), <span class="dt">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb126-12"><a href="tse06.html#cb126-12"></a><span class="st">    </span><span class="kw">tab_stat_mean_sd_n</span>(<span class="dt">label=</span><span class="st">&#39;P901&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb126-13"><a href="tse06.html#cb126-13"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="st">&#39;|&#39;</span>=<span class="kw">unvr</span>(P902)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb126-14"><a href="tse06.html#cb126-14"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>(<span class="dt">label=</span><span class="kw">var_lab</span>(P902), <span class="dt">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb126-15"><a href="tse06.html#cb126-15"></a><span class="st">    </span><span class="kw">tab_stat_mean_sd_n</span>(<span class="dt">label=</span><span class="st">&#39;P901&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb126-16"><a href="tse06.html#cb126-16"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="st">&#39;|&#39;</span>=<span class="kw">unvr</span>(P903)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb126-17"><a href="tse06.html#cb126-17"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>(<span class="dt">label=</span><span class="kw">var_lab</span>(P903), <span class="dt">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb126-18"><a href="tse06.html#cb126-18"></a><span class="st">    </span><span class="kw">tab_stat_mean_sd_n</span>(<span class="dt">label=</span><span class="st">&#39;P901&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb126-19"><a href="tse06.html#cb126-19"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="st">&#39;|&#39;</span>=<span class="kw">unvr</span>(P904)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb126-20"><a href="tse06.html#cb126-20"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>(<span class="dt">label=</span><span class="kw">var_lab</span>(P904), <span class="dt">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb126-21"><a href="tse06.html#cb126-21"></a><span class="st">    </span><span class="kw">tab_stat_mean_sd_n</span>(<span class="dt">label=</span><span class="st">&#39;P901&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb126-22"><a href="tse06.html#cb126-22"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="st">&#39;|&#39;</span>=<span class="kw">unvr</span>(P905)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb126-23"><a href="tse06.html#cb126-23"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>(<span class="dt">label=</span><span class="kw">var_lab</span>(P905), <span class="dt">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb126-24"><a href="tse06.html#cb126-24"></a><span class="st">    </span><span class="kw">tab_stat_mean_sd_n</span>() <span class="op">%&gt;%</span></span>
<span id="cb126-25"><a href="tse06.html#cb126-25"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="st">&#39;|&#39;</span>=<span class="kw">unvr</span>(P906)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb126-26"><a href="tse06.html#cb126-26"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>(<span class="dt">label=</span><span class="kw">var_lab</span>(P906), <span class="dt">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb126-27"><a href="tse06.html#cb126-27"></a><span class="st">    </span><span class="kw">tab_stat_mean_sd_n</span>() <span class="op">%&gt;%</span></span>
<span id="cb126-28"><a href="tse06.html#cb126-28"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="st">&#39;|&#39;</span>=<span class="kw">unvr</span>(P907)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb126-29"><a href="tse06.html#cb126-29"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>(<span class="dt">label=</span><span class="kw">var_lab</span>(P907), <span class="dt">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="op">%&gt;%</span></span>
<span id="cb126-30"><a href="tse06.html#cb126-30"></a><span class="st">    </span><span class="kw">tab_stat_mean_sd_n</span>() <span class="op">%&gt;%</span></span>
<span id="cb126-31"><a href="tse06.html#cb126-31"></a><span class="st">    </span><span class="kw">tab_pivot</span>(<span class="dt">stat_position=</span><span class="st">&#39;inside_columns&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb126-32"><a href="tse06.html#cb126-32"></a><span class="st">    </span><span class="kw">t</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-bottom: 1px solid grey; font-weight: 900; border-top: 2px solid grey; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 1 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 2 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 3 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 4 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 5 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 6 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 7 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 8 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 9 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 10 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 N.S. 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 N.C. 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Mean 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Std. dev. 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Unw. valid N 
</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="16" style="font-weight: 900;">
 #Total 
</td>
</tr>
<tr>
<td style="text-align: left;">
   Los cuidados y la atención recibida del personal médico 
</td>
<td style="text-align: right;">
0.6
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.9
</td>
<td style="text-align: right;">
2.1
</td>
<td style="text-align: right;">
6.8
</td>
<td style="text-align: right;">
9.9
</td>
<td style="text-align: right;">
18.4
</td>
<td style="text-align: right;">
25.9
</td>
<td style="text-align: right;">
15.1
</td>
<td style="text-align: right;">
18.5
</td>
<td style="text-align: right;">
1.3
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="text-align: left;">
   P901 
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
9.1
</td>
<td style="text-align: right;">
11.2
</td>
<td style="text-align: right;">
2557
</td>
</tr>
<tr>
<td style="text-align: left;">
   Los cuidados y la atención recibida del personal de enfermería 
</td>
<td style="text-align: right;">
0.4
</td>
<td style="text-align: right;">
0.4
</td>
<td style="text-align: right;">
0.4
</td>
<td style="text-align: right;">
1.4
</td>
<td style="text-align: right;">
6.1
</td>
<td style="text-align: right;">
10.4
</td>
<td style="text-align: right;">
17.4
</td>
<td style="text-align: right;">
26.1
</td>
<td style="text-align: right;">
14.8
</td>
<td style="text-align: right;">
16.6
</td>
<td style="text-align: right;">
5.9
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="text-align: left;">
   P901.1 
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
13.2
</td>
<td style="text-align: right;">
21.6
</td>
<td style="text-align: right;">
2557
</td>
</tr>
<tr>
<td style="text-align: left;">
   La confianza y seguridad que transmite el personal médico 
</td>
<td style="text-align: right;">
1.1
</td>
<td style="text-align: right;">
0.7
</td>
<td style="text-align: right;">
0.9
</td>
<td style="text-align: right;">
2.1
</td>
<td style="text-align: right;">
6.5
</td>
<td style="text-align: right;">
9.2
</td>
<td style="text-align: right;">
16.4
</td>
<td style="text-align: right;">
23.5
</td>
<td style="text-align: right;">
16.1
</td>
<td style="text-align: right;">
21.2
</td>
<td style="text-align: right;">
1.8
</td>
<td style="text-align: right;">
0.4
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="text-align: left;">
   P901.2 
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
9.7
</td>
<td style="text-align: right;">
13.2
</td>
<td style="text-align: right;">
2557
</td>
</tr>
<tr>
<td style="text-align: left;">
   La confianza y seguridad que transmite el personal de enfermería 
</td>
<td style="text-align: right;">
0.4
</td>
<td style="text-align: right;">
0.5
</td>
<td style="text-align: right;">
0.7
</td>
<td style="text-align: right;">
1.4
</td>
<td style="text-align: right;">
6.2
</td>
<td style="text-align: right;">
9.3
</td>
<td style="text-align: right;">
18.7
</td>
<td style="text-align: right;">
24.4
</td>
<td style="text-align: right;">
14.1
</td>
<td style="text-align: right;">
17.8
</td>
<td style="text-align: right;">
6.1
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="text-align: left;">
   P901.3 
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
13.5
</td>
<td style="text-align: right;">
22.1
</td>
<td style="text-align: right;">
2557
</td>
</tr>
<tr>
<td style="text-align: left;">
   El tiempo dedicado por el médico o la médica a cada enfermo o enferma 
</td>
<td style="text-align: right;">
1.4
</td>
<td style="text-align: right;">
1.7
</td>
<td style="text-align: right;">
2.6
</td>
<td style="text-align: right;">
4.8
</td>
<td style="text-align: right;">
11.5
</td>
<td style="text-align: right;">
13.6
</td>
<td style="text-align: right;">
17.1
</td>
<td style="text-align: right;">
18.3
</td>
<td style="text-align: right;">
11.5
</td>
<td style="text-align: right;">
15.1
</td>
<td style="text-align: right;">
2.1
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="text-align: left;">
  
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
9.2
</td>
<td style="text-align: right;">
13.8
</td>
<td style="text-align: right;">
2557
</td>
</tr>
<tr>
<td style="text-align: left;">
   El conocimiento del historial y seguimiento de los problemas de salud de cada usuario o usuaria 
</td>
<td style="text-align: right;">
1.6
</td>
<td style="text-align: right;">
1
</td>
<td style="text-align: right;">
1.5
</td>
<td style="text-align: right;">
3.7
</td>
<td style="text-align: right;">
7.4
</td>
<td style="text-align: right;">
10.7
</td>
<td style="text-align: right;">
16.5
</td>
<td style="text-align: right;">
21.2
</td>
<td style="text-align: right;">
13
</td>
<td style="text-align: right;">
18.3
</td>
<td style="text-align: right;">
4.7
</td>
<td style="text-align: right;">
0.4
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="text-align: left;">
   .1 
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
12
</td>
<td style="text-align: right;">
19.9
</td>
<td style="text-align: right;">
2557
</td>
</tr>
<tr>
<td style="text-align: left;">
   La información recibida sobre su problema de salud 
</td>
<td style="text-align: right;">
1.4
</td>
<td style="text-align: right;">
1.1
</td>
<td style="text-align: right;">
1.7
</td>
<td style="text-align: right;">
3.1
</td>
<td style="text-align: right;">
7.4
</td>
<td style="text-align: right;">
10.4
</td>
<td style="text-align: right;">
17
</td>
<td style="text-align: right;">
21.5
</td>
<td style="text-align: right;">
15
</td>
<td style="text-align: right;">
18.3
</td>
<td style="text-align: right;">
2.7
</td>
<td style="text-align: right;">
0.4
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
  
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
10.4
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
16
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
2557
</td>
</tr>
</tbody>
</table>
<p>¿Qué hemos hecho?, hemos limpiado el texto de la variable utilizando la función <code>'|'=unvr()</code> y ese mismo texto extra de la variable <code>var_lab()</code> se lo hemos asignado al estadístico con <code>label</code>. De esta forma el resultado es el que ves. Desafortunadamente, hay un pequeño bug del que está informado el autor, de no poder situar la media y/o la desviación típica en la misma fila. Para hacerlo hay que unir dos tablas. Como esperamos esté resuelto en breve, no damos la solución por no complicar más la salida.</p>
</div>
<div id="ponderación" class="section level2">
<h2><span class="header-section-number">7.3</span> Ponderación</h2>
<p>Otro de los aspectos fundamentales en la investigación de mercados es la ponderación. Lo primero que debemos entender es el propio concepto de ponderación. En definitiva, es hacer que cada registro (% de casos o casos o estadísticos) en lugar de contar como un caso (frecuencia 1) , cuente como n casos, siendo n el valor de otro campo (indicado en weight() -peso-) del marco de datos. Este peso ha sido obtenido por un procedimiento llamado equilibraje (raking).</p>
<p>Aquí muestro la tabla, sin ponderar …</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="tse06.html#cb127-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb127-2"><a href="tse06.html#cb127-2"></a><span class="st">    </span><span class="kw">tab_cols</span>(<span class="kw">total</span>(),P3 ) <span class="op">%&gt;%</span></span>
<span id="cb127-3"><a href="tse06.html#cb127-3"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="kw">mdset</span>(P21A01 <span class="op">%to%</span><span class="st"> </span>P21A03)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb127-4"><a href="tse06.html#cb127-4"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb127-5"><a href="tse06.html#cb127-5"></a><span class="st">    </span><span class="kw">tab_pivot</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-top: 2px solid grey;">
</th>
<th colspan="1" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 #Total 
</th>
<th style="border-bottom: none; border-top: 2px solid grey;" colspan="1">
 
</th>
<th colspan="12" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Satisfacción 
</th>
</tr>
<tr>
<th style="border-bottom: 1px solid grey; font-weight: 900; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;" colspan="1">
 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 1 Muy insatisfecho/a 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 2 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 3 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 4 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 5 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 6 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 7 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 8 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 9 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 10 Muy satisfecho/a 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 N.S. 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 N.C. 
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">
 Medicamentos que recetan por adelantado (para que no falten) 
</td>
<td style="text-align: right;">
54.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
83.3
</td>
<td style="text-align: right;">
80
</td>
<td style="text-align: right;">
25
</td>
<td style="text-align: right;">
68.8
</td>
<td style="text-align: right;">
51.9
</td>
<td style="text-align: right;">
47.9
</td>
<td style="text-align: right;">
50.0
</td>
<td style="text-align: right;">
57.9
</td>
<td style="text-align: right;">
61.3
</td>
<td style="text-align: right;">
58.3
</td>
<td style="text-align: right;">
100
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="text-align: left;">
 Envases que han quedado sin usar porque cambiaron el tratamiento 
</td>
<td style="text-align: right;">
32.8
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
50
</td>
<td style="text-align: right;">
25.0
</td>
<td style="text-align: right;">
34.6
</td>
<td style="text-align: right;">
32.4
</td>
<td style="text-align: right;">
39.6
</td>
<td style="text-align: right;">
30.5
</td>
<td style="text-align: right;">
32.3
</td>
<td style="text-align: right;">
25.0
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="text-align: left;">
 Medicamentos que decidió no tomar 
</td>
<td style="text-align: right;">
19.8
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
16.7
</td>
<td style="text-align: right;">
20
</td>
<td style="text-align: right;">
25
</td>
<td style="text-align: right;">
12.5
</td>
<td style="text-align: right;">
19.2
</td>
<td style="text-align: right;">
26.8
</td>
<td style="text-align: right;">
19.8
</td>
<td style="text-align: right;">
15.8
</td>
<td style="text-align: right;">
22.6
</td>
<td style="text-align: right;">
16.7
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
 #Total cases 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
415
</td>
<td style="border-bottom: 2px solid grey; text-align: right;" colspan="1">
 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
6
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
5
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
8
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
16
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
52
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
71
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
106
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
95
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
31
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
24
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
1
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
</tr>
</tbody>
</table>
<p>El estudio del CIS que estamos trabajando tiene una variable denominada PESO que contiene el coeficiente de ponderación para adaptarse a la población real española. Aquí dejamos la anterior tabla, pero ponderada. Véase las diferencias entre todos los valores.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="tse06.html#cb128-1"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb128-2"><a href="tse06.html#cb128-2"></a><span class="st">    </span><span class="kw">tab_cols</span>(<span class="kw">total</span>(),P3 ) <span class="op">%&gt;%</span></span>
<span id="cb128-3"><a href="tse06.html#cb128-3"></a><span class="st">    </span><span class="kw">tab_weight</span>(PESO) <span class="op">%&gt;%</span></span>
<span id="cb128-4"><a href="tse06.html#cb128-4"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="kw">mdset</span>(P21A01 <span class="op">%to%</span><span class="st"> </span>P21A03)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb128-5"><a href="tse06.html#cb128-5"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb128-6"><a href="tse06.html#cb128-6"></a><span class="st">    </span><span class="kw">tab_pivot</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-top: 2px solid grey;">
</th>
<th colspan="1" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 #Total 
</th>
<th style="border-bottom: none; border-top: 2px solid grey;" colspan="1">
 
</th>
<th colspan="12" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Satisfacción 
</th>
</tr>
<tr>
<th style="border-bottom: 1px solid grey; font-weight: 900; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;" colspan="1">
 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 1 Muy insatisfecho/a 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 2 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 3 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 4 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 5 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 6 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 7 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 8 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 9 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 10 Muy satisfecho/a 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 N.S. 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 N.C. 
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">
 Medicamentos que recetan por adelantado (para que no falten) 
</td>
<td style="text-align: right;">
54.7
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
80.3
</td>
<td style="text-align: right;">
88.6
</td>
<td style="text-align: right;">
19.8
</td>
<td style="text-align: right;">
63.6
</td>
<td style="text-align: right;">
55.5
</td>
<td style="text-align: right;">
44.5
</td>
<td style="text-align: right;">
52.5
</td>
<td style="text-align: right;">
57.1
</td>
<td style="text-align: right;">
64.3
</td>
<td style="text-align: right;">
66.4
</td>
<td style="text-align: right;">
100
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="text-align: left;">
 Envases que han quedado sin usar porque cambiaron el tratamiento 
</td>
<td style="text-align: right;">
31.0
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
56.2
</td>
<td style="text-align: right;">
27.5
</td>
<td style="text-align: right;">
31.9
</td>
<td style="text-align: right;">
31.9
</td>
<td style="text-align: right;">
37.7
</td>
<td style="text-align: right;">
27.6
</td>
<td style="text-align: right;">
30.0
</td>
<td style="text-align: right;">
19.8
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="text-align: left;">
 Medicamentos que decidió no tomar 
</td>
<td style="text-align: right;">
21.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
19.7
</td>
<td style="text-align: right;">
11.4
</td>
<td style="text-align: right;">
24.0
</td>
<td style="text-align: right;">
17.3
</td>
<td style="text-align: right;">
18.3
</td>
<td style="text-align: right;">
30.1
</td>
<td style="text-align: right;">
19.8
</td>
<td style="text-align: right;">
18.6
</td>
<td style="text-align: right;">
25.7
</td>
<td style="text-align: right;">
13.8
</td>
<td style="text-align: right;">
</td>
<td style="text-align: right;">
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
 #Total cases 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
415
</td>
<td style="border-bottom: 2px solid grey; text-align: right;" colspan="1">
 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
6
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
5
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
8
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
16
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
52
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
71
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
106
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
95
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
31
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
24
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
1
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
</td>
</tr>
</tbody>
</table>
<p>Aunque este manual se refiere únicamente a tablas, es bastante habitual obtener en toda ponderación la denominada eficiencia de la misma. Este análisis lo realizamos utilizando R como calculadora. Podemos hacer una análisis de la variable PESO y de su eficiencia.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="tse06.html#cb129-1"></a>mean.peso &lt;-<span class="st"> </span><span class="kw">mean</span>(data<span class="op">$</span>PESO, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span>
<span id="cb129-2"><a href="tse06.html#cb129-2"></a>sd.peso &lt;-<span class="st"> </span><span class="kw">sd</span>(data<span class="op">$</span>PESO, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)</span>
<span id="cb129-3"><a href="tse06.html#cb129-3"></a>ratio &lt;-<span class="st"> </span>sd.peso<span class="op">/</span>mean.peso</span>
<span id="cb129-4"><a href="tse06.html#cb129-4"></a>eficiencia &lt;-<span class="st"> </span>(<span class="dv">1</span><span class="op">/</span>(<span class="dv">1</span><span class="op">+</span>(ratio<span class="op">^</span><span class="dv">2</span>)))<span class="op">*</span><span class="dv">100</span></span>
<span id="cb129-5"><a href="tse06.html#cb129-5"></a>eficiencia &lt;-<span class="st"> </span><span class="kw">round</span>(eficiencia,<span class="dv">2</span>)</span></code></pre></div>
<p>Puede observarse como la eficiencia de la ponderación es del 76.79 %.</p>
</div>
<div id="subtotales-y-nets" class="section level2">
<h2><span class="header-section-number">7.4</span> Subtotales y NETS</h2>
<p>Otra de las funcionalidades básicas en nuestro trabajo de análisis es el uso de subtotales y/o netos. El objetivo de ambas funciones es reagrupar los códigos de una determinada variable, permitiendo observar acumulados de frecuencia. El paquete <code>expss</code> hace una diferenciación entre ambos que mostraremos seguidamente.</p>
<div id="subtotales" class="section level3">
<h3><span class="header-section-number">7.4.1</span> Subtotales</h3>
<p>El uso de <strong><code>tab_subtotal_rows</code></strong> o <strong><code>tab_subtotal_cols</code></strong> o <strong><code>tab_subtotal_cells</code></strong> añade subtotales a un conjunto de categorías de la variable sobre la que se aplique. Si se introduce un texto se utilizará el mismo, pero si no se añade la palabra TOTAL. Debes tener en cuenta que si las agrupaciones de categorías que realizas se solapan, también se solaparán los recuentos en el cálculo de subtotales. Estos subtotales pueden ser aplicados a las variables del banco de datos.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="tse06.html#cb130-1"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P901) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb130-2"><a href="tse06.html#cb130-2"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb130-3"><a href="tse06.html#cb130-3"></a><span class="st">    </span><span class="kw">tab_cols</span>(<span class="kw">total</span>(), P31) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb130-4"><a href="tse06.html#cb130-4"></a><span class="st">    </span><span class="kw">tab_cells</span>(P901) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb130-5"><a href="tse06.html#cb130-5"></a><span class="st">    </span><span class="kw">tab_subtotal_cells</span>(<span class="st">&#39;NO SATISFACTORIO&#39;</span>=<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">6</span><span class="op">:</span><span class="dv">8</span>,  <span class="st">&#39;SATISFACTORIO&#39;</span>=<span class="dv">9</span><span class="op">:</span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb130-6"><a href="tse06.html#cb130-6"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb130-7"><a href="tse06.html#cb130-7"></a><span class="st">    </span><span class="kw">tab_pivot</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-top: 2px solid grey;">
</th>
<th colspan="1" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 #Total 
</th>
<th style="border-bottom: none; border-top: 2px solid grey;" colspan="1">
 
</th>
<th colspan="2" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Sexo de la persona entrevistada 
</th>
</tr>
<tr>
<th style="border-bottom: 1px solid grey; font-weight: 900; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;" colspan="1">
 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Hombre 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Mujer 
</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5" style="font-weight: 900;">
 Los cuidados y la atención recibida del personal médico 
</td>
</tr>
<tr>
<td style="text-align: left;">
   1 
</td>
<td style="text-align: right;">
0.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.6
</td>
<td style="text-align: right;">
0.6
</td>
</tr>
<tr>
<td style="text-align: left;">
   2 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   3 
</td>
<td style="text-align: right;">
0.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.9
</td>
<td style="text-align: right;">
1.0
</td>
</tr>
<tr>
<td style="text-align: left;">
   4 
</td>
<td style="text-align: right;">
2.1
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
2.4
</td>
<td style="text-align: right;">
1.8
</td>
</tr>
<tr>
<td style="text-align: left;">
   5 
</td>
<td style="text-align: right;">
6.8
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
5.6
</td>
<td style="text-align: right;">
7.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   NO SATISFACTORIO 
</td>
<td style="text-align: right;">
10.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
9.7
</td>
<td style="text-align: right;">
11.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   6 
</td>
<td style="text-align: right;">
9.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
9.5
</td>
<td style="text-align: right;">
10.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
18.4
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
20.6
</td>
<td style="text-align: right;">
16.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
25.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
27.8
</td>
<td style="text-align: right;">
24.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   TOTAL 6/7/8 
</td>
<td style="text-align: right;">
54.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
57.9
</td>
<td style="text-align: right;">
50.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   9 
</td>
<td style="text-align: right;">
15.1
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
14.4
</td>
<td style="text-align: right;">
15.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   10 
</td>
<td style="text-align: right;">
18.5
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
16.3
</td>
<td style="text-align: right;">
20.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   SATISFACTORIO 
</td>
<td style="text-align: right;">
33.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
30.7
</td>
<td style="text-align: right;">
36.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
1.3
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
1.5
</td>
<td style="text-align: right;">
1.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.3
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
   #Total cases 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
2557
</td>
<td style="border-bottom: 2px solid grey; text-align: right;" colspan="1">
 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
1256
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
1301
</td>
</tr>
</tbody>
</table>
<p>Nótese que en el ejemplo han sido utilizados textos en solo dos de los tres subtotales que se han calculado. Si no se introduce texto, es cuando se usa la palabra TOTAL. Nótese también que por defecto los subtotales aparecen detrás del último valor del grupo, detrás del 5, detrás del 8 y detrás del 10. Existe la posibilidad de determinar mediante una instrucción como deben aparecer. El modificador o parámetro <code>position</code> con posibles valores <code>"below"</code>, <code>"above"</code>, <code>"top"</code> o <code>"bottom"</code> indicarán el lugar donde se deben imprimir. Del mismo modo, se puede forzar a que sea el propio sistema quien determine las etiquetas del subtotal generado. Así el modificador <code>prefix</code> puede determinar un prefijo para todas las etiquetas siendo <code>TOTAL</code> el valor por defecto, y también el modificador <code>new_label</code>que permite indicar si la etiqueta se construye usando las etiquetas originales respondiendo a <code>all</code>que la usa todas, <code>range</code> la primera y la última, <code>first</code> la primera del grupo y <code>last</code> la última del grupo.</p>
<p>Con todo ello, podríamos modificar nuestro ejemplo a:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="tse06.html#cb131-1"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P901) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb131-2"><a href="tse06.html#cb131-2"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb131-3"><a href="tse06.html#cb131-3"></a><span class="st">    </span><span class="kw">tab_cols</span>(<span class="kw">total</span>(), P31) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb131-4"><a href="tse06.html#cb131-4"></a><span class="st">    </span><span class="kw">tab_cells</span>(P901) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb131-5"><a href="tse06.html#cb131-5"></a><span class="st">    </span><span class="kw">tab_subtotal_cells</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">6</span><span class="op">:</span><span class="dv">8</span>, <span class="dv">9</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">position =</span> <span class="st">&#39;bottom&#39;</span>, <span class="dt">prefix =</span><span class="st">&#39;SUBT&#39;</span>, <span class="dt">new_label=</span><span class="st">&#39;range&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb131-6"><a href="tse06.html#cb131-6"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb131-7"><a href="tse06.html#cb131-7"></a><span class="st">    </span><span class="kw">tab_pivot</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-top: 2px solid grey;">
</th>
<th colspan="1" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 #Total 
</th>
<th style="border-bottom: none; border-top: 2px solid grey;" colspan="1">
 
</th>
<th colspan="2" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Sexo de la persona entrevistada 
</th>
</tr>
<tr>
<th style="border-bottom: 1px solid grey; font-weight: 900; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;" colspan="1">
 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Hombre 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Mujer 
</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5" style="font-weight: 900;">
 Los cuidados y la atención recibida del personal médico 
</td>
</tr>
<tr>
<td style="text-align: left;">
   1 
</td>
<td style="text-align: right;">
0.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.6
</td>
<td style="text-align: right;">
0.6
</td>
</tr>
<tr>
<td style="text-align: left;">
   2 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   3 
</td>
<td style="text-align: right;">
0.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.9
</td>
<td style="text-align: right;">
1.0
</td>
</tr>
<tr>
<td style="text-align: left;">
   4 
</td>
<td style="text-align: right;">
2.1
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
2.4
</td>
<td style="text-align: right;">
1.8
</td>
</tr>
<tr>
<td style="text-align: left;">
   5 
</td>
<td style="text-align: right;">
6.8
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
5.6
</td>
<td style="text-align: right;">
7.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   6 
</td>
<td style="text-align: right;">
9.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
9.5
</td>
<td style="text-align: right;">
10.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
18.4
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
20.6
</td>
<td style="text-align: right;">
16.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
25.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
27.8
</td>
<td style="text-align: right;">
24.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   9 
</td>
<td style="text-align: right;">
15.1
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
14.4
</td>
<td style="text-align: right;">
15.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   10 
</td>
<td style="text-align: right;">
18.5
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
16.3
</td>
<td style="text-align: right;">
20.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
1.3
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
1.5
</td>
<td style="text-align: right;">
1.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.3
</td>
</tr>
<tr>
<td style="text-align: left;">
   SUBT1 - 5 
</td>
<td style="text-align: right;">
10.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
9.7
</td>
<td style="text-align: right;">
11.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   SUBT6 - 8 
</td>
<td style="text-align: right;">
54.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
57.9
</td>
<td style="text-align: right;">
50.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   SUBT9 - 10 
</td>
<td style="text-align: right;">
33.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
30.7
</td>
<td style="text-align: right;">
36.4
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
   #Total cases 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
2557
</td>
<td style="border-bottom: 2px solid grey; text-align: right;" colspan="1">
 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
1256
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
1301
</td>
</tr>
</tbody>
</table>
</div>
<div id="nets" class="section level3">
<h3><span class="header-section-number">7.4.2</span> NETS</h3>
<p>El uso de <strong><code>tab_net_rows()</code></strong> o <strong><code>tab_net_cols()</code></strong> o <strong><code>tab_net_cells()</code></strong> sustituye por netos (subtotales) a un conjunto de categorías de la variable sobre la que se aplique. Si se introduce un texto se utilizará el mismo, pero si no es así, se añade la palabra TOTAL.</p>
<p>Debes tener en cuenta que si las agrupaciones de categorías que realizas se solapan, también se solaparán los recuentos en el cálculo de netos. Estos netos pueden ser aplicados a las variables del banco de datos. La terminología de NET suele ser muy aplicada en las variables de tipo múltiple, para agrupar conceptos similares. En nuestro ejemplo por mantener la coherencia con el uso de <code>subtotal</code> lo aplicaremos sin embargo con una variable numérica de valoración.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="tse06.html#cb132-1"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P901) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb132-2"><a href="tse06.html#cb132-2"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb132-3"><a href="tse06.html#cb132-3"></a><span class="st">    </span><span class="kw">tab_cols</span>(<span class="kw">total</span>(), P31) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb132-4"><a href="tse06.html#cb132-4"></a><span class="st">    </span><span class="kw">tab_cells</span>(P901) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb132-5"><a href="tse06.html#cb132-5"></a><span class="st">    </span><span class="kw">tab_net_cells</span>(<span class="st">&#39;NO SATISFACTORIO&#39;</span>=<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">6</span><span class="op">:</span><span class="dv">8</span>,  <span class="st">&#39;SATISFACTORIO&#39;</span>=<span class="dv">9</span><span class="op">:</span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb132-6"><a href="tse06.html#cb132-6"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb132-7"><a href="tse06.html#cb132-7"></a><span class="st">    </span><span class="kw">tab_pivot</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-top: 2px solid grey;">
</th>
<th colspan="1" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 #Total 
</th>
<th style="border-bottom: none; border-top: 2px solid grey;" colspan="1">
 
</th>
<th colspan="2" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Sexo de la persona entrevistada 
</th>
</tr>
<tr>
<th style="border-bottom: 1px solid grey; font-weight: 900; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;" colspan="1">
 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Hombre 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Mujer 
</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5" style="font-weight: 900;">
 Los cuidados y la atención recibida del personal médico 
</td>
</tr>
<tr>
<td style="text-align: left;">
   NO SATISFACTORIO 
</td>
<td style="text-align: right;">
10.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
9.7
</td>
<td style="text-align: right;">
11.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   TOTAL 6/7/8 
</td>
<td style="text-align: right;">
54.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
57.9
</td>
<td style="text-align: right;">
50.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   SATISFACTORIO 
</td>
<td style="text-align: right;">
33.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
30.7
</td>
<td style="text-align: right;">
36.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
1.3
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
1.5
</td>
<td style="text-align: right;">
1.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.3
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
   #Total cases 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
2557
</td>
<td style="border-bottom: 2px solid grey; text-align: right;" colspan="1">
 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
1256
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
1301
</td>
</tr>
</tbody>
</table>
<p>Nótese que en el ejemplo han sido utilizados textos en solo dos de los tres <code>nets</code> que se han calculado. Si no se introduce texto, es cuando se usa la palabra TOTAL. Nótese también que por defecto los subtotales aparecen detrás del último valor del grupo, detrás del 5, detrás del 8 y detrás del 10. Existe la posibilidad de determinar mediante una instrucción como deben aparecer. El modificador o parámetro <code>position</code> con posibles valores <code>"below", "above", "top" o "bottom"</code> indicarán el lugar donde se deben imprimir.</p>
<p>Del mismo modo, se puede forzar a que sea el propio sistema quien determine las etiquetas del subtotal generado. Así el modificador <code>prefix</code> puede determinar un prefijo para todas las etiquetas siendo <code>TOTAL</code> el valor por defecto, y también el modificador <code>new_label</code>que permite indicar si la etiqueta se construye usando las etiquetas originales respondiendo a <code>all</code>que la usa todas, <code>range</code> la primera y la última, <code>first</code> la primera del grupo y <code>last</code> la última del grupo. Podríamos modificar nuestro ejemplo a:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="tse06.html#cb133-1"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P901) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb133-2"><a href="tse06.html#cb133-2"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb133-3"><a href="tse06.html#cb133-3"></a><span class="st">    </span><span class="kw">tab_cols</span>(<span class="kw">total</span>(), P31) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb133-4"><a href="tse06.html#cb133-4"></a><span class="st">    </span><span class="kw">tab_cells</span>(P901) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb133-5"><a href="tse06.html#cb133-5"></a><span class="st">    </span><span class="kw">tab_net_cells</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">6</span><span class="op">:</span><span class="dv">8</span>, <span class="dv">9</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">position =</span> <span class="st">&#39;top&#39;</span>, <span class="dt">prefix =</span><span class="st">&#39;NET&#39;</span>, <span class="dt">new_label=</span><span class="st">&#39;range&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb133-6"><a href="tse06.html#cb133-6"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb133-7"><a href="tse06.html#cb133-7"></a><span class="st">    </span><span class="kw">tab_pivot</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-top: 2px solid grey;">
</th>
<th colspan="1" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 #Total 
</th>
<th style="border-bottom: none; border-top: 2px solid grey;" colspan="1">
 
</th>
<th colspan="2" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Sexo de la persona entrevistada 
</th>
</tr>
<tr>
<th style="border-bottom: 1px solid grey; font-weight: 900; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;" colspan="1">
 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Hombre 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Mujer 
</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5" style="font-weight: 900;">
 Los cuidados y la atención recibida del personal médico 
</td>
</tr>
<tr>
<td style="text-align: left;">
   NET1 - 5 
</td>
<td style="text-align: right;">
10.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
9.7
</td>
<td style="text-align: right;">
11.5
</td>
</tr>
<tr>
<td style="text-align: left;">
   NET6 - 8 
</td>
<td style="text-align: right;">
54.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
57.9
</td>
<td style="text-align: right;">
50.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   NET9 - 10 
</td>
<td style="text-align: right;">
33.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
30.7
</td>
<td style="text-align: right;">
36.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
1.3
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
1.5
</td>
<td style="text-align: right;">
1.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.3
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
   #Total cases 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
2557
</td>
<td style="border-bottom: 2px solid grey; text-align: right;" colspan="1">
 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
1256
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
1301
</td>
</tr>
</tbody>
</table>
<p>Puedes preguntarte el porqué del <code>position</code> si en un NET realmente se eliminan los códigos originales, pero esto no tiene por qué ser así. Tanto el <code>subtotal</code> como el <code>net</code> tienen la posibilidad de variar este hecho utilizando el modificar <code>add</code> con valores TRUE o FALSE que mantendría o no los códigos originales. No obstante, en nuestro ejmplo como hay valores no agrupados (NS y NC) aquí la posición sí es relevante.</p>
</div>
</div>
<div id="top-y-bottom" class="section level2">
<h2><span class="header-section-number">7.5</span> <em>Top</em> y <em>Bottom</em></h2>
<p>Por último otra utilidad no menos importante que las anterior y no menos utilizada. El cálculo del <em>top</em> y el <em>bottom</em> de una escala. Para ello, vamos a basarnos en algo que ya hemos visto en las tablas anteriores, la recodificación y el cómo reutilizamos la posibilidad de las variables múltiples.</p>
<p>Planteemos una situación en la que deseamos que la variable P901 se muestre de forma segmentada y conjuntamente cada uno de sus valores. Llamamos TOP a la agrupación en una columna o fila de tabla de aquellas categorías con las valoraciones más altas (por ejemplo 9 y 10) y BOTTOM a las más bajas (por ejemplo 1,2,3,4,5 y 6 o 1:6 como sabemos). Queremos que en la tabla se muestre ambas categorías. ¿Como la hacemos? Este es script.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="tse06.html#cb134-1"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P901) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb134-2"><a href="tse06.html#cb134-2"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb134-3"><a href="tse06.html#cb134-3"></a><span class="st">    </span><span class="kw">tab_cols</span>(<span class="kw">total</span>(), P31) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb134-4"><a href="tse06.html#cb134-4"></a><span class="st">    </span><span class="kw">tab_cells</span>(P901) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb134-5"><a href="tse06.html#cb134-5"></a><span class="st">    </span><span class="kw">tab_subtotal_cells</span>(<span class="st">&#39;Bottom&#39;</span>=<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="st">&#39;Top&#39;</span>=<span class="dv">9</span><span class="op">:</span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb134-6"><a href="tse06.html#cb134-6"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>() <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb134-7"><a href="tse06.html#cb134-7"></a><span class="st">    </span><span class="kw">tab_pivot</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-top: 2px solid grey;">
</th>
<th colspan="1" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 #Total 
</th>
<th style="border-bottom: none; border-top: 2px solid grey;" colspan="1">
 
</th>
<th colspan="2" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Sexo de la persona entrevistada 
</th>
</tr>
<tr>
<th style="border-bottom: 1px solid grey; font-weight: 900; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;" colspan="1">
 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Hombre 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Mujer 
</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5" style="font-weight: 900;">
 Los cuidados y la atención recibida del personal médico 
</td>
</tr>
<tr>
<td style="text-align: left;">
   1 
</td>
<td style="text-align: right;">
0.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.6
</td>
<td style="text-align: right;">
0.6
</td>
</tr>
<tr>
<td style="text-align: left;">
   2 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   3 
</td>
<td style="text-align: right;">
0.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.9
</td>
<td style="text-align: right;">
1.0
</td>
</tr>
<tr>
<td style="text-align: left;">
   4 
</td>
<td style="text-align: right;">
2.1
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
2.4
</td>
<td style="text-align: right;">
1.8
</td>
</tr>
<tr>
<td style="text-align: left;">
   5 
</td>
<td style="text-align: right;">
6.8
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
5.6
</td>
<td style="text-align: right;">
7.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   6 
</td>
<td style="text-align: right;">
9.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
9.5
</td>
<td style="text-align: right;">
10.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   Bottom 
</td>
<td style="text-align: right;">
20.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
19.2
</td>
<td style="text-align: right;">
21.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
18.4
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
20.6
</td>
<td style="text-align: right;">
16.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
25.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
27.8
</td>
<td style="text-align: right;">
24.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   9 
</td>
<td style="text-align: right;">
15.1
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
14.4
</td>
<td style="text-align: right;">
15.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   10 
</td>
<td style="text-align: right;">
18.5
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
16.3
</td>
<td style="text-align: right;">
20.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   Top 
</td>
<td style="text-align: right;">
33.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
30.7
</td>
<td style="text-align: right;">
36.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
1.3
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
1.5
</td>
<td style="text-align: right;">
1.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.3
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
   #Total cases 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
2557
</td>
<td style="border-bottom: 2px solid grey; text-align: right;" colspan="1">
 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
1256
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
1301
</td>
</tr>
</tbody>
</table>
<p>Controlando más algunos aspectos de la publicación de la tabla …</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="tse06.html#cb135-1"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P901) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb135-2"><a href="tse06.html#cb135-2"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb135-3"><a href="tse06.html#cb135-3"></a><span class="st">    </span><span class="kw">tab_cols</span>(<span class="kw">total</span>(), P31) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb135-4"><a href="tse06.html#cb135-4"></a><span class="st">    </span><span class="kw">tab_cells</span>(P901) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb135-5"><a href="tse06.html#cb135-5"></a><span class="st">    </span><span class="kw">tab_subtotal_cells</span>(<span class="st">&#39;Bottom&#39;</span>=<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="st">&#39;Top&#39;</span>=<span class="dv">9</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">position =</span><span class="st">&#39;bottom&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb135-6"><a href="tse06.html#cb135-6"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>(<span class="dt">total_row_position=</span><span class="st">&#39;below&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb135-7"><a href="tse06.html#cb135-7"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="kw">na_if</span>(P901, <span class="kw">gt</span>(<span class="dv">10</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb135-8"><a href="tse06.html#cb135-8"></a><span class="st">    </span><span class="kw">tab_stat_mean</span>() <span class="op">%&gt;%</span></span>
<span id="cb135-9"><a href="tse06.html#cb135-9"></a><span class="st">    </span><span class="kw">tab_pivot</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-top: 2px solid grey;">
</th>
<th colspan="1" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 #Total 
</th>
<th style="border-bottom: none; border-top: 2px solid grey;" colspan="1">
 
</th>
<th colspan="2" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Sexo de la persona entrevistada 
</th>
</tr>
<tr>
<th style="border-bottom: 1px solid grey; font-weight: 900; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;" colspan="1">
 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Hombre 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Mujer 
</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5" style="font-weight: 900;">
 Los cuidados y la atención recibida del personal médico 
</td>
</tr>
<tr>
<td style="text-align: left;">
   1 
</td>
<td style="text-align: right;">
0.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.6
</td>
<td style="text-align: right;">
0.6
</td>
</tr>
<tr>
<td style="text-align: left;">
   2 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   3 
</td>
<td style="text-align: right;">
0.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.9
</td>
<td style="text-align: right;">
1.0
</td>
</tr>
<tr>
<td style="text-align: left;">
   4 
</td>
<td style="text-align: right;">
2.1
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
2.4
</td>
<td style="text-align: right;">
1.8
</td>
</tr>
<tr>
<td style="text-align: left;">
   5 
</td>
<td style="text-align: right;">
6.8
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
5.6
</td>
<td style="text-align: right;">
7.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   6 
</td>
<td style="text-align: right;">
9.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
9.5
</td>
<td style="text-align: right;">
10.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
18.4
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
20.6
</td>
<td style="text-align: right;">
16.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
25.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
27.8
</td>
<td style="text-align: right;">
24.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   9 
</td>
<td style="text-align: right;">
15.1
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
14.4
</td>
<td style="text-align: right;">
15.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   10 
</td>
<td style="text-align: right;">
18.5
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
16.3
</td>
<td style="text-align: right;">
20.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
1.3
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
1.5
</td>
<td style="text-align: right;">
1.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.3
</td>
</tr>
<tr>
<td style="text-align: left;">
   Bottom 
</td>
<td style="text-align: right;">
20.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
19.2
</td>
<td style="text-align: right;">
21.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   Top 
</td>
<td style="text-align: right;">
33.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
30.7
</td>
<td style="text-align: right;">
36.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   #Total cases 
</td>
<td style="text-align: right;">
2557
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
1256
</td>
<td style="text-align: right;">
1301
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
   Mean 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
7.7
</td>
<td style="border-bottom: 2px solid grey; text-align: right;" colspan="1">
 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
7.7
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
7.8
</td>
</tr>
</tbody>
</table>
<p>Con subtotales abajo…</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="tse06.html#cb136-1"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P901) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb136-2"><a href="tse06.html#cb136-2"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb136-3"><a href="tse06.html#cb136-3"></a><span class="st">    </span><span class="kw">tab_cols</span>(<span class="kw">total</span>(), P31) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb136-4"><a href="tse06.html#cb136-4"></a><span class="st">    </span><span class="kw">tab_cells</span>(P901) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb136-5"><a href="tse06.html#cb136-5"></a><span class="st">    </span><span class="kw">tab_subtotal_cells</span>(<span class="st">&#39;Bottom&#39;</span>=<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="st">&#39;Top&#39;</span>=<span class="dv">9</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">position =</span><span class="st">&#39;below&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb136-6"><a href="tse06.html#cb136-6"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>(<span class="dt">total_row_position=</span><span class="st">&#39;below&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb136-7"><a href="tse06.html#cb136-7"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="kw">na_if</span>(P901, <span class="kw">gt</span>(<span class="dv">10</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb136-8"><a href="tse06.html#cb136-8"></a><span class="st">    </span><span class="kw">tab_stat_mean</span>() <span class="op">%&gt;%</span></span>
<span id="cb136-9"><a href="tse06.html#cb136-9"></a><span class="st">    </span><span class="kw">tab_pivot</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-top: 2px solid grey;">
</th>
<th colspan="1" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 #Total 
</th>
<th style="border-bottom: none; border-top: 2px solid grey;" colspan="1">
 
</th>
<th colspan="2" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Sexo de la persona entrevistada 
</th>
</tr>
<tr>
<th style="border-bottom: 1px solid grey; font-weight: 900; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;" colspan="1">
 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Hombre 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Mujer 
</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5" style="font-weight: 900;">
 Los cuidados y la atención recibida del personal médico 
</td>
</tr>
<tr>
<td style="text-align: left;">
   1 
</td>
<td style="text-align: right;">
0.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.6
</td>
<td style="text-align: right;">
0.6
</td>
</tr>
<tr>
<td style="text-align: left;">
   2 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   3 
</td>
<td style="text-align: right;">
0.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.9
</td>
<td style="text-align: right;">
1.0
</td>
</tr>
<tr>
<td style="text-align: left;">
   4 
</td>
<td style="text-align: right;">
2.1
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
2.4
</td>
<td style="text-align: right;">
1.8
</td>
</tr>
<tr>
<td style="text-align: left;">
   5 
</td>
<td style="text-align: right;">
6.8
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
5.6
</td>
<td style="text-align: right;">
7.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   6 
</td>
<td style="text-align: right;">
9.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
9.5
</td>
<td style="text-align: right;">
10.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   Bottom 
</td>
<td style="text-align: right;">
20.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
19.2
</td>
<td style="text-align: right;">
21.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
18.4
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
20.6
</td>
<td style="text-align: right;">
16.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
25.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
27.8
</td>
<td style="text-align: right;">
24.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   9 
</td>
<td style="text-align: right;">
15.1
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
14.4
</td>
<td style="text-align: right;">
15.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   10 
</td>
<td style="text-align: right;">
18.5
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
16.3
</td>
<td style="text-align: right;">
20.7
</td>
</tr>
<tr>
<td style="text-align: left;">
   Top 
</td>
<td style="text-align: right;">
33.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
30.7
</td>
<td style="text-align: right;">
36.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
1.3
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
1.5
</td>
<td style="text-align: right;">
1.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.3
</td>
</tr>
<tr>
<td style="text-align: left;">
   #Total cases 
</td>
<td style="text-align: right;">
2557
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
1256
</td>
<td style="text-align: right;">
1301
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
   Mean 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
7.7
</td>
<td style="border-bottom: 2px solid grey; text-align: right;" colspan="1">
 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
7.7
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
7.8
</td>
</tr>
</tbody>
</table>
<p>O también …</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="tse06.html#cb137-1"></a><span class="kw">val_lab</span>(data<span class="op">$</span>P901) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&#39;1&#39;</span>=<span class="dv">1</span>, <span class="st">&#39;2&#39;</span>=<span class="dv">2</span>, <span class="st">&#39;3&#39;</span>=<span class="dv">3</span>, <span class="st">&#39;4&#39;</span>=<span class="dv">4</span>, <span class="st">&#39;5&#39;</span>=<span class="dv">5</span>, <span class="st">&#39;6&#39;</span>=<span class="dv">6</span>, <span class="st">&#39;7&#39;</span>=<span class="dv">7</span>, <span class="st">&#39;8&#39;</span>=<span class="dv">8</span>, <span class="st">&#39;9&#39;</span>=<span class="dv">9</span>, <span class="st">&#39;10&#39;</span>=<span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span>=<span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span>=<span class="dv">99</span>)</span>
<span id="cb137-2"><a href="tse06.html#cb137-2"></a>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb137-3"><a href="tse06.html#cb137-3"></a><span class="st">    </span><span class="kw">tab_cols</span>(<span class="kw">total</span>(), P31) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb137-4"><a href="tse06.html#cb137-4"></a><span class="st">    </span><span class="kw">tab_cells</span>(P901) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb137-5"><a href="tse06.html#cb137-5"></a><span class="st">    </span><span class="kw">tab_net_cells</span>(<span class="st">&#39;Top&#39;</span>=<span class="dv">9</span><span class="op">:</span><span class="dv">10</span>, <span class="st">&#39;Bottom&#39;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">6</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb137-6"><a href="tse06.html#cb137-6"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>(<span class="dt">total_row_position=</span><span class="st">&#39;below&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb137-7"><a href="tse06.html#cb137-7"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="kw">na_if</span>(P901, <span class="kw">gt</span>(<span class="dv">10</span>))) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb137-8"><a href="tse06.html#cb137-8"></a><span class="st">    </span><span class="kw">tab_stat_mean</span>() <span class="op">%&gt;%</span></span>
<span id="cb137-9"><a href="tse06.html#cb137-9"></a><span class="st">    </span><span class="kw">tab_pivot</span>()</span></code></pre></div>
<table class="gmisc_table" style="border-collapse: collapse; margin-top: 1em; margin-bottom: 1em;">
<thead>
<tr>
<th style="border-top: 2px solid grey;">
</th>
<th colspan="1" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 #Total 
</th>
<th style="border-bottom: none; border-top: 2px solid grey;" colspan="1">
 
</th>
<th colspan="2" style="font-weight: 900; border-bottom: 1px solid grey; border-top: 2px solid grey; text-align: center;">
 Sexo de la persona entrevistada 
</th>
</tr>
<tr>
<th style="border-bottom: 1px solid grey; font-weight: 900; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;" colspan="1">
 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Hombre 
</th>
<th style="font-weight: 900; border-bottom: 1px solid grey; text-align: center;">
 Mujer 
</th>
</tr>
</thead>
<tbody>
<tr>
<td colspan="5" style="font-weight: 900;">
 Los cuidados y la atención recibida del personal médico 
</td>
</tr>
<tr>
<td style="text-align: left;">
   7 
</td>
<td style="text-align: right;">
18.4
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
20.6
</td>
<td style="text-align: right;">
16.2
</td>
</tr>
<tr>
<td style="text-align: left;">
   8 
</td>
<td style="text-align: right;">
25.9
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
27.8
</td>
<td style="text-align: right;">
24.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   Top 
</td>
<td style="text-align: right;">
33.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
30.7
</td>
<td style="text-align: right;">
36.4
</td>
</tr>
<tr>
<td style="text-align: left;">
   Bottom 
</td>
<td style="text-align: right;">
20.6
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
19.2
</td>
<td style="text-align: right;">
21.9
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.S. 
</td>
<td style="text-align: right;">
1.3
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
1.5
</td>
<td style="text-align: right;">
1.1
</td>
</tr>
<tr>
<td style="text-align: left;">
   N.C. 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
0.2
</td>
<td style="text-align: right;">
0.3
</td>
</tr>
<tr>
<td style="text-align: left;">
   #Total cases 
</td>
<td style="text-align: right;">
2557
</td>
<td style="text-align: right;" colspan="1">
 
</td>
<td style="text-align: right;">
1256
</td>
<td style="text-align: right;">
1301
</td>
</tr>
<tr>
<td style="border-bottom: 2px solid grey; text-align: left;">
   Mean 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
7.7
</td>
<td style="border-bottom: 2px solid grey; text-align: right;" colspan="1">
 
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
7.7
</td>
<td style="border-bottom: 2px solid grey; text-align: right;">
7.8
</td>
</tr>
</tbody>
</table>
<p>Así pues en esta última tabla, hemos combinado algunas de las funcionalidades especiales y avanzadas de <code>expss</code> de forma conjunta y trabajando en la misma dirección.</p>
<div id="gráficos-base" class="section level3">
<h3><span class="header-section-number">7.5.1</span> Gráficos base</h3>
<p>Dejamos además aquí esta <code>pildora adictiva</code>. ¿Un gráfico? Repetimos la tabla pero la guardamos en una objeto llamada <code>tab</code>. Limpiamos además aquello que no nos interesa.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="tse06.html#cb138-1"></a>tab &lt;-<span class="st"> </span>data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb138-2"><a href="tse06.html#cb138-2"></a><span class="st">    </span><span class="kw">tab_cols</span>(<span class="st">&#39;|&#39;</span>=<span class="kw">unvr</span>(P31)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb138-3"><a href="tse06.html#cb138-3"></a><span class="st">    </span><span class="kw">tab_cells</span>(<span class="st">&#39;|&#39;</span>=<span class="kw">unvr</span>(P901)) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb138-4"><a href="tse06.html#cb138-4"></a><span class="st">    </span><span class="kw">tab_net_cells</span>(<span class="st">&#39;Detractores&#39;</span> =<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">6</span>, <span class="st">&#39;Neutrales&#39;</span> =<span class="st"> </span><span class="dv">7</span><span class="op">:</span><span class="dv">8</span>, <span class="st">&#39;Promotores&#39;</span> =<span class="st"> </span><span class="dv">9</span><span class="op">:</span><span class="dv">10</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb138-5"><a href="tse06.html#cb138-5"></a><span class="st">    </span><span class="kw">tab_stat_cpct</span>(<span class="dt">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb138-6"><a href="tse06.html#cb138-6"></a><span class="st">    </span><span class="kw">tab_pivot</span>()</span>
<span id="cb138-7"><a href="tse06.html#cb138-7"></a>tab &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(tab)</span>
<span id="cb138-8"><a href="tse06.html#cb138-8"></a>tab</span></code></pre></div>
<pre><code>##    row_labels     Hombre      Mujer
## 1 Detractores 19.1878981 21.9062260
## 2   Neutrales 48.4076433 40.3535742
## 3  Promotores 30.7324841 36.3566487
## 4        N.S.  1.5127389  1.0760953
## 5        N.C.  0.1592357  0.3074558</code></pre>
<p>Fíjate como hemos limpiado la tabla. Hemos usado un recurso que para gráficos será muy válido, el uso de <code>unvr()</code> que elimina del uso de la variable los textos extra. Del mismo modo con el <code>'|'=</code> hemos anulado cualquier tipo de texto suplementario que se pudiera añadir. Cuando hacemos una tabla y la guardamos, es un objeto <code>etable</code> que ya describimos anteriormente. Como la mayoría de los paquetes gráficos usan <code>dataframes</code>, lo transformamos a eso.</p>
<p>Una vez hecho esto, hacemos el gráfico. Podemos elegir diferentes sistemas de gráficos, pero los más habituales e interactivos son <code>highcharter</code>(paquete escrito sobre Highcharts que es el que usa SegmentaNet por defecto) y/o <code>plotly</code>. Como paquete estático, <code>ggplot</code> sería la mejor solución.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="tse06.html#cb140-1"></a><span class="kw">suppressMessages</span>(<span class="kw">library</span>(highcharter, <span class="dt">quietly=</span><span class="ot">TRUE</span>))</span>
<span id="cb140-2"><a href="tse06.html#cb140-2"></a><span class="kw">highchart</span>() <span class="op">%&gt;%</span></span>
<span id="cb140-3"><a href="tse06.html#cb140-3"></a><span class="st">    </span><span class="kw">hc_xAxis</span>(<span class="dt">categories=</span>tab<span class="op">$</span>row_labels) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb140-4"><a href="tse06.html#cb140-4"></a><span class="st">    </span><span class="kw">hc_add_series</span>(<span class="dt">data=</span>tab, <span class="dt">type=</span><span class="st">&#39;column&#39;</span>, <span class="kw">hcaes</span>(<span class="dt">x=</span>row_labels, <span class="dt">y=</span> Hombre), <span class="dt">name=</span><span class="st">&#39;hombre&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb140-5"><a href="tse06.html#cb140-5"></a><span class="st">    </span><span class="kw">hc_add_series</span>(<span class="dt">data=</span>tab, <span class="dt">type=</span><span class="st">&#39;column&#39;</span>, <span class="kw">hcaes</span>(<span class="dt">x=</span>row_labels, <span class="dt">y=</span> Mujer), <span class="dt">name=</span><span class="st">&#39;mujer&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-86"></span>
<div id="htmlwidget-20a3f48609e7ec6e55f7" style="width:100%;height:500px;" class="highchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-20a3f48609e7ec6e55f7">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":null},"yAxis":{"title":{"text":null}},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"}},"xAxis":{"categories":["Detractores","Neutrales","Promotores","N.S.","N.C."]},"series":[{"group":"group","data":[{"row_labels":"Detractores","Hombre":19.187898089172,"Mujer":21.9062259800154,"y":19.187898089172,"name":"Detractores"},{"row_labels":"Neutrales","Hombre":48.4076433121019,"Mujer":40.3535741737125,"y":48.4076433121019,"name":"Neutrales"},{"row_labels":"Promotores","Hombre":30.7324840764331,"Mujer":36.3566487317448,"y":30.7324840764331,"name":"Promotores"},{"row_labels":"N.S.","Hombre":1.51273885350318,"Mujer":1.076095311299,"y":1.51273885350318,"name":"N.S."},{"row_labels":"N.C.","Hombre":0.159235668789809,"Mujer":0.307455803228286,"y":0.159235668789809,"name":"N.C."}],"type":"column","name":"hombre"},{"group":"group","data":[{"row_labels":"Detractores","Hombre":19.187898089172,"Mujer":21.9062259800154,"y":21.9062259800154,"name":"Detractores"},{"row_labels":"Neutrales","Hombre":48.4076433121019,"Mujer":40.3535741737125,"y":40.3535741737125,"name":"Neutrales"},{"row_labels":"Promotores","Hombre":30.7324840764331,"Mujer":36.3566487317448,"y":36.3566487317448,"name":"Promotores"},{"row_labels":"N.S.","Hombre":1.51273885350318,"Mujer":1.076095311299,"y":1.076095311299,"name":"N.S."},{"row_labels":"N.C.","Hombre":0.159235668789809,"Mujer":0.307455803228286,"y":0.307455803228286,"name":"N.C."}],"type":"column","name":"mujer"}]},"theme":{"colors":["#47475c","#61BC7B","#508CC8","#F49952","#9C9EDB","#6699a1"],"chart":{"style":{"fontFamily":"Roboto","color":"#666666"}},"title":{"align":"left","style":{"fontFamily":"Alegreya Sans SC","fontSize":"24px"}},"subtitle":{"align":"left","style":{"fontFamily":"Alegreya Sans","fontSize":"16px"}},"caption":{"style":{"fontFamily":"Alegreya Sans","fontSize":"14px"}},"credits":{"style":{"fontFamily":"Roboto","fontSize":"10px"}},"legend":{"align":"right","verticalAlign":"bottom"},"xAxis":{"gridLineWidth":1,"gridLineColor":"#F3F3F3","lineColor":"#F3F3F3","minorGridLineColor":"#F3F3F3","tickColor":"#F3F3F3","tickWidth":1},"yAxis":{"gridLineColor":"#F3F3F3","lineColor":"#F3F3F3","minorGridLineColor":"#F3F3F3","tickColor":"#F3F3F3","tickWidth":1},"plotOptions":{"line":{"marker":{"enabled":false}},"spline":{"marker":{"enabled":false}},"area":{"marker":{"enabled":false}},"areaspline":{"marker":{"enabled":false}},"arearange":{"marker":{"enabled":false}},"bubble":{"maxSize":"10%"}},"tooltip":{"valueDecimals":2}},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","drillUpText":"Back to {series.name}","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"thousandsSep":" ","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":["Roboto","Alegreya+Sans+SC","Alegreya+Sans"],"debug":false},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 7.1: Uso de gráfico highcharter 2
</p>
</div>
<p>Si el gráfico lo hacemos con plotly …</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="tse06.html#cb141-1"></a><span class="kw">suppressMessages</span>(<span class="kw">library</span>(plotly, <span class="dt">quietly=</span><span class="ot">TRUE</span>))</span>
<span id="cb141-2"><a href="tse06.html#cb141-2"></a>Grupo &lt;-<span class="st"> </span><span class="kw">factor</span>(tab<span class="op">$</span>row_labels, <span class="dt">levels=</span>tab<span class="op">$</span>row_labels)</span>
<span id="cb141-3"><a href="tse06.html#cb141-3"></a><span class="kw">plot_ly</span>(tab, <span class="dt">x =</span> <span class="op">~</span>Grupo, <span class="dt">y =</span> <span class="op">~</span>Hombre, <span class="dt">type =</span> <span class="st">&#39;bar&#39;</span>, <span class="dt">name =</span> <span class="st">&#39;Hombre&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb141-4"><a href="tse06.html#cb141-4"></a><span class="st">    </span><span class="kw">add_trace</span>(<span class="dt">y =</span> <span class="op">~</span>Mujer, <span class="dt">name =</span> <span class="st">&#39;Mujer&#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb141-5"><a href="tse06.html#cb141-5"></a><span class="st">    </span><span class="kw">layout</span>(<span class="dt">yaxis =</span> <span class="kw">list</span>(<span class="dt">title =</span> <span class="st">&#39;Count&#39;</span>))</span></code></pre></div>
<pre><code>## Warning: `arrange_()` is deprecated as of dplyr 0.7.0.
## Please use `arrange()` instead.
## See vignette(&#39;programming&#39;) for more help
## This warning is displayed once every 8 hours.
## Call `lifecycle::last_warnings()` to see where this warning was generated.</code></pre>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-87"></span>
<div id="htmlwidget-61b53295b5cf3e97976c" style="width:80%;height:504px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-61b53295b5cf3e97976c">{"x":{"visdat":{"339c41b74d13":["function () ","plotlyVisDat"]},"cur_data":"339c41b74d13","attrs":{"339c41b74d13":{"x":{},"y":{},"name":"Hombre","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"339c41b74d13.1":{"x":{},"y":{},"name":"Mujer","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"yaxis":{"domain":[0,1],"automargin":true,"title":"Count"},"xaxis":{"domain":[0,1],"automargin":true,"title":"Grupo","type":"category","categoryorder":"array","categoryarray":["Detractores","Neutrales","Promotores","N.S.","N.C."]},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["Detractores","Neutrales","Promotores","N.S.","N.C."],"y":[19.187898089172,48.4076433121019,30.7324840764331,1.51273885350318,0.159235668789809],"name":"Hombre","type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Detractores","Neutrales","Promotores","N.S.","N.C."],"y":[21.9062259800154,40.3535741737125,36.3566487317448,1.076095311299,0.307455803228286],"name":"Mujer","type":"bar","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 7.2: Uso de gráfico plotly
</p>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tse05.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tse07.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true,
"info": true
});
});
</script>

</body>

</html>
