<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Otras utilidades y tablas especiales | Tablas y gráficos con R y R Studio</title>
  <meta name="description" content="Guía para la realización de tablas de contingencia, reproduciendo tablas del tipo SPSS o BarbWin usando el paquete expss y visualizaciones de resultados con el paquete highcharter. Introducción al uso de scripts con R en el entorno de R Studio." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Otras utilidades y tablas especiales | Tablas y gráficos con R y R Studio" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Guía para la realización de tablas de contingencia, reproduciendo tablas del tipo SPSS o BarbWin usando el paquete expss y visualizaciones de resultados con el paquete highcharter. Introducción al uso de scripts con R en el entorno de R Studio." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Otras utilidades y tablas especiales | Tablas y gráficos con R y R Studio" />
  
  <meta name="twitter:description" content="Guía para la realización de tablas de contingencia, reproduciendo tablas del tipo SPSS o BarbWin usando el paquete expss y visualizaciones de resultados con el paquete highcharter. Introducción al uso de scripts con R en el entorno de R Studio." />
  

<meta name="author" content="Roberto Gil-Saura " />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tse05.html"/>
<link rel="next" href="tse07.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.17/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<script src="libs/proj4js-2.3.15/proj4.js"></script>
<link href="libs/highcharts-8.1.2/css/motion.css" rel="stylesheet" />
<script src="libs/highcharts-8.1.2/highcharts.js"></script>
<script src="libs/highcharts-8.1.2/highcharts-3d.js"></script>
<script src="libs/highcharts-8.1.2/highcharts-more.js"></script>
<script src="libs/highcharts-8.1.2/modules/stock.js"></script>
<script src="libs/highcharts-8.1.2/modules/map.js"></script>
<script src="libs/highcharts-8.1.2/modules/annotations.js"></script>
<script src="libs/highcharts-8.1.2/modules/data.js"></script>
<script src="libs/highcharts-8.1.2/modules/drilldown.js"></script>
<script src="libs/highcharts-8.1.2/modules/item-series.js"></script>
<script src="libs/highcharts-8.1.2/modules/offline-exporting.js"></script>
<script src="libs/highcharts-8.1.2/modules/overlapping-datalabels.js"></script>
<script src="libs/highcharts-8.1.2/modules/exporting.js"></script>
<script src="libs/highcharts-8.1.2/modules/export-data.js"></script>
<script src="libs/highcharts-8.1.2/modules/funnel.js"></script>
<script src="libs/highcharts-8.1.2/modules/heatmap.js"></script>
<script src="libs/highcharts-8.1.2/modules/treemap.js"></script>
<script src="libs/highcharts-8.1.2/modules/sankey.js"></script>
<script src="libs/highcharts-8.1.2/modules/dependency-wheel.js"></script>
<script src="libs/highcharts-8.1.2/modules/organization.js"></script>
<script src="libs/highcharts-8.1.2/modules/solid-gauge.js"></script>
<script src="libs/highcharts-8.1.2/modules/streamgraph.js"></script>
<script src="libs/highcharts-8.1.2/modules/sunburst.js"></script>
<script src="libs/highcharts-8.1.2/modules/vector.js"></script>
<script src="libs/highcharts-8.1.2/modules/wordcloud.js"></script>
<script src="libs/highcharts-8.1.2/modules/xrange.js"></script>
<script src="libs/highcharts-8.1.2/modules/tilemap.js"></script>
<script src="libs/highcharts-8.1.2/modules/venn.js"></script>
<script src="libs/highcharts-8.1.2/modules/gantt.js"></script>
<script src="libs/highcharts-8.1.2/modules/timeline.js"></script>
<script src="libs/highcharts-8.1.2/modules/parallel-coordinates.js"></script>
<script src="libs/highcharts-8.1.2/modules/bullet.js"></script>
<script src="libs/highcharts-8.1.2/modules/coloraxis.js"></script>
<script src="libs/highcharts-8.1.2/modules/dumbbell.js"></script>
<script src="libs/highcharts-8.1.2/modules/lollipop.js"></script>
<script src="libs/highcharts-8.1.2/modules/series-label.js"></script>
<script src="libs/highcharts-8.1.2/plugins/motion.js"></script>
<script src="libs/highcharts-8.1.2/custom/reset.js"></script>
<script src="libs/highcharts-8.1.2/modules/boost.js"></script>
<script src="libs/highchart-binding-0.8.2/highchart.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/jquery-sparkline-2.1.2/jquery.sparkline.css" rel="stylesheet" />
<script src="libs/jquery-sparkline-2.1.2/jquery.sparkline.js"></script>
<script src="libs/sparkline-binding-2.0/sparkline.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><br><a href="./">Tablas y gráficos con R y RStudio</a><br></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prefacio</a></li>
<li class="chapter" data-level="1" data-path="introducción.html"><a href="introducción.html"><i class="fa fa-check"></i><b>1</b> Introducción</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introducción.html"><a href="introducción.html#por-qué-este-libro"><i class="fa fa-check"></i><b>1.1</b> ¿Por qué este libro?</a></li>
<li class="chapter" data-level="1.2" data-path="introducción.html"><a href="introducción.html#para-quién-es-este-libro"><i class="fa fa-check"></i><b>1.2</b> ¿Para quién es este libro?</a></li>
<li class="chapter" data-level="1.3" data-path="introducción.html"><a href="introducción.html#estructura-del-documento"><i class="fa fa-check"></i><b>1.3</b> Estructura del documento</a></li>
<li class="chapter" data-level="1.4" data-path="introducción.html"><a href="introducción.html#tse01"><i class="fa fa-check"></i><b>1.4</b> Instalación de R y R Studio</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="introducción.html"><a href="introducción.html#instalación-de-r-en-windows"><i class="fa fa-check"></i><b>1.4.1</b> Instalación de R en Windows</a></li>
<li class="chapter" data-level="1.4.2" data-path="introducción.html"><a href="introducción.html#instalación-de-r-studio-en-windows"><i class="fa fa-check"></i><b>1.4.2</b> Instalación de R Studio en Windows</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introducción.html"><a href="introducción.html#uso-básico-de-r-studio-y-de-r"><i class="fa fa-check"></i><b>1.5</b> Uso básico de R Studio y de R</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="introducción.html"><a href="introducción.html#qué-es-r-studio-una-interfaz-para-usar-r"><i class="fa fa-check"></i><b>1.5.1</b> ¿Qué es R Studio?: una interfaz para usar R</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tse02.html"><a href="tse02.html"><i class="fa fa-check"></i><b>2</b> Primeros pasos y términos a conocer</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tse02.html"><a href="tse02.html#desde-dónde-creo-mis-scripts"><i class="fa fa-check"></i><b>2.1</b> ¿Desde dónde creo mis scripts?</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="tse02.html"><a href="tse02.html#scripting-en-consola"><i class="fa fa-check"></i><b>2.1.1</b> Scripting en consola</a></li>
<li class="chapter" data-level="2.1.2" data-path="tse02.html"><a href="tse02.html#scripting-con-markdown"><i class="fa fa-check"></i><b>2.1.2</b> Scripting con <em>markdown</em></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="tse02.html"><a href="tse02.html#primeros-pasos"><i class="fa fa-check"></i><b>2.2</b> Primeros pasos</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="tse02.html"><a href="tse02.html#carga-de-datos"><i class="fa fa-check"></i><b>2.2.1</b> Carga de datos</a></li>
<li class="chapter" data-level="2.2.2" data-path="tse02.html"><a href="tse02.html#instalación-de-paquetes"><i class="fa fa-check"></i><b>2.2.2</b> Instalación de paquetes</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="tse02.html"><a href="tse02.html#crear-un-fichero-r-markdown"><i class="fa fa-check"></i><b>2.3</b> Crear un fichero R Markdown</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="tse02.html"><a href="tse02.html#conclusión"><i class="fa fa-check"></i><b>2.3.1</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="tse02.html"><a href="tse02.html#básicos-de-r-yo-proceso-de-datos"><i class="fa fa-check"></i><b>2.4</b> Básicos de R y/o proceso de datos</a></li>
<li class="chapter" data-level="2.5" data-path="tse02.html"><a href="tse02.html#básicos-de-tabulación"><i class="fa fa-check"></i><b>2.5</b> Básicos de tabulación</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tse03.html"><a href="tse03.html"><i class="fa fa-check"></i><b>3</b> Tablas marginales</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tse03.html"><a href="tse03.html#una-pequeña-introducción"><i class="fa fa-check"></i><b>3.1</b> Una pequeña introducción</a></li>
<li class="chapter" data-level="3.2" data-path="tse03.html"><a href="tse03.html#frecuencias"><i class="fa fa-check"></i><b>3.2</b> Frecuencias</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="tse03.html"><a href="tse03.html#variables-de-respuesta-simple"><i class="fa fa-check"></i><b>3.2.1</b> Variables de respuesta simple</a></li>
<li class="chapter" data-level="3.2.2" data-path="tse03.html"><a href="tse03.html#variable-de-respuesta-múltiple"><i class="fa fa-check"></i><b>3.2.2</b> Variable de respuesta múltiple</a></li>
<li class="chapter" data-level="3.2.3" data-path="tse03.html"><a href="tse03.html#tablas-combinadas"><i class="fa fa-check"></i><b>3.2.3</b> Tablas combinadas</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="tse03.html"><a href="tse03.html#estadísticos"><i class="fa fa-check"></i><b>3.3</b> Estadísticos</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="tse03.html"><a href="tse03.html#estadísticos-básicos"><i class="fa fa-check"></i><b>3.3.1</b> Estadísticos básicos</a></li>
<li class="chapter" data-level="3.3.2" data-path="tse03.html"><a href="tse03.html#otros-estadísticos"><i class="fa fa-check"></i><b>3.3.2</b> Otros estadísticos</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="tse03.html"><a href="tse03.html#conclusión-1"><i class="fa fa-check"></i><b>3.4</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tse04.html"><a href="tse04.html"><i class="fa fa-check"></i><b>4</b> Tablas cruzadas</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tse04.html"><a href="tse04.html#básica-con-variables-simples"><i class="fa fa-check"></i><b>4.1</b> Básica con variables simples</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-simple-y-sólo-absolutos"><i class="fa fa-check"></i><b>4.1.1</b> De frecuencias, variable simple y sólo absolutos</a></li>
<li class="chapter" data-level="4.1.2" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-simple-con-porcentajes-de-columna"><i class="fa fa-check"></i><b>4.1.2</b> De frecuencias, variable simple, con porcentajes de columna</a></li>
<li class="chapter" data-level="4.1.3" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-simple-con-porcentajes-de-fila"><i class="fa fa-check"></i><b>4.1.3</b> De frecuencias, variable simple, con porcentajes de fila</a></li>
<li class="chapter" data-level="4.1.4" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-simple-con-porcentajes-total-muestra"><i class="fa fa-check"></i><b>4.1.4</b> De frecuencias, variable simple, con porcentajes total muestra</a></li>
<li class="chapter" data-level="4.1.5" data-path="tse04.html"><a href="tse04.html#combinaciones-de-los-anteriores"><i class="fa fa-check"></i><b>4.1.5</b> Combinaciones de los anteriores</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="tse04.html"><a href="tse04.html#básica-con-múltiples"><i class="fa fa-check"></i><b>4.2</b> Básica con múltiples</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-múltiple-y-sólo-absolutos"><i class="fa fa-check"></i><b>4.2.1</b> De frecuencias, variable múltiple y sólo absolutos</a></li>
<li class="chapter" data-level="4.2.2" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-múltiple-con-porcentajes-de-columna"><i class="fa fa-check"></i><b>4.2.2</b> De frecuencias, variable múltiple, con porcentajes de columna</a></li>
<li class="chapter" data-level="4.2.3" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-múltiple-con-porcentajes-de-fila"><i class="fa fa-check"></i><b>4.2.3</b> De frecuencias, variable múltiple, con porcentajes de fila</a></li>
<li class="chapter" data-level="4.2.4" data-path="tse04.html"><a href="tse04.html#de-frecuencias-variable-múltiple-con-porcentajes-total-muestra"><i class="fa fa-check"></i><b>4.2.4</b> De frecuencias, variable múltiple, con porcentajes total muestra</a></li>
<li class="chapter" data-level="4.2.5" data-path="tse04.html"><a href="tse04.html#combinaciones-de-los-anteriores-1"><i class="fa fa-check"></i><b>4.2.5</b> Combinaciones de los anteriores</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="tse04.html"><a href="tse04.html#básica-con-estadísticos"><i class="fa fa-check"></i><b>4.3</b> Básica con estadísticos</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="tse04.html"><a href="tse04.html#cruce-entre-variable-simple-y-dos-estadísticos"><i class="fa fa-check"></i><b>4.3.1</b> Cruce entre variable simple y dos estadísticos</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tse05.html"><a href="tse05.html"><i class="fa fa-check"></i><b>5</b> Tablas especiales</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tse05.html"><a href="tse05.html#subgrupos-filtros-en-la-tabla"><i class="fa fa-check"></i><b>5.1</b> Subgrupos (filtros en la tabla)</a></li>
<li class="chapter" data-level="5.2" data-path="tse05.html"><a href="tse05.html#bases-yo-con-anidación"><i class="fa fa-check"></i><b>5.2</b> Bases y/o con anidación</a></li>
<li class="chapter" data-level="5.3" data-path="tse05.html"><a href="tse05.html#características-avanzadas"><i class="fa fa-check"></i><b>5.3</b> Características avanzadas</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tse06.html"><a href="tse06.html"><i class="fa fa-check"></i><b>6</b> Otras utilidades y tablas especiales</a>
<ul>
<li class="chapter" data-level="6.1" data-path="tse06.html"><a href="tse06.html#recode"><i class="fa fa-check"></i><b>6.1</b> Recodificar</a></li>
<li class="chapter" data-level="6.2" data-path="tse06.html"><a href="tse06.html#cuadros"><i class="fa fa-check"></i><b>6.2</b> Cuadros</a></li>
<li class="chapter" data-level="6.3" data-path="tse06.html"><a href="tse06.html#ponderación"><i class="fa fa-check"></i><b>6.3</b> Ponderación</a></li>
<li class="chapter" data-level="6.4" data-path="tse06.html"><a href="tse06.html#subtotales-y-nets"><i class="fa fa-check"></i><b>6.4</b> Subtotales y NETS</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="tse06.html"><a href="tse06.html#subtotales"><i class="fa fa-check"></i><b>6.4.1</b> Subtotales</a></li>
<li class="chapter" data-level="6.4.2" data-path="tse06.html"><a href="tse06.html#nets"><i class="fa fa-check"></i><b>6.4.2</b> NETS</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="tse06.html"><a href="tse06.html#top-y-bottom"><i class="fa fa-check"></i><b>6.5</b> <em>Top</em> y <em>Bottom</em></a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="tse06.html"><a href="tse06.html#gráficos-base"><i class="fa fa-check"></i><b>6.5.1</b> Gráficos base</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tse07.html"><a href="tse07.html"><i class="fa fa-check"></i><b>7</b> Pruebas inferenciales</a>
<ul>
<li class="chapter" data-level="7.1" data-path="tse07.html"><a href="tse07.html#prueba-de-dependencia"><i class="fa fa-check"></i><b>7.1</b> Prueba de dependencia</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="tse07.html"><a href="tse07.html#de-una-tabla"><i class="fa fa-check"></i><b>7.1.1</b> De una tabla</a></li>
<li class="chapter" data-level="7.1.2" data-path="tse07.html"><a href="tse07.html#de-una-celda-de-una-tabla"><i class="fa fa-check"></i><b>7.1.2</b> De una celda de una tabla</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="tse07.html"><a href="tse07.html#pruebas-de-diferencias"><i class="fa fa-check"></i><b>7.2</b> Pruebas de diferencias</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="tse07.html"><a href="tse07.html#porcentajes-prueba-z"><i class="fa fa-check"></i><b>7.2.1</b> Porcentajes (prueba z)</a></li>
<li class="chapter" data-level="7.2.2" data-path="tse07.html"><a href="tse07.html#medias-prueba-t"><i class="fa fa-check"></i><b>7.2.2</b> Medias (prueba t)</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="tse07.html"><a href="tse07.html#parámetros-posibles-en-las-pruebas-de-significación"><i class="fa fa-check"></i><b>7.3</b> Parámetros posibles en las pruebas de significación</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="tse07.html"><a href="tse07.html#algunos-ejemplos-de-uso-de-los-parámetros"><i class="fa fa-check"></i><b>7.3.1</b> Algunos ejemplos de uso de los parámetros</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="tse07.html"><a href="tse07.html#conclusión-2"><i class="fa fa-check"></i><b>7.4</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tse08.html"><a href="tse08.html"><i class="fa fa-check"></i><b>8</b> Visualización gráfica</a>
<ul>
<li class="chapter" data-level="8.1" data-path="tse08.html"><a href="tse08.html#highcharter-introducción"><i class="fa fa-check"></i><b>8.1</b> <code>highcharter</code>, introducción</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="tse08.html"><a href="tse08.html#highchart"><i class="fa fa-check"></i><b>8.1.1</b> highchart()</a></li>
<li class="chapter" data-level="8.1.2" data-path="tse08.html"><a href="tse08.html#hchart"><i class="fa fa-check"></i><b>8.1.2</b> hchart()</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="tse08.html"><a href="tse08.html#mi-primer-gráfico"><i class="fa fa-check"></i><b>8.2</b> Mi primer gráfico</a></li>
<li class="chapter" data-level="8.3" data-path="tse08.html"><a href="tse08.html#gráfico-de-barras"><i class="fa fa-check"></i><b>8.3</b> Gráfico de barras</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="tse08.html"><a href="tse08.html#cambiar-el-nombre-de-la-serie-de-datos"><i class="fa fa-check"></i><b>8.3.1</b> Cambiar el nombre de la serie de datos</a></li>
<li class="chapter" data-level="8.3.2" data-path="tse08.html"><a href="tse08.html#añadir-créditos-al-gráfico"><i class="fa fa-check"></i><b>8.3.2</b> Añadir créditos al gráfico</a></li>
<li class="chapter" data-level="8.3.3" data-path="tse08.html"><a href="tse08.html#añadir-el-valor-del-dato-al-elemento-datalabels"><i class="fa fa-check"></i><b>8.3.3</b> Añadir el valor del dato al elemento (datalabels)</a></li>
<li class="chapter" data-level="8.3.4" data-path="tse08.html"><a href="tse08.html#guardar-y-exportar-el-gráfico"><i class="fa fa-check"></i><b>8.3.4</b> Guardar y exportar el gráfico</a></li>
<li class="chapter" data-level="8.3.5" data-path="tse08.html"><a href="tse08.html#api-de-highcharts-toda-la-potencia-de-los-gráficos"><i class="fa fa-check"></i><b>8.3.5</b> API de Highcharts, toda la potencia de los gráficos</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="tse08.html"><a href="tse08.html#gráfico-de-columna"><i class="fa fa-check"></i><b>8.4</b> Gráfico de columna</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="tse08.html"><a href="tse08.html#variación-de-columna-a-pirámide"><i class="fa fa-check"></i><b>8.4.1</b> Variación de columna a pirámide</a></li>
<li class="chapter" data-level="8.4.2" data-path="tse08.html"><a href="tse08.html#variación-de-columna-a-lollipop"><i class="fa fa-check"></i><b>8.4.2</b> Variación de columna a <em>lollipop</em></a></li>
<li class="chapter" data-level="8.4.3" data-path="tse08.html"><a href="tse08.html#gráficos-polares"><i class="fa fa-check"></i><b>8.4.3</b> Gráficos polares</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="tse08.html"><a href="tse08.html#diagramas-de-secciones"><i class="fa fa-check"></i><b>8.5</b> Diagramas de secciones</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="tse08.html"><a href="tse08.html#tarta-pie-chart"><i class="fa fa-check"></i><b>8.5.1</b> Tarta / <em>pie chart</em></a></li>
<li class="chapter" data-level="8.5.2" data-path="tse08.html"><a href="tse08.html#anillo-doughnut"><i class="fa fa-check"></i><b>8.5.2</b> Anillo / <em>doughnut</em></a></li>
<li class="chapter" data-level="8.5.3" data-path="tse08.html"><a href="tse08.html#funnel"><i class="fa fa-check"></i><b>8.5.3</b> <em>Funnel</em></a></li>
<li class="chapter" data-level="8.5.4" data-path="tse08.html"><a href="tse08.html#pirámide"><i class="fa fa-check"></i><b>8.5.4</b> Pirámide</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="tse08.html"><a href="tse08.html#gráfico-de-línea"><i class="fa fa-check"></i><b>8.6</b> Gráfico de línea</a></li>
<li class="chapter" data-level="8.7" data-path="tse08.html"><a href="tse08.html#gráficos-de-columnas-barras-con-apilamiento"><i class="fa fa-check"></i><b>8.7</b> Gráficos de columnas / barras con apilamiento</a></li>
<li class="chapter" data-level="8.8" data-path="tse08.html"><a href="tse08.html#gráfico-de-área"><i class="fa fa-check"></i><b>8.8</b> Gráfico de área</a></li>
<li class="chapter" data-level="8.9" data-path="tse08.html"><a href="tse08.html#gráfico-de-puntos-scatterplot"><i class="fa fa-check"></i><b>8.9</b> Gráfico de puntos / <em>scatterplot</em></a></li>
<li class="chapter" data-level="8.10" data-path="tse08.html"><a href="tse08.html#histograma-o-gráfico-de-densidad"><i class="fa fa-check"></i><b>8.10</b> Histograma o gráfico de densidad</a></li>
<li class="chapter" data-level="8.11" data-path="tse08.html"><a href="tse08.html#gráficos-indicadores"><i class="fa fa-check"></i><b>8.11</b> Gráficos indicadores</a>
<ul>
<li class="chapter" data-level="8.11.1" data-path="tse08.html"><a href="tse08.html#gauge"><i class="fa fa-check"></i><b>8.11.1</b> Gauge</a></li>
<li class="chapter" data-level="8.11.2" data-path="tse08.html"><a href="tse08.html#bullet"><i class="fa fa-check"></i><b>8.11.2</b> Bullet</a></li>
</ul></li>
<li class="chapter" data-level="8.12" data-path="tse08.html"><a href="tse08.html#gráfico-boxplot"><i class="fa fa-check"></i><b>8.12</b> Gráfico / <em>boxplot</em></a></li>
<li class="chapter" data-level="8.13" data-path="tse08.html"><a href="tse08.html#gráfico-de-barras-de-error"><i class="fa fa-check"></i><b>8.13</b> Gráfico de barras de error</a></li>
<li class="chapter" data-level="8.14" data-path="tse08.html"><a href="tse08.html#gráficos-de-transiciones"><i class="fa fa-check"></i><b>8.14</b> Gráficos de transiciones</a>
<ul>
<li class="chapter" data-level="8.14.1" data-path="tse08.html"><a href="tse08.html#diagrama-de-sankey"><i class="fa fa-check"></i><b>8.14.1</b> Diagrama de Sankey</a></li>
<li class="chapter" data-level="8.14.2" data-path="tse08.html"><a href="tse08.html#diagrama-de-rueda"><i class="fa fa-check"></i><b>8.14.2</b> Diagrama de rueda</a></li>
<li class="chapter" data-level="8.14.3" data-path="tse08.html"><a href="tse08.html#diagrama-streamgraph"><i class="fa fa-check"></i><b>8.14.3</b> Diagrama <em>streamgraph</em></a></li>
<li class="chapter" data-level="8.14.4" data-path="tse08.html"><a href="tse08.html#diagrama-de-redes"><i class="fa fa-check"></i><b>8.14.4</b> Diagrama de redes</a></li>
</ul></li>
<li class="chapter" data-level="8.15" data-path="tse08.html"><a href="tse08.html#conclusión-3"><i class="fa fa-check"></i><b>8.15</b> Conclusión</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tse-formateo.html"><a href="tse-formateo.html"><i class="fa fa-check"></i><b>9</b> Estilos y formatos de tabla</a>
<ul>
<li class="chapter" data-level="9.1" data-path="tse-formateo.html"><a href="tse-formateo.html#introducción-1"><i class="fa fa-check"></i><b>9.1</b> Introducción</a></li>
<li class="chapter" data-level="9.2" data-path="tse-formateo.html"><a href="tse-formateo.html#operaciones-con-tablas"><i class="fa fa-check"></i><b>9.2</b> Operaciones con tablas</a></li>
<li class="chapter" data-level="9.3" data-path="tse-formateo.html"><a href="tse-formateo.html#estilo-de-las-tablas"><i class="fa fa-check"></i><b>9.3</b> Estilo de las tablas</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="tse-formateo.html"><a href="tse-formateo.html#estilo-y-posición"><i class="fa fa-check"></i><b>9.3.1</b> Estilo y posición</a></li>
<li class="chapter" data-level="9.3.2" data-path="tse-formateo.html"><a href="tse-formateo.html#formato-específico-de-fila-o-columna"><i class="fa fa-check"></i><b>9.3.2</b> Formato específico de fila o columna</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="tse-formateo.html"><a href="tse-formateo.html#adición-de-imágenes-y-de-otros-elementos"><i class="fa fa-check"></i><b>9.4</b> Adición de imágenes y de otros elementos</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="tse-formateo.html"><a href="tse-formateo.html#adición-de-iconos-de-fontawesome"><i class="fa fa-check"></i><b>9.4.1</b> Adición de iconos de FontAwesome</a></li>
<li class="chapter" data-level="9.4.2" data-path="tse-formateo.html"><a href="tse-formateo.html#adición-de-gráficos-de-tipo-sparkline"><i class="fa fa-check"></i><b>9.4.2</b> Adición de gráficos de tipo sparkline</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="tse09.html"><a href="tse09.html"><i class="fa fa-check"></i><b>10</b> Condiciones</a>
<ul>
<li class="chapter" data-level="10.1" data-path="tse09.html"><a href="tse09.html#operadores-aritméticos"><i class="fa fa-check"></i><b>10.1</b> Operadores aritméticos</a></li>
<li class="chapter" data-level="10.2" data-path="tse09.html"><a href="tse09.html#operadores-relacionales"><i class="fa fa-check"></i><b>10.2</b> Operadores relacionales</a></li>
<li class="chapter" data-level="10.3" data-path="tse09.html"><a href="tse09.html#operadores-lógicos"><i class="fa fa-check"></i><b>10.3</b> Operadores lógicos</a></li>
<li class="chapter" data-level="10.4" data-path="tse09.html"><a href="tse09.html#operadores-de-asignación"><i class="fa fa-check"></i><b>10.4</b> Operadores de asignación</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="bibliografía.html"><a href="bibliografía.html"><i class="fa fa-check"></i>Bibliografía</a></li>
<li class="divider"></li>
<li><a href="https://www.investigaonline.com/book001" target="blank">Roberto Gil-Saura (c) 2021</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tablas y gráficos con R y R Studio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tse06" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Otras utilidades y tablas especiales</h1>
<div id="recode" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Recodificar</h2>
<p>Aunque ya en la sección anterior anterior hicimos una breve incursión en el uso de la recodificación, el paquete <code>expss</code> dispone de una serie de opciones muy interesantes acerca de este funcionalidad que usamos mucho en nuestro trabajo diario.</p>
<p>La función <code>recode</code> cambia la codificación de una variable en el contexto que se utiliza. Puede ser usada también para reorganizar o consolidar los valores de una variable existente en función de las condiciones. El diseño de esta función está inspirada en la utilidad <code>RECODE</code> de SPSS. El usuario facilita una secuencia de recodificaciones proporcionadas en forma de fórmulas.</p>
<p>Por ejemplo, <code>1:2 ~ 1</code> significa que todos los valores 1 y 2 se reemplazarán con 1. Cada valor se recodificará solo una vez, es decir, sea realiza una única ‘pasada’ por el registro empezando por el 1 y acabando por el N.</p>
<p>Dos formas de uso:</p>
<ul>
<li>Si <code>recode()</code> se usa como funcionalidad diferenciada, en este proceso de asignación aquellos valores que no cumplan ninguna condición permanecen sin cambios. * Si <code>recode()</code>se usa dentro de una tabla, los valores de recodificación (…) que no cumplen ninguna condición serán reemplazados por NA.</li>
</ul>
<p>Se pueden usar valores o condiciones lógicas más sofisticadas y funciones como condición. Hay varias funciones especiales para su uso como criterios; para más detalles, consulte los criterios <a href="#criteria"><strong>??</strong></a> en su sección <a href="tse08.html#tse08">8</a>.</p>
<p>El uso común se parece a este: <code>recode(x, 1:2 ~ -1, 3 ~ 0, 4:5 ~ 1, 99 ~ NA)</code>. Se puede observar que a los valores originales 1 y 2 se les imputa un -1, al 3 un 0, y a los valores 4 y 5 se les imputa un 1, el 99 se convierte en NA (valor perdido).</p>
<p>Para más información, ver detalles y ejemplos a continuación. Te dejamos los ejemplos del autor que ilustran muy bien las posibilidades de esta funcionalidad. Se reproducen los ejemplos de recodificación extraídos del manual de SPSS. Se utilizan datos ficticios generados en línea.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="tse06.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># RECODE V1 TO V3 (0=1) (1=0) (2, 3=-1) (9=9) (ELSE=SYSMIS)</span></span>
<span id="cb75-2"><a href="tse06.html#cb75-2" aria-hidden="true" tabindex="-1"></a>v1  <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">9</span>, <span class="dv">10</span>) <span class="co"># se crea la variable</span></span>
<span id="cb75-3"><a href="tse06.html#cb75-3" aria-hidden="true" tabindex="-1"></a>v1</span></code></pre></div>
<pre><code>## [1]  0  1  2  3  9 10</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="tse06.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">recode</span>(v1) <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="dv">1</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">3</span> <span class="sc">~</span> <span class="sc">-</span><span class="dv">1</span>, <span class="dv">9</span> <span class="sc">~</span> <span class="dv">9</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA</span>)</span>
<span id="cb77-2"><a href="tse06.html#cb77-2" aria-hidden="true" tabindex="-1"></a>v1</span></code></pre></div>
<pre><code>## [1]  1  0 -1 -1  9 NA</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="tse06.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># RECODE QVAR(1 THRU 5=1)(6 THRU 10=2)(11 THRU HI=3)(ELSE=0).</span></span>
<span id="cb79-2"><a href="tse06.html#cb79-2" aria-hidden="true" tabindex="-1"></a>qvar <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="dv">97</span>, <span class="cn">NA</span>, <span class="cn">NA</span>)</span>
<span id="cb79-3"><a href="tse06.html#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="fu">recode</span>(qvar, <span class="dv">1</span> <span class="sc">%thru%</span> <span class="dv">5</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="dv">6</span> <span class="sc">%thru%</span> <span class="dv">10</span> <span class="sc">~</span> <span class="dv">2</span>, <span class="dv">11</span> <span class="sc">%thru%</span> hi <span class="sc">~</span> <span class="dv">3</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 0 0</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="tse06.html#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the same result</span></span>
<span id="cb81-2"><a href="tse06.html#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">recode</span>(qvar, <span class="dv">1</span> <span class="sc">%thru%</span> <span class="dv">5</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="dv">6</span> <span class="sc">%thru%</span> <span class="dv">10</span> <span class="sc">~</span> <span class="dv">2</span>, <span class="fu">ge</span>(<span class="dv">11</span>) <span class="sc">~</span> <span class="dv">3</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 0 0</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="tse06.html#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co"># RECODE STRNGVAR (&#39;A&#39;, &#39;B&#39;, &#39;C&#39;=&#39;A&#39;)(&#39;D&#39;, &#39;E&#39;, &#39;F&#39;=&#39;B&#39;)(ELSE=&#39; &#39;). </span></span>
<span id="cb83-2"><a href="tse06.html#cb83-2" aria-hidden="true" tabindex="-1"></a>strngvar <span class="ot">=</span> LETTERS</span>
<span id="cb83-3"><a href="tse06.html#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="fu">recode</span>(strngvar, <span class="fu">c</span>(<span class="st">&#39;A&#39;</span>, <span class="st">&#39;B&#39;</span>, <span class="st">&#39;C&#39;</span>) <span class="sc">~</span> <span class="st">&#39;A&#39;</span>, <span class="fu">c</span>(<span class="st">&#39;D&#39;</span>, <span class="st">&#39;E&#39;</span>, <span class="st">&#39;F&#39;</span>) <span class="sc">~</span> <span class="st">&#39;B&#39;</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39; &#39;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot;
## [20] &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot; &quot;</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="tse06.html#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># recode in place. Note that we recode only first six letters</span></span>
<span id="cb85-2"><a href="tse06.html#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">recode</span>(strngvar) <span class="ot">=</span> <span class="fu">c</span>(<span class="fu">c</span>(<span class="st">&#39;A&#39;</span>, <span class="st">&#39;B&#39;</span>, <span class="st">&#39;C&#39;</span>) <span class="sc">~</span> <span class="st">&#39;A&#39;</span>, <span class="fu">c</span>(<span class="st">&#39;D&#39;</span>, <span class="st">&#39;E&#39;</span>, <span class="st">&#39;F&#39;</span>) <span class="sc">~</span> <span class="st">&#39;B&#39;</span>)</span>
<span id="cb85-3"><a href="tse06.html#cb85-3" aria-hidden="true" tabindex="-1"></a>strngvar</span></code></pre></div>
<pre><code>##  [1] &quot;A&quot; &quot;A&quot; &quot;A&quot; &quot;B&quot; &quot;B&quot; &quot;B&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot; &quot;K&quot; &quot;L&quot; &quot;M&quot; &quot;N&quot; &quot;O&quot; &quot;P&quot; &quot;Q&quot; &quot;R&quot; &quot;S&quot;
## [20] &quot;T&quot; &quot;U&quot; &quot;V&quot; &quot;W&quot; &quot;X&quot; &quot;Y&quot; &quot;Z&quot;</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="tse06.html#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># RECODE AGE (MISSING=9) (18 THRU HI=1) (0 THRU 18=0) INTO VOTER. </span></span>
<span id="cb87-2"><a href="tse06.html#cb87-2" aria-hidden="true" tabindex="-1"></a>age <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">40</span>, <span class="cn">NA</span>)</span>
<span id="cb87-3"><a href="tse06.html#cb87-3" aria-hidden="true" tabindex="-1"></a>voter <span class="ot">=</span> <span class="fu">recode</span>(age, <span class="cn">NA</span> <span class="sc">~</span> <span class="dv">9</span>, <span class="dv">18</span> <span class="sc">%thru%</span> hi <span class="sc">~</span> <span class="dv">1</span>, <span class="dv">0</span> <span class="sc">%thru%</span> <span class="dv">18</span> <span class="sc">~</span> <span class="dv">0</span>)</span>
<span id="cb87-4"><a href="tse06.html#cb87-4" aria-hidden="true" tabindex="-1"></a>voter</span></code></pre></div>
<pre><code>##  [1] 9 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
## [39] 1 1 9</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="tse06.html#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the same result with &#39;%into%&#39;</span></span>
<span id="cb89-2"><a href="tse06.html#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">recode</span>(age, <span class="cn">NA</span> <span class="sc">~</span> <span class="dv">9</span>, <span class="dv">18</span> <span class="sc">%thru%</span> hi <span class="sc">~</span> <span class="dv">1</span>, <span class="dv">0</span> <span class="sc">%thru%</span> <span class="dv">18</span> <span class="sc">~</span> <span class="dv">0</span>) <span class="sc">%into%</span> voter2</span>
<span id="cb89-3"><a href="tse06.html#cb89-3" aria-hidden="true" tabindex="-1"></a>voter2</span></code></pre></div>
<pre><code>##  [1] 9 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
## [39] 1 1 9</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="tse06.html#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># recode with adding labels</span></span>
<span id="cb91-2"><a href="tse06.html#cb91-2" aria-hidden="true" tabindex="-1"></a>voter <span class="ot">=</span> <span class="fu">recode</span>(age, <span class="st">&quot;Refuse to answer&quot;</span> <span class="ot">=</span> <span class="cn">NA</span> <span class="sc">~</span> <span class="dv">9</span>,<span class="st">&quot;Vote&quot;</span> <span class="ot">=</span> <span class="dv">18</span> <span class="sc">%thru%</span> hi <span class="sc">~</span> <span class="dv">1</span>, <span class="st">&quot;Don&#39;t vote&quot;</span> <span class="ot">=</span> <span class="dv">0</span> <span class="sc">%thru%</span> <span class="dv">18</span> <span class="sc">~</span> <span class="dv">0</span>)</span>
<span id="cb91-3"><a href="tse06.html#cb91-3" aria-hidden="true" tabindex="-1"></a>voter</span></code></pre></div>
<pre><code>## VALUES:
## 9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 9
## VALUE LABELS:                   
##  0 Don&#39;t vote      
##  1 Vote            
##  9 Refuse to answer</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="tse06.html#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># recoding with labels</span></span>
<span id="cb93-2"><a href="tse06.html#cb93-2" aria-hidden="true" tabindex="-1"></a>ol <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">7</span>, <span class="dv">99</span>)</span>
<span id="cb93-3"><a href="tse06.html#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="fu">var_lab</span>(ol) <span class="ot">=</span> <span class="st">&quot;Liking&quot;</span> <span class="co">#texto extra</span></span>
<span id="cb93-4"><a href="tse06.html#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(ol)  <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;Disgusting&#39;</span> <span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;Very Poor&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;Poor&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;So-so&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;Good&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;Very good&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;Excellent&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;Hard to say&#39;</span><span class="ot">=</span><span class="dv">99</span>) <span class="co">#etiquetas códigos</span></span>
<span id="cb93-5"><a href="tse06.html#cb93-5" aria-hidden="true" tabindex="-1"></a><span class="fu">recode</span>(ol, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">7</span> <span class="sc">~</span> <span class="dv">7</span>, <span class="cn">TRUE</span> <span class="sc">~</span> copy, <span class="at">with_labels =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## LABEL: Liking 
## VALUES:
## 1, 1, 1, 4, 7, 7, 7, 99
## VALUE LABELS:                             
##   1 Disgusting/Very Poor/Poor
##   4 So-so                    
##   7 Good/Very good/Excellent 
##  99 Hard to say</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="tse06.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># &#39;rec&#39; is a shortcut for recoding with labels. Same result: </span></span>
<span id="cb95-2"><a href="tse06.html#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rec</span>(ol, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">7</span> <span class="sc">~</span> <span class="dv">7</span>, <span class="cn">TRUE</span> <span class="sc">~</span> copy)</span></code></pre></div>
<pre><code>## LABEL: Liking 
## VALUES:
## 1, 1, 1, 4, 7, 7, 7, 99
## VALUE LABELS:                             
##   1 Disgusting/Very Poor/Poor
##   4 So-so                    
##   7 Good/Very good/Excellent 
##  99 Hard to say</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="tse06.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># another method of combining labels</span></span>
<span id="cb97-2"><a href="tse06.html#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">recode</span>(ol, <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">7</span> <span class="sc">~</span> <span class="dv">7</span>, <span class="cn">TRUE</span> <span class="sc">~</span> copy, <span class="at">with_labels =</span> <span class="cn">TRUE</span>, <span class="at">new_label =</span> <span class="st">&quot;range&quot;</span>)</span></code></pre></div>
<pre><code>## LABEL: Liking 
## VALUES:
## 1, 1, 1, 4, 7, 7, 7, 99
## VALUE LABELS:                     
##   1 Disgusting - Poor
##   4 So-so            
##   7 Good - Excellent 
##  99 Hard to say</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="tse06.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># example with from/to notation</span></span>
<span id="cb99-2"><a href="tse06.html#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="tse06.html#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="co"># RECODE QVAR(1 THRU 5=1)(6 THRU 10=2)(11 THRU HI=3)(ELSE=0).</span></span>
<span id="cb99-4"><a href="tse06.html#cb99-4" aria-hidden="true" tabindex="-1"></a>list_from <span class="ot">=</span> <span class="fu">list</span>(<span class="dv">1</span> <span class="sc">%thru%</span> <span class="dv">5</span>, <span class="dv">6</span> <span class="sc">%thru%</span> <span class="dv">10</span>, <span class="fu">ge</span>(<span class="dv">11</span>), <span class="cn">TRUE</span>)</span>
<span id="cb99-5"><a href="tse06.html#cb99-5" aria-hidden="true" tabindex="-1"></a>list_to <span class="ot">=</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">0</span>)</span>
<span id="cb99-6"><a href="tse06.html#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="fu">recode</span>(qvar, <span class="fu">from_to</span>(list_from, list_to))</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 2 2 2 2 2 3 3 3 3 3 3 3 3 3 3 3 0 0</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="tse06.html#cb101-1" aria-hidden="true" tabindex="-1"></a>list_from <span class="ot">=</span> <span class="fu">list</span>(<span class="cn">NA</span>, <span class="dv">18</span> <span class="sc">%thru%</span> hi, <span class="dv">0</span> <span class="sc">%thru%</span> <span class="dv">18</span>)</span>
<span id="cb101-2"><a href="tse06.html#cb101-2" aria-hidden="true" tabindex="-1"></a>list_to <span class="ot">=</span> <span class="fu">list</span>(<span class="st">&quot;Refuse to answer&quot;</span> <span class="ot">=</span> <span class="dv">9</span>, <span class="st">&quot;Vote&quot;</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">&quot;Don&#39;t vote&quot;</span> <span class="ot">=</span> <span class="dv">0</span>)</span>
<span id="cb101-3"><a href="tse06.html#cb101-3" aria-hidden="true" tabindex="-1"></a>voter <span class="ot">=</span> <span class="fu">recode</span>(age, <span class="fu">from_to</span>(list_from, list_to))</span>
<span id="cb101-4"><a href="tse06.html#cb101-4" aria-hidden="true" tabindex="-1"></a>voter</span></code></pre></div>
<pre><code>## VALUES:
## 9, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 9
## VALUE LABELS:                   
##  0 Don&#39;t vote      
##  1 Vote            
##  9 Refuse to answer</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="tse06.html#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># &#39;ifs&#39; examples</span></span>
<span id="cb103-2"><a href="tse06.html#cb103-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb103-3"><a href="tse06.html#cb103-3" aria-hidden="true" tabindex="-1"></a>b <span class="ot">=</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">1</span></span>
<span id="cb103-4"><a href="tse06.html#cb103-4" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="tse06.html#cb105-1" aria-hidden="true" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>## [1] 5 4 3 2 1</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="tse06.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifs</span>(b<span class="sc">&gt;</span><span class="dv">3</span> <span class="sc">~</span> <span class="dv">1</span>)                       <span class="co"># c(1, 1, NA, NA, NA)</span></span></code></pre></div>
<pre><code>## [1]  1  1 NA NA NA</code></pre>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="tse06.html#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifs</span>(b<span class="sc">&gt;</span><span class="dv">3</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">3</span>)             <span class="co"># c(1, 1, 3, 3, 3)</span></span></code></pre></div>
<pre><code>## [1] 1 1 3 3 3</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="tse06.html#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifs</span>(b<span class="sc">&gt;</span><span class="dv">3</span> <span class="sc">~</span> <span class="dv">1</span>, a<span class="sc">&gt;</span><span class="dv">4</span> <span class="sc">~</span> <span class="dv">7</span>, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">3</span>)    <span class="co"># c(1, 1, 3, 3, 7)</span></span></code></pre></div>
<pre><code>## [1] 1 1 3 3 7</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="tse06.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ifs</span>(b<span class="sc">&gt;</span><span class="dv">3</span> <span class="sc">~</span> a, <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">42</span>)            <span class="co"># c(1, 2, 42, 42, 42)</span></span></code></pre></div>
<pre><code>## [1]  1  2 42 42 42</code></pre>
<p>El <code>recode()</code>puede ser utilizado como funcionalidad separada y con asignación o dentro de la definición de una variable. Por ejemplo:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="tse06.html#cb115-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb115-2"><a href="tse06.html#cb115-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> v1</span>
<span id="cb115-3"><a href="tse06.html#cb115-3" aria-hidden="true" tabindex="-1"></a>v1</span></code></pre></div>
<pre><code>##  [1] 1 2 3 2 1 2 3 4 5 6 5 4 3 2 1</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="tse06.html#cb117-1" aria-hidden="true" tabindex="-1"></a>v2</span></code></pre></div>
<pre><code>##  [1] 1 2 3 2 1 2 3 4 5 6 5 4 3 2 1</code></pre>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="tse06.html#cb119-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">recode</span>(v1, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">~</span> <span class="dv">2</span>)</span>
<span id="cb119-2"><a href="tse06.html#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(v1,<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 1.066667</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="tse06.html#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">recode</span>(v2, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span> <span class="sc">~</span> <span class="dv">1</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">~</span> <span class="dv">2</span>), <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 1.066667</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="tse06.html#cb123-1" aria-hidden="true" tabindex="-1"></a>v1</span></code></pre></div>
<pre><code>##  [1] 1 1 1 1 1 1 1 1 1 2 1 1 1 1 1</code></pre>
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="tse06.html#cb125-1" aria-hidden="true" tabindex="-1"></a>v2</span></code></pre></div>
<pre><code>##  [1] 1 2 3 2 1 2 3 4 5 6 5 4 3 2 1</code></pre>
<p>Nótese que la diferencia estriba en que mientras que al finalizar el proceso <code>v1</code> tiene solo valores 1 y 2 recodificados, <code>v2</code> (copia de v1) mantiene los valores originales.</p>
</div>
<div id="cuadros" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Cuadros</h2>
<p>En ocasiones es interesante reproducir algún tipo de cuadro que se ha presentado al entrevistado (baterías de ítems, cuadros, rejillas o grids, grillas o tablas de ítems, son sinónimos). Por ejemplo la pregunta <code>P9</code> del cuestionario nos presenta un cuadro en el que hay hasta 7 ítems valorados de 1 a 10, con los valores 98 y 99 como <code>NS</code> y <code>NC</code> respectivamente. Así que vamos a procesar esas tablas como cuadros.</p>
<p>Nuestro script es el siguiente …</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="tse06.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.datatable_widget</span>(data <span class="sc">%&gt;%</span> </span>
<span id="cb127-2"><a href="tse06.html#cb127-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(P901 <span class="sc">%to%</span> P907) <span class="sc">%&gt;%</span> </span>
<span id="cb127-3"><a href="tse06.html#cb127-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb127-4"><a href="tse06.html#cb127-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>())</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-79"></span>
<div id="htmlwidget-82be6b8d42be9df224bb" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-82be6b8d42be9df224bb">{"x":{"filter":"none","class":"stripe hover cell-border row-border order-column compact","data":[["Los cuidados y la atención recibida del personal médico","","","","","","","","","","","","","Los cuidados y la atención recibida del personal de enfermería","","","","","","","","","","","","","La confianza y seguridad que transmite el personal médico","","","","","","","","","","","","","La confianza y seguridad que transmite el personal de enfermería","","","","","","","","","","","","","El tiempo dedicado por el médico o la médica a cada enfermo o enferma","","","","","","","","","","","","","El conocimiento del historial y seguimiento de los problemas de salud de cada usuario o usuaria","","","","","","","","","","","","","La información recibida sobre su problema de salud","","","","","","","","","","","",""],["1 Totalmente insatisfactorio","2","3","4","5","6","7","8","9","10 Totalmente satisfactorio","N.S.","N.C.","#Total cases","1 Totalmente insatisfactorio","2","3","4","5","6","7","8","9","10 Totalmente satisfactorio","N.S.","N.C.","#Total cases","1 Totalmente insatisfactorio","2","3","4","5","6","7","8","9","10 Totalmente satisfactorio","N.S.","N.C.","#Total cases","1 Totalmente insatisfactorio","2","3","4","5","6","7","8","9","10 Totalmente satisfactorio","N.S.","N.C.","#Total cases","1 Totalmente insatisfactorio","2","3","4","5","6","7","8","9","10 Totalmente satisfactorio","N.S.","N.C.","#Total cases","1 Totalmente insatisfactorio","2","3","4","5","6","7","8","9","10 Totalmente satisfactorio","N.S.","N.C.","#Total cases","1 Totalmente insatisfactorio","2","3","4","5","6","7","8","9","10 Totalmente satisfactorio","N.S.","N.C.","#Total cases"],[0.6,0.2,0.9,2.1,6.8,9.9,18.4,25.9,15.1,18.5,1.3,0.2,2557,0.4,0.4,0.4,1.4,6.1,10.4,17.4,26.1,14.8,16.6,5.9,0.2,2557,1.1,0.7,0.9,2.1,6.5,9.2,16.4,23.5,16.1,21.2,1.8,0.4,2557,0.4,0.5,0.7,1.4,6.2,9.3,18.7,24.4,14.1,17.8,6.1,0.2,2557,1.4,1.7,2.6,4.8,11.5,13.6,17.1,18.3,11.5,15.1,2.1,0.2,2557,1.6,1,1.5,3.7,7.4,10.7,16.5,21.2,13,18.3,4.7,0.4,2557,1.4,1.1,1.7,3.1,7.4,10.4,17,21.5,15,18.3,2.7,0.4,2557]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th rowspan=\"1\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        \n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        #Total\n      <\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"paging":false,"searching":false,"sorting":false,"ordering":false,"bFilter":false,"bInfo":false,"columnDefs":[{"className":"dt-head-left","targets":[0,1,2]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'right'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p class="caption">
Figura 6.1: Cuadros de baterías
</p>
</div>
<p>Esta sería la salida lógica que damos a la tabla. Sin embargo utilizando algunos pequeños trucos, podemos presentarlo así.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="tse06.html#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P901) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb128-2"><a href="tse06.html#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P902) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb128-3"><a href="tse06.html#cb128-3" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P903) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb128-4"><a href="tse06.html#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P904) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb128-5"><a href="tse06.html#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P905) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb128-6"><a href="tse06.html#cb128-6" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P906) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb128-7"><a href="tse06.html#cb128-7" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P907) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb128-8"><a href="tse06.html#cb128-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-9"><a href="tse06.html#cb128-9" aria-hidden="true" tabindex="-1"></a><span class="fu">as.datatable_widget</span>(data <span class="sc">%&gt;%</span> </span>
<span id="cb128-10"><a href="tse06.html#cb128-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="st">&#39;|&#39;</span><span class="ot">=</span><span class="fu">unvr</span>(P901)) <span class="sc">%&gt;%</span> </span>
<span id="cb128-11"><a href="tse06.html#cb128-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>(<span class="at">label=</span><span class="fu">var_lab</span>(P901), <span class="at">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-12"><a href="tse06.html#cb128-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_mean_sd_n</span>(<span class="at">label=</span><span class="st">&#39;P901&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-13"><a href="tse06.html#cb128-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="st">&#39;|&#39;</span><span class="ot">=</span><span class="fu">unvr</span>(P902)) <span class="sc">%&gt;%</span> </span>
<span id="cb128-14"><a href="tse06.html#cb128-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>(<span class="at">label=</span><span class="fu">var_lab</span>(P902), <span class="at">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-15"><a href="tse06.html#cb128-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_mean_sd_n</span>(<span class="at">label=</span><span class="st">&#39;P901&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-16"><a href="tse06.html#cb128-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="st">&#39;|&#39;</span><span class="ot">=</span><span class="fu">unvr</span>(P903)) <span class="sc">%&gt;%</span> </span>
<span id="cb128-17"><a href="tse06.html#cb128-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>(<span class="at">label=</span><span class="fu">var_lab</span>(P903), <span class="at">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-18"><a href="tse06.html#cb128-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_mean_sd_n</span>(<span class="at">label=</span><span class="st">&#39;P901&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-19"><a href="tse06.html#cb128-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="st">&#39;|&#39;</span><span class="ot">=</span><span class="fu">unvr</span>(P904)) <span class="sc">%&gt;%</span> </span>
<span id="cb128-20"><a href="tse06.html#cb128-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>(<span class="at">label=</span><span class="fu">var_lab</span>(P904), <span class="at">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-21"><a href="tse06.html#cb128-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_mean_sd_n</span>(<span class="at">label=</span><span class="st">&#39;P901&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-22"><a href="tse06.html#cb128-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="st">&#39;|&#39;</span><span class="ot">=</span><span class="fu">unvr</span>(P905)) <span class="sc">%&gt;%</span> </span>
<span id="cb128-23"><a href="tse06.html#cb128-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>(<span class="at">label=</span><span class="fu">var_lab</span>(P905), <span class="at">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-24"><a href="tse06.html#cb128-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_mean_sd_n</span>() <span class="sc">%&gt;%</span></span>
<span id="cb128-25"><a href="tse06.html#cb128-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="st">&#39;|&#39;</span><span class="ot">=</span><span class="fu">unvr</span>(P906)) <span class="sc">%&gt;%</span> </span>
<span id="cb128-26"><a href="tse06.html#cb128-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>(<span class="at">label=</span><span class="fu">var_lab</span>(P906), <span class="at">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-27"><a href="tse06.html#cb128-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_mean_sd_n</span>() <span class="sc">%&gt;%</span></span>
<span id="cb128-28"><a href="tse06.html#cb128-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="st">&#39;|&#39;</span><span class="ot">=</span><span class="fu">unvr</span>(P907)) <span class="sc">%&gt;%</span> </span>
<span id="cb128-29"><a href="tse06.html#cb128-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>(<span class="at">label=</span><span class="fu">var_lab</span>(P907), <span class="at">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-30"><a href="tse06.html#cb128-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_mean_sd_n</span>() <span class="sc">%&gt;%</span></span>
<span id="cb128-31"><a href="tse06.html#cb128-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>(<span class="at">stat_position=</span><span class="st">&#39;inside_columns&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb128-32"><a href="tse06.html#cb128-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">t</span>())</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-80"></span>
<div id="htmlwidget-4a0e8e2f59e989036bf5" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-4a0e8e2f59e989036bf5">{"x":{"filter":"none","class":"stripe hover cell-border row-border order-column compact","data":[["#Total","","","","","","","","","","","","",""],["Los cuidados y la atención recibida del personal médico","P901","Los cuidados y la atención recibida del personal de enfermería","P901.1","La confianza y seguridad que transmite el personal médico","P901.2","La confianza y seguridad que transmite el personal de enfermería","P901.3","El tiempo dedicado por el médico o la médica a cada enfermo o enferma","","El conocimiento del historial y seguimiento de los problemas de salud de cada usuario o usuaria",".1","La información recibida sobre su problema de salud",""],[0.6,null,0.4,null,1.1,null,0.4,null,1.4,null,1.6,null,1.4,null],[0.2,null,0.4,null,0.7,null,0.5,null,1.7,null,1,null,1.1,null],[0.9,null,0.4,null,0.9,null,0.7,null,2.6,null,1.5,null,1.7,null],[2.1,null,1.4,null,2.1,null,1.4,null,4.8,null,3.7,null,3.1,null],[6.8,null,6.1,null,6.5,null,6.2,null,11.5,null,7.4,null,7.4,null],[9.9,null,10.4,null,9.2,null,9.3,null,13.6,null,10.7,null,10.4,null],[18.4,null,17.4,null,16.4,null,18.7,null,17.1,null,16.5,null,17,null],[25.9,null,26.1,null,23.5,null,24.4,null,18.3,null,21.2,null,21.5,null],[15.1,null,14.8,null,16.1,null,14.1,null,11.5,null,13,null,15,null],[18.5,null,16.6,null,21.2,null,17.8,null,15.1,null,18.3,null,18.3,null],[1.3,null,5.9,null,1.8,null,6.1,null,2.1,null,4.7,null,2.7,null],[0.2,null,0.2,null,0.4,null,0.2,null,0.2,null,0.4,null,0.4,null],[null,9.1,null,13.2,null,9.7,null,13.5,null,9.2,null,12,null,10.4],[null,11.2,null,21.6,null,13.2,null,22.1,null,13.8,null,19.9,null,16],[null,2557,null,2557,null,2557,null,2557,null,2557,null,2557,null,2557]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th rowspan=\"1\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        \n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        1\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        2\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        3\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        4\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        5\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        6\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        7\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        8\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        9\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        10\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        N.S.\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        N.C.\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Mean\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Std. dev.\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Unw. valid N\n      <\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"paging":false,"searching":false,"sorting":false,"ordering":false,"bFilter":false,"bInfo":false,"columnDefs":[{"className":"dt-head-left","targets":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'right'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'right'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'right'});\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'text-align':'right'});\nvar value=data[6]; $(this.api().cell(row, 6).node()).css({'text-align':'right'});\nvar value=data[7]; $(this.api().cell(row, 7).node()).css({'text-align':'right'});\nvar value=data[8]; $(this.api().cell(row, 8).node()).css({'text-align':'right'});\nvar value=data[9]; $(this.api().cell(row, 9).node()).css({'text-align':'right'});\nvar value=data[10]; $(this.api().cell(row, 10).node()).css({'text-align':'right'});\nvar value=data[11]; $(this.api().cell(row, 11).node()).css({'text-align':'right'});\nvar value=data[12]; $(this.api().cell(row, 12).node()).css({'text-align':'right'});\nvar value=data[13]; $(this.api().cell(row, 13).node()).css({'text-align':'right'});\nvar value=data[14]; $(this.api().cell(row, 14).node()).css({'text-align':'right'});\nvar value=data[15]; $(this.api().cell(row, 15).node()).css({'text-align':'right'});\nvar value=data[16]; $(this.api().cell(row, 16).node()).css({'text-align':'right'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p class="caption">
Figura 6.2: Cuadros de baterías modificado
</p>
</div>
<p>¿Qué hemos hecho?, hemos limpiado el texto de la variable utilizando la función <code>'|'=unvr()</code> y ese mismo texto extra de la variable <code>var_lab()</code> se lo hemos asignado al estadístico con <code>label</code>. De esta forma el resultado es el que ves. Desafortunadamente, hay un pequeño bug del que está informado el autor, de no poder situar la media y/o la desviación típica en la misma fila. Para hacerlo hay que unir dos tablas. Como esperamos esté resuelto en breve, no damos la solución por no complicar más la salida.</p>
</div>
<div id="ponderación" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Ponderación</h2>
<p>Otro de los aspectos fundamentales en la investigación de mercados es la ponderación. Lo primero que debemos entender es el propio concepto de ponderación. En definitiva, es hacer que cada registro (% de casos o casos o estadísticos) en lugar de contar como un caso (frecuencia 1) , cuente como n casos, siendo n el valor de otro campo (indicado en weight() -peso-) del marco de datos. Este peso ha sido obtenido por un procedimiento llamado equilibraje (raking).</p>
<p>Aquí muestro la tabla, sin ponderar …</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="tse06.html#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.datatable_widget</span>(data <span class="sc">%&gt;%</span> </span>
<span id="cb129-2"><a href="tse06.html#cb129-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cols</span>(<span class="fu">total</span>(),P3 ) <span class="sc">%&gt;%</span></span>
<span id="cb129-3"><a href="tse06.html#cb129-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="fu">mdset</span>(P21A01 <span class="sc">%to%</span> P21A03)) <span class="sc">%&gt;%</span> </span>
<span id="cb129-4"><a href="tse06.html#cb129-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb129-5"><a href="tse06.html#cb129-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>())</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-81"></span>
<div id="htmlwidget-ec779fb5c2087d14231a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-ec779fb5c2087d14231a">{"x":{"filter":"none","class":"stripe hover cell-border row-border order-column compact","data":[["Medicamentos que recetan por adelantado (para que no falten)","Envases que han quedado sin usar porque cambiaron el tratamiento","Medicamentos que decidió no tomar","#Total cases"],[54.2,32.8,19.8,415],[83.3,null,16.7,6],[80,null,20,5],[25,50,25,8],[68.8,25,12.5,16],[51.9,34.6,19.2,52],[47.9,32.4,26.8,71],[50,39.6,19.8,106],[57.9,30.5,15.8,95],[61.3,32.3,22.6,31],[58.3,25,16.7,24],[100,null,null,1],[null,null,null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th rowspan=\"2\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        \n      <\/th>\n      <th rowspan=\"2\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        #Total\n      <\/th>\n      <th rowspan=\"1\" colspan=\"12\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Satisfacción\n      <\/th>\n    <\/tr>\n    <tr>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        1 Muy insatisfecho/a\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        2\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        3\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        4\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        5\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        6\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        7\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        8\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        9\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        10 Muy satisfecho/a\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        N.S.\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        N.C.\n      <\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"paging":false,"searching":false,"sorting":false,"ordering":false,"bFilter":false,"bInfo":false,"columnDefs":[{"className":"dt-head-left","targets":[0,1,2,3,4,5,6,7,8,9,10,11,12,13]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'text-align':'right'});\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'right'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'right'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'right'});\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'text-align':'right'});\nvar value=data[6]; $(this.api().cell(row, 6).node()).css({'text-align':'right'});\nvar value=data[7]; $(this.api().cell(row, 7).node()).css({'text-align':'right'});\nvar value=data[8]; $(this.api().cell(row, 8).node()).css({'text-align':'right'});\nvar value=data[9]; $(this.api().cell(row, 9).node()).css({'text-align':'right'});\nvar value=data[10]; $(this.api().cell(row, 10).node()).css({'text-align':'right'});\nvar value=data[11]; $(this.api().cell(row, 11).node()).css({'text-align':'right'});\nvar value=data[12]; $(this.api().cell(row, 12).node()).css({'text-align':'right'});\nvar value=data[13]; $(this.api().cell(row, 13).node()).css({'text-align':'right'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p class="caption">
Figura 6.3: Uso de ponderación
</p>
</div>
<p>El estudio del CIS que estamos trabajando tiene una variable denominada PESO que contiene el coeficiente de ponderación para adaptarse a la población real española. Aquí dejamos la anterior tabla, pero ponderada. Véase las diferencias entre todos los valores.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="tse06.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.datatable_widget</span>(data <span class="sc">%&gt;%</span> </span>
<span id="cb130-2"><a href="tse06.html#cb130-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cols</span>(<span class="fu">total</span>(),P3 ) <span class="sc">%&gt;%</span></span>
<span id="cb130-3"><a href="tse06.html#cb130-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_weight</span>(PESO) <span class="sc">%&gt;%</span></span>
<span id="cb130-4"><a href="tse06.html#cb130-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="fu">mdset</span>(P21A01 <span class="sc">%to%</span> P21A03)) <span class="sc">%&gt;%</span> </span>
<span id="cb130-5"><a href="tse06.html#cb130-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb130-6"><a href="tse06.html#cb130-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>())</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-82"></span>
<div id="htmlwidget-05152d08155c69469b11" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-05152d08155c69469b11">{"x":{"filter":"none","class":"stripe hover cell-border row-border order-column compact","data":[["Medicamentos que recetan por adelantado (para que no falten)","Envases que han quedado sin usar porque cambiaron el tratamiento","Medicamentos que decidió no tomar","#Total cases"],[54.7,31,21.2,415],[80.3,null,19.7,6],[88.6,null,11.4,5],[19.8,56.2,24,8],[63.6,27.5,17.3,16],[55.5,31.9,18.3,52],[44.5,31.9,30.1,71],[52.5,37.7,19.8,106],[57.1,27.6,18.6,95],[64.3,30,25.7,31],[66.4,19.8,13.8,24],[100,null,null,1],[null,null,null,null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th rowspan=\"2\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        \n      <\/th>\n      <th rowspan=\"2\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        #Total\n      <\/th>\n      <th rowspan=\"1\" colspan=\"12\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Satisfacción\n      <\/th>\n    <\/tr>\n    <tr>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        1 Muy insatisfecho/a\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        2\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        3\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        4\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        5\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        6\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        7\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        8\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        9\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        10 Muy satisfecho/a\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        N.S.\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        N.C.\n      <\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"paging":false,"searching":false,"sorting":false,"ordering":false,"bFilter":false,"bInfo":false,"columnDefs":[{"className":"dt-head-left","targets":[0,1,2,3,4,5,6,7,8,9,10,11,12,13]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'text-align':'right'});\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'right'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'right'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'right'});\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'text-align':'right'});\nvar value=data[6]; $(this.api().cell(row, 6).node()).css({'text-align':'right'});\nvar value=data[7]; $(this.api().cell(row, 7).node()).css({'text-align':'right'});\nvar value=data[8]; $(this.api().cell(row, 8).node()).css({'text-align':'right'});\nvar value=data[9]; $(this.api().cell(row, 9).node()).css({'text-align':'right'});\nvar value=data[10]; $(this.api().cell(row, 10).node()).css({'text-align':'right'});\nvar value=data[11]; $(this.api().cell(row, 11).node()).css({'text-align':'right'});\nvar value=data[12]; $(this.api().cell(row, 12).node()).css({'text-align':'right'});\nvar value=data[13]; $(this.api().cell(row, 13).node()).css({'text-align':'right'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p class="caption">
Figura 6.4: Uso de ponderación con multi respuesta
</p>
</div>
<p>Aunque este manual se refiere únicamente a tablas, es bastante habitual obtener en toda ponderación la denominada eficiencia de la misma. Este análisis lo realizamos utilizando R como calculadora. Podemos hacer una análisis de la variable PESO y de su eficiencia.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="tse06.html#cb131-1" aria-hidden="true" tabindex="-1"></a>mean.peso <span class="ot">&lt;-</span> <span class="fu">mean</span>(data<span class="sc">$</span>PESO, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb131-2"><a href="tse06.html#cb131-2" aria-hidden="true" tabindex="-1"></a>sd.peso <span class="ot">&lt;-</span> <span class="fu">sd</span>(data<span class="sc">$</span>PESO, <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb131-3"><a href="tse06.html#cb131-3" aria-hidden="true" tabindex="-1"></a>ratio <span class="ot">&lt;-</span> sd.peso<span class="sc">/</span>mean.peso</span>
<span id="cb131-4"><a href="tse06.html#cb131-4" aria-hidden="true" tabindex="-1"></a>eficiencia <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">/</span>(<span class="dv">1</span><span class="sc">+</span>(ratio<span class="sc">^</span><span class="dv">2</span>)))<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb131-5"><a href="tse06.html#cb131-5" aria-hidden="true" tabindex="-1"></a>eficiencia <span class="ot">&lt;-</span> <span class="fu">round</span>(eficiencia,<span class="dv">2</span>)</span></code></pre></div>
<p>Puede observarse como la eficiencia de la ponderación es del 76.79 %.</p>
</div>
<div id="subtotales-y-nets" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Subtotales y NETS</h2>
<p>Otra de las funcionalidades básicas en nuestro trabajo de análisis es el uso de subtotales y/o netos. El objetivo de ambas funciones es reagrupar los códigos de una determinada variable, permitiendo observar acumulados de frecuencia. El paquete <code>expss</code> hace una diferenciación entre ambos que mostraremos seguidamente.</p>
<div id="subtotales" class="section level3" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> Subtotales</h3>
<p>El uso de <strong><code>tab_subtotal_rows</code></strong> o <strong><code>tab_subtotal_cols</code></strong> o <strong><code>tab_subtotal_cells</code></strong> añade subtotales a un conjunto de categorías de la variable sobre la que se aplique. Si se introduce un texto se utilizará el mismo, pero si no se añade la palabra TOTAL. Debes tener en cuenta que si las agrupaciones de categorías que realizas se solapan, también se solaparán los recuentos en el cálculo de subtotales. Estos subtotales pueden ser aplicados a las variables del banco de datos.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="tse06.html#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P901) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb132-2"><a href="tse06.html#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.datatable_widget</span>(data <span class="sc">%&gt;%</span> </span>
<span id="cb132-3"><a href="tse06.html#cb132-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cols</span>(<span class="fu">total</span>(), P31) <span class="sc">%&gt;%</span> </span>
<span id="cb132-4"><a href="tse06.html#cb132-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(P901) <span class="sc">%&gt;%</span> </span>
<span id="cb132-5"><a href="tse06.html#cb132-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_subtotal_cells</span>(<span class="st">&#39;NO SATISFACTORIO&#39;</span><span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>,  <span class="st">&#39;SATISFACTORIO&#39;</span><span class="ot">=</span><span class="dv">9</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb132-6"><a href="tse06.html#cb132-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb132-7"><a href="tse06.html#cb132-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>())</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-84"></span>
<div id="htmlwidget-1b0e0ac4274828081ce1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-1b0e0ac4274828081ce1">{"x":{"filter":"none","class":"stripe hover cell-border row-border order-column compact","data":[["Los cuidados y la atención recibida del personal médico","","","","","","","","","","","","","","",""],["1","2","3","4","5","NO SATISFACTORIO","6","7","8","TOTAL 6/7/8","9","10","SATISFACTORIO","N.S.","N.C.","#Total cases"],[0.6,0.2,0.9,2.1,6.8,10.6,9.9,18.4,25.9,54.2,15.1,18.5,33.6,1.3,0.2,2557],[0.6,0.2,0.9,2.4,5.6,9.7,9.5,20.6,27.8,57.9,14.4,16.3,30.7,1.5,0.2,1256],[0.6,0.2,1,1.8,7.9,11.5,10.4,16.2,24.1,50.7,15.7,20.7,36.4,1.1,0.3,1301]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th rowspan=\"2\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        \n      <\/th>\n      <th rowspan=\"2\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        #Total\n      <\/th>\n      <th rowspan=\"1\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Sexo de la persona entrevistada\n      <\/th>\n    <\/tr>\n    <tr>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Hombre\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Mujer\n      <\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"paging":false,"searching":false,"sorting":false,"ordering":false,"bFilter":false,"bInfo":false,"columnDefs":[{"className":"dt-head-left","targets":[0,1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'right'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'right'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'right'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p class="caption">
Figura 6.5: Uso de subtotales 1
</p>
</div>
<p>Nótese que en el ejemplo han sido utilizados textos en solo dos de los tres subtotales que se han calculado. Si no se introduce texto, es cuando se usa la palabra TOTAL. Nótese también que por defecto los subtotales aparecen detrás del último valor del grupo, detrás del 5, detrás del 8 y detrás del 10. Existe la posibilidad de determinar mediante una instrucción como deben aparecer. El modificador o parámetro <code>position</code> con posibles valores <code>"below"</code>, <code>"above"</code>, <code>"top"</code> o <code>"bottom"</code> indicarán el lugar donde se deben imprimir. Del mismo modo, se puede forzar a que sea el propio sistema quien determine las etiquetas del subtotal generado. Así el modificador <code>prefix</code> puede determinar un prefijo para todas las etiquetas siendo <code>TOTAL</code> el valor por defecto, y también el modificador <code>new_label</code>que permite indicar si la etiqueta se construye usando las etiquetas originales respondiendo a <code>all</code>que la usa todas, <code>range</code> la primera y la última, <code>first</code> la primera del grupo y <code>last</code> la última del grupo.</p>
<p>Con todo ello, podríamos modificar nuestro ejemplo a:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="tse06.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P901) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb133-2"><a href="tse06.html#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.datatable_widget</span>(data <span class="sc">%&gt;%</span> </span>
<span id="cb133-3"><a href="tse06.html#cb133-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cols</span>(<span class="fu">total</span>(), P31) <span class="sc">%&gt;%</span> </span>
<span id="cb133-4"><a href="tse06.html#cb133-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(P901) <span class="sc">%&gt;%</span> </span>
<span id="cb133-5"><a href="tse06.html#cb133-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_subtotal_cells</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>, <span class="dv">9</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">position =</span> <span class="st">&#39;bottom&#39;</span>, <span class="at">prefix =</span><span class="st">&#39;SUBT&#39;</span>, <span class="at">new_label=</span><span class="st">&#39;range&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb133-6"><a href="tse06.html#cb133-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb133-7"><a href="tse06.html#cb133-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>())</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-85"></span>
<div id="htmlwidget-5c856e4588b164975472" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-5c856e4588b164975472">{"x":{"filter":"none","class":"stripe hover cell-border row-border order-column compact","data":[["Los cuidados y la atención recibida del personal médico","","","","","","","","","","","","","","",""],["1","2","3","4","5","6","7","8","9","10","N.S.","N.C.","SUBT1 - 5","SUBT6 - 8","SUBT9 - 10","#Total cases"],[0.6,0.2,0.9,2.1,6.8,9.9,18.4,25.9,15.1,18.5,1.3,0.2,10.6,54.2,33.6,2557],[0.6,0.2,0.9,2.4,5.6,9.5,20.6,27.8,14.4,16.3,1.5,0.2,9.7,57.9,30.7,1256],[0.6,0.2,1,1.8,7.9,10.4,16.2,24.1,15.7,20.7,1.1,0.3,11.5,50.7,36.4,1301]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th rowspan=\"2\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        \n      <\/th>\n      <th rowspan=\"2\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        #Total\n      <\/th>\n      <th rowspan=\"1\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Sexo de la persona entrevistada\n      <\/th>\n    <\/tr>\n    <tr>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Hombre\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Mujer\n      <\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"paging":false,"searching":false,"sorting":false,"ordering":false,"bFilter":false,"bInfo":false,"columnDefs":[{"className":"dt-head-left","targets":[0,1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'right'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'right'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'right'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p class="caption">
Figura 6.6: Uso de subtotales 2
</p>
</div>
</div>
<div id="nets" class="section level3" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> NETS</h3>
<p>El uso de <strong><code>tab_net_rows()</code></strong> o <strong><code>tab_net_cols()</code></strong> o <strong><code>tab_net_cells()</code></strong> sustituye por netos (subtotales) a un conjunto de categorías de la variable sobre la que se aplique. Si se introduce un texto se utilizará el mismo, pero si no es así, se añade la palabra TOTAL.</p>
<p>Debes tener en cuenta que si las agrupaciones de categorías que realizas se solapan, también se solaparán los recuentos en el cálculo de netos. Estos netos pueden ser aplicados a las variables del banco de datos. La terminología de NET suele ser muy aplicada en las variables de tipo múltiple, para agrupar conceptos similares. En nuestro ejemplo por mantener la coherencia con el uso de <code>subtotal</code> lo aplicaremos sin embargo con una variable numérica de valoración.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="tse06.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P901) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb134-2"><a href="tse06.html#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.datatable_widget</span>(data <span class="sc">%&gt;%</span> </span>
<span id="cb134-3"><a href="tse06.html#cb134-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cols</span>(<span class="fu">total</span>(), P31) <span class="sc">%&gt;%</span> </span>
<span id="cb134-4"><a href="tse06.html#cb134-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(P901) <span class="sc">%&gt;%</span> </span>
<span id="cb134-5"><a href="tse06.html#cb134-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_net_cells</span>(<span class="st">&#39;NO SATISFACTORIO&#39;</span><span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>,  <span class="st">&#39;SATISFACTORIO&#39;</span><span class="ot">=</span><span class="dv">9</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb134-6"><a href="tse06.html#cb134-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb134-7"><a href="tse06.html#cb134-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>())</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-86"></span>
<div id="htmlwidget-fb8cd2e0ec6c085e000a" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-fb8cd2e0ec6c085e000a">{"x":{"filter":"none","class":"stripe hover cell-border row-border order-column compact","data":[["Los cuidados y la atención recibida del personal médico","","","","",""],["NO SATISFACTORIO","TOTAL 6/7/8","SATISFACTORIO","N.S.","N.C.","#Total cases"],[10.6,54.2,33.6,1.3,0.2,2557],[9.7,57.9,30.7,1.5,0.2,1256],[11.5,50.7,36.4,1.1,0.3,1301]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th rowspan=\"2\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        \n      <\/th>\n      <th rowspan=\"2\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        #Total\n      <\/th>\n      <th rowspan=\"1\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Sexo de la persona entrevistada\n      <\/th>\n    <\/tr>\n    <tr>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Hombre\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Mujer\n      <\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"paging":false,"searching":false,"sorting":false,"ordering":false,"bFilter":false,"bInfo":false,"columnDefs":[{"className":"dt-head-left","targets":[0,1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'right'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'right'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'right'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p class="caption">
Figura 6.7: Uso de nets 1
</p>
</div>
<p>Nótese que en el ejemplo han sido utilizados textos en solo dos de los tres <code>nets</code> que se han calculado. Si no se introduce texto, es cuando se usa la palabra TOTAL. Nótese también que por defecto los subtotales aparecen detrás del último valor del grupo, detrás del 5, detrás del 8 y detrás del 10. Existe la posibilidad de determinar mediante una instrucción como deben aparecer. El modificador o parámetro <code>position</code> con posibles valores <code>"below", "above", "top" o "bottom"</code> indicarán el lugar donde se deben imprimir.</p>
<p>Del mismo modo, se puede forzar a que sea el propio sistema quien determine las etiquetas del subtotal generado. Así el modificador <code>prefix</code> puede determinar un prefijo para todas las etiquetas siendo <code>TOTAL</code> el valor por defecto, y también el modificador <code>new_label</code>que permite indicar si la etiqueta se construye usando las etiquetas originales respondiendo a <code>all</code>que la usa todas, <code>range</code> la primera y la última, <code>first</code> la primera del grupo y <code>last</code> la última del grupo. Podríamos modificar nuestro ejemplo a:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="tse06.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P901) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb135-2"><a href="tse06.html#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.datatable_widget</span>(data <span class="sc">%&gt;%</span> </span>
<span id="cb135-3"><a href="tse06.html#cb135-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cols</span>(<span class="fu">total</span>(), P31) <span class="sc">%&gt;%</span> </span>
<span id="cb135-4"><a href="tse06.html#cb135-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(P901) <span class="sc">%&gt;%</span> </span>
<span id="cb135-5"><a href="tse06.html#cb135-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_net_cells</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>, <span class="dv">9</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">position =</span> <span class="st">&#39;top&#39;</span>, <span class="at">prefix =</span><span class="st">&#39;NET&#39;</span>, <span class="at">new_label=</span><span class="st">&#39;range&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb135-6"><a href="tse06.html#cb135-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb135-7"><a href="tse06.html#cb135-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>())</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-87"></span>
<div id="htmlwidget-e0d71caae88d4897d86f" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e0d71caae88d4897d86f">{"x":{"filter":"none","class":"stripe hover cell-border row-border order-column compact","data":[["Los cuidados y la atención recibida del personal médico","","","","",""],["NET1 - 5","NET6 - 8","NET9 - 10","N.S.","N.C.","#Total cases"],[10.6,54.2,33.6,1.3,0.2,2557],[9.7,57.9,30.7,1.5,0.2,1256],[11.5,50.7,36.4,1.1,0.3,1301]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th rowspan=\"2\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        \n      <\/th>\n      <th rowspan=\"2\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        #Total\n      <\/th>\n      <th rowspan=\"1\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Sexo de la persona entrevistada\n      <\/th>\n    <\/tr>\n    <tr>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Hombre\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Mujer\n      <\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"paging":false,"searching":false,"sorting":false,"ordering":false,"bFilter":false,"bInfo":false,"columnDefs":[{"className":"dt-head-left","targets":[0,1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'right'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'right'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'right'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p class="caption">
Figura 6.8: Uso de nets 2
</p>
</div>
<p>Puedes preguntarte el porqué del <code>position</code> si en un NET realmente se eliminan los códigos originales, pero esto no tiene por qué ser así. Tanto el <code>subtotal</code> como el <code>net</code> tienen la posibilidad de variar este hecho utilizando el modificar <code>add</code> con valores TRUE o FALSE que mantendría o no los códigos originales. No obstante, en nuestro ejmplo como hay valores no agrupados (NS y NC) aquí la posición sí es relevante.</p>
</div>
</div>
<div id="top-y-bottom" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> <em>Top</em> y <em>Bottom</em></h2>
<p>Por último otra utilidad no menos importante que las anterior y no menos utilizada. El cálculo del <em>top</em> y el <em>bottom</em> de una escala. Para ello, vamos a basarnos en algo que ya hemos visto en las tablas anteriores, la recodificación y el cómo reutilizamos la posibilidad de las variables múltiples.</p>
<p>Planteemos una situación en la que deseamos que la variable P901 se muestre de forma segmentada y conjuntamente cada uno de sus valores. Llamamos TOP a la agrupación en una columna o fila de tabla de aquellas categorías con las valoraciones más altas (por ejemplo 9 y 10) y BOTTOM a las más bajas (por ejemplo 1,2,3,4,5 y 6 o 1:6 como sabemos). Queremos que en la tabla se muestre ambas categorías. ¿Como la hacemos? Este es script.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="tse06.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P901) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb136-2"><a href="tse06.html#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.datatable_widget</span>(data <span class="sc">%&gt;%</span> </span>
<span id="cb136-3"><a href="tse06.html#cb136-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cols</span>(<span class="fu">total</span>(), P31) <span class="sc">%&gt;%</span> </span>
<span id="cb136-4"><a href="tse06.html#cb136-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(P901) <span class="sc">%&gt;%</span> </span>
<span id="cb136-5"><a href="tse06.html#cb136-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_subtotal_cells</span>(<span class="st">&#39;Bottom&#39;</span><span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="st">&#39;Top&#39;</span><span class="ot">=</span><span class="dv">9</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb136-6"><a href="tse06.html#cb136-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb136-7"><a href="tse06.html#cb136-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>())</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-88"></span>
<div id="htmlwidget-7fd1ae24fcf503095cdd" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-7fd1ae24fcf503095cdd">{"x":{"filter":"none","class":"stripe hover cell-border row-border order-column compact","data":[["Los cuidados y la atención recibida del personal médico","","","","","","","","","","","","","",""],["1","2","3","4","5","6","Bottom","7","8","9","10","Top","N.S.","N.C.","#Total cases"],[0.6,0.2,0.9,2.1,6.8,9.9,20.6,18.4,25.9,15.1,18.5,33.6,1.3,0.2,2557],[0.6,0.2,0.9,2.4,5.6,9.5,19.2,20.6,27.8,14.4,16.3,30.7,1.5,0.2,1256],[0.6,0.2,1,1.8,7.9,10.4,21.9,16.2,24.1,15.7,20.7,36.4,1.1,0.3,1301]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th rowspan=\"2\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        \n      <\/th>\n      <th rowspan=\"2\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        #Total\n      <\/th>\n      <th rowspan=\"1\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Sexo de la persona entrevistada\n      <\/th>\n    <\/tr>\n    <tr>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Hombre\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Mujer\n      <\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"paging":false,"searching":false,"sorting":false,"ordering":false,"bFilter":false,"bInfo":false,"columnDefs":[{"className":"dt-head-left","targets":[0,1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'right'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'right'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'right'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p class="caption">
Figura 6.9: Uso de top y bottom
</p>
</div>
<p>Controlando más algunos aspectos de la publicación de la tabla …</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="tse06.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P901) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb137-2"><a href="tse06.html#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.datatable_widget</span>(data <span class="sc">%&gt;%</span> </span>
<span id="cb137-3"><a href="tse06.html#cb137-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cols</span>(<span class="fu">total</span>(), P31) <span class="sc">%&gt;%</span> </span>
<span id="cb137-4"><a href="tse06.html#cb137-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(P901) <span class="sc">%&gt;%</span> </span>
<span id="cb137-5"><a href="tse06.html#cb137-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_subtotal_cells</span>(<span class="st">&#39;Bottom&#39;</span><span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="st">&#39;Top&#39;</span><span class="ot">=</span><span class="dv">9</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">position =</span><span class="st">&#39;bottom&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb137-6"><a href="tse06.html#cb137-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>(<span class="at">total_row_position=</span><span class="st">&#39;below&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb137-7"><a href="tse06.html#cb137-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="fu">na_if</span>(P901, <span class="fu">gt</span>(<span class="dv">10</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb137-8"><a href="tse06.html#cb137-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_mean</span>() <span class="sc">%&gt;%</span></span>
<span id="cb137-9"><a href="tse06.html#cb137-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>())</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-89"></span>
<div id="htmlwidget-b25c48dc1f08d52020aa" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-b25c48dc1f08d52020aa">{"x":{"filter":"none","class":"stripe hover cell-border row-border order-column compact","data":[["Los cuidados y la atención recibida del personal médico","","","","","","","","","","","","","","",""],["1","2","3","4","5","6","7","8","9","10","N.S.","N.C.","Bottom","Top","#Total cases","Mean"],[0.6,0.2,0.9,2.1,6.8,9.9,18.4,25.9,15.1,18.5,1.3,0.2,20.6,33.6,2557,7.7],[0.6,0.2,0.9,2.4,5.6,9.5,20.6,27.8,14.4,16.3,1.5,0.2,19.2,30.7,1256,7.7],[0.6,0.2,1,1.8,7.9,10.4,16.2,24.1,15.7,20.7,1.1,0.3,21.9,36.4,1301,7.8]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th rowspan=\"2\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        \n      <\/th>\n      <th rowspan=\"2\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        #Total\n      <\/th>\n      <th rowspan=\"1\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Sexo de la persona entrevistada\n      <\/th>\n    <\/tr>\n    <tr>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Hombre\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Mujer\n      <\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"paging":false,"searching":false,"sorting":false,"ordering":false,"bFilter":false,"bInfo":false,"columnDefs":[{"className":"dt-head-left","targets":[0,1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'right'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'right'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'right'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p class="caption">
Figura 6.10: Uso de top y bottom arriba
</p>
</div>
<p>Con subtotales abajo…</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="tse06.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P901) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb138-2"><a href="tse06.html#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.datatable_widget</span>(data <span class="sc">%&gt;%</span> </span>
<span id="cb138-3"><a href="tse06.html#cb138-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cols</span>(<span class="fu">total</span>(), P31) <span class="sc">%&gt;%</span> </span>
<span id="cb138-4"><a href="tse06.html#cb138-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(P901) <span class="sc">%&gt;%</span> </span>
<span id="cb138-5"><a href="tse06.html#cb138-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_subtotal_cells</span>(<span class="st">&#39;Bottom&#39;</span><span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="st">&#39;Top&#39;</span><span class="ot">=</span><span class="dv">9</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">position =</span><span class="st">&#39;below&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb138-6"><a href="tse06.html#cb138-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>(<span class="at">total_row_position=</span><span class="st">&#39;below&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb138-7"><a href="tse06.html#cb138-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="fu">na_if</span>(P901, <span class="fu">gt</span>(<span class="dv">10</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb138-8"><a href="tse06.html#cb138-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_mean</span>() <span class="sc">%&gt;%</span></span>
<span id="cb138-9"><a href="tse06.html#cb138-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>())</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-90"></span>
<div id="htmlwidget-abce2220aff76e92cfe3" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-abce2220aff76e92cfe3">{"x":{"filter":"none","class":"stripe hover cell-border row-border order-column compact","data":[["Los cuidados y la atención recibida del personal médico","","","","","","","","","","","","","","",""],["1","2","3","4","5","6","Bottom","7","8","9","10","Top","N.S.","N.C.","#Total cases","Mean"],[0.6,0.2,0.9,2.1,6.8,9.9,20.6,18.4,25.9,15.1,18.5,33.6,1.3,0.2,2557,7.7],[0.6,0.2,0.9,2.4,5.6,9.5,19.2,20.6,27.8,14.4,16.3,30.7,1.5,0.2,1256,7.7],[0.6,0.2,1,1.8,7.9,10.4,21.9,16.2,24.1,15.7,20.7,36.4,1.1,0.3,1301,7.8]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th rowspan=\"2\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        \n      <\/th>\n      <th rowspan=\"2\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        #Total\n      <\/th>\n      <th rowspan=\"1\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Sexo de la persona entrevistada\n      <\/th>\n    <\/tr>\n    <tr>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Hombre\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Mujer\n      <\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"paging":false,"searching":false,"sorting":false,"ordering":false,"bFilter":false,"bInfo":false,"columnDefs":[{"className":"dt-head-left","targets":[0,1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'right'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'right'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'right'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p class="caption">
Figura 6.11: Uso de top y bottom abajo
</p>
</div>
<p>O también …</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="tse06.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">val_lab</span>(data<span class="sc">$</span>P901) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;1&#39;</span><span class="ot">=</span><span class="dv">1</span>, <span class="st">&#39;2&#39;</span><span class="ot">=</span><span class="dv">2</span>, <span class="st">&#39;3&#39;</span><span class="ot">=</span><span class="dv">3</span>, <span class="st">&#39;4&#39;</span><span class="ot">=</span><span class="dv">4</span>, <span class="st">&#39;5&#39;</span><span class="ot">=</span><span class="dv">5</span>, <span class="st">&#39;6&#39;</span><span class="ot">=</span><span class="dv">6</span>, <span class="st">&#39;7&#39;</span><span class="ot">=</span><span class="dv">7</span>, <span class="st">&#39;8&#39;</span><span class="ot">=</span><span class="dv">8</span>, <span class="st">&#39;9&#39;</span><span class="ot">=</span><span class="dv">9</span>, <span class="st">&#39;10&#39;</span><span class="ot">=</span><span class="dv">10</span>, <span class="st">&#39;N.S.&#39;</span><span class="ot">=</span><span class="dv">98</span>, <span class="st">&#39;N.C.&#39;</span><span class="ot">=</span><span class="dv">99</span>)</span>
<span id="cb139-2"><a href="tse06.html#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.datatable_widget</span>(data <span class="sc">%&gt;%</span> </span>
<span id="cb139-3"><a href="tse06.html#cb139-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cols</span>(<span class="fu">total</span>(), P31) <span class="sc">%&gt;%</span> </span>
<span id="cb139-4"><a href="tse06.html#cb139-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(P901) <span class="sc">%&gt;%</span> </span>
<span id="cb139-5"><a href="tse06.html#cb139-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_net_cells</span>(<span class="st">&#39;Top&#39;</span><span class="ot">=</span><span class="dv">9</span><span class="sc">:</span><span class="dv">10</span>, <span class="st">&#39;Bottom&#39;</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb139-6"><a href="tse06.html#cb139-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>(<span class="at">total_row_position=</span><span class="st">&#39;below&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb139-7"><a href="tse06.html#cb139-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="fu">na_if</span>(P901, <span class="fu">gt</span>(<span class="dv">10</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb139-8"><a href="tse06.html#cb139-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_mean</span>() <span class="sc">%&gt;%</span></span>
<span id="cb139-9"><a href="tse06.html#cb139-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>())</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-91"></span>
<div id="htmlwidget-20efc59158b69f9e2658" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-20efc59158b69f9e2658">{"x":{"filter":"none","class":"stripe hover cell-border row-border order-column compact","data":[["Los cuidados y la atención recibida del personal médico","","","","","","",""],["7","8","Top","Bottom","N.S.","N.C.","#Total cases","Mean"],[18.4,25.9,33.6,20.6,1.3,0.2,2557,7.7],[20.6,27.8,30.7,19.2,1.5,0.2,1256,7.7],[16.2,24.1,36.4,21.9,1.1,0.3,1301,7.8]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th rowspan=\"2\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        \n      <\/th>\n      <th rowspan=\"2\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        #Total\n      <\/th>\n      <th rowspan=\"1\" colspan=\"2\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Sexo de la persona entrevistada\n      <\/th>\n    <\/tr>\n    <tr>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Hombre\n      <\/th>\n      <th rowspan=\"1\" colspan=\"1\">\n        <style type=\"text/css\">th { text-align: center; } <\/style>\n        <style type=\"text/css\">th {border: 1px solid #DDD}<\/style>\n        Mujer\n      <\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"paging":false,"searching":false,"sorting":false,"ordering":false,"bFilter":false,"bInfo":false,"columnDefs":[{"className":"dt-head-left","targets":[0,1,2,3,4]}],"order":[],"autoWidth":false,"orderClasses":false,"rowCallback":"function(row, data) {\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'text-align':'right'});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'text-align':'right'});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'text-align':'right'});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
<p class="caption">
Figura 6.12: Uso de top y bottom sin los valores agrupados
</p>
</div>
<p>Así pues en esta última tabla, hemos combinado algunas de las funcionalidades especiales y avanzadas de <code>expss</code> de forma conjunta y trabajando en la misma dirección.</p>
<div id="gráficos-base" class="section level3" number="6.5.1">
<h3><span class="header-section-number">6.5.1</span> Gráficos base</h3>
<p>Dejamos además aquí esta <code>pildora adictiva</code>. ¿Un gráfico? Repetimos la tabla pero la guardamos en una objeto llamada <code>tab</code>. Limpiamos además aquello que no nos interesa.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="tse06.html#cb140-1" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span> </span>
<span id="cb140-2"><a href="tse06.html#cb140-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cols</span>(<span class="st">&#39;|&#39;</span><span class="ot">=</span><span class="fu">unvr</span>(P31)) <span class="sc">%&gt;%</span> </span>
<span id="cb140-3"><a href="tse06.html#cb140-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_cells</span>(<span class="st">&#39;|&#39;</span><span class="ot">=</span><span class="fu">unvr</span>(P901)) <span class="sc">%&gt;%</span> </span>
<span id="cb140-4"><a href="tse06.html#cb140-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_net_cells</span>(<span class="st">&#39;Detractores&#39;</span> <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="st">&#39;Neutrales&#39;</span> <span class="ot">=</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">8</span>, <span class="st">&#39;Promotores&#39;</span> <span class="ot">=</span> <span class="dv">9</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb140-5"><a href="tse06.html#cb140-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_stat_cpct</span>(<span class="at">total_row_position=</span><span class="st">&#39;none&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb140-6"><a href="tse06.html#cb140-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tab_pivot</span>()</span>
<span id="cb140-7"><a href="tse06.html#cb140-7" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(tab)</span>
<span id="cb140-8"><a href="tse06.html#cb140-8" aria-hidden="true" tabindex="-1"></a>tab</span></code></pre></div>
<pre><code>##    row_labels     Hombre      Mujer
## 1 Detractores 19.1878981 21.9062260
## 2   Neutrales 48.4076433 40.3535742
## 3  Promotores 30.7324841 36.3566487
## 4        N.S.  1.5127389  1.0760953
## 5        N.C.  0.1592357  0.3074558</code></pre>
<p>Fíjate como hemos limpiado la tabla. Hemos usado un recurso que para gráficos será muy válido, el uso de <code>unvr()</code> que elimina del uso de la variable los textos extra. Del mismo modo con el <code>'|'=</code> hemos anulado cualquier tipo de texto suplementario que se pudiera añadir. Cuando hacemos una tabla y la guardamos, es un objeto <code>etable</code> que ya describimos anteriormente. Como la mayoría de los paquetes gráficos usan <code>_dataframe_</code>, lo transformamos a eso.</p>
<p>Una vez hecho esto, hacemos el gráfico. Podemos elegir diferentes sistemas de gráficos, pero los más habituales e interactivos son <code>highcharter</code>(paquete escrito sobre Highcharts) y/o <code>plotly</code>. Como paquete estático, <code>ggplot</code> sería la mejor solución.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="tse06.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressMessages</span>(<span class="fu">library</span>(highcharter, <span class="at">quietly=</span><span class="cn">TRUE</span>))</span>
<span id="cb142-2"><a href="tse06.html#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">highchart</span>() <span class="sc">%&gt;%</span></span>
<span id="cb142-3"><a href="tse06.html#cb142-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_xAxis</span>(<span class="at">categories=</span>tab<span class="sc">$</span>row_labels) <span class="sc">%&gt;%</span> </span>
<span id="cb142-4"><a href="tse06.html#cb142-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_add_series</span>(<span class="at">data=</span>tab, <span class="at">type=</span><span class="st">&#39;column&#39;</span>, <span class="fu">hcaes</span>(<span class="at">x=</span>row_labels, <span class="at">y=</span> Hombre), <span class="at">name=</span><span class="st">&#39;hombre&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb142-5"><a href="tse06.html#cb142-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">hc_add_series</span>(<span class="at">data=</span>tab, <span class="at">type=</span><span class="st">&#39;column&#39;</span>, <span class="fu">hcaes</span>(<span class="at">x=</span>row_labels, <span class="at">y=</span> Mujer), <span class="at">name=</span><span class="st">&#39;mujer&#39;</span>)</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-93"></span>
<div id="htmlwidget-4f068470f938dc07b3df" style="width:100%;height:500px;" class="highchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-4f068470f938dc07b3df">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":null},"yAxis":{"title":{"text":null}},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"}},"xAxis":{"categories":["Detractores","Neutrales","Promotores","N.S.","N.C."]},"series":[{"group":"group","data":[{"row_labels":"Detractores","Hombre":19.187898089172,"Mujer":21.9062259800154,"y":19.187898089172,"name":"Detractores"},{"row_labels":"Neutrales","Hombre":48.4076433121019,"Mujer":40.3535741737125,"y":48.4076433121019,"name":"Neutrales"},{"row_labels":"Promotores","Hombre":30.7324840764331,"Mujer":36.3566487317448,"y":30.7324840764331,"name":"Promotores"},{"row_labels":"N.S.","Hombre":1.51273885350318,"Mujer":1.076095311299,"y":1.51273885350318,"name":"N.S."},{"row_labels":"N.C.","Hombre":0.159235668789809,"Mujer":0.307455803228286,"y":0.159235668789809,"name":"N.C."}],"type":"column","name":"hombre"},{"group":"group","data":[{"row_labels":"Detractores","Hombre":19.187898089172,"Mujer":21.9062259800154,"y":21.9062259800154,"name":"Detractores"},{"row_labels":"Neutrales","Hombre":48.4076433121019,"Mujer":40.3535741737125,"y":40.3535741737125,"name":"Neutrales"},{"row_labels":"Promotores","Hombre":30.7324840764331,"Mujer":36.3566487317448,"y":36.3566487317448,"name":"Promotores"},{"row_labels":"N.S.","Hombre":1.51273885350318,"Mujer":1.076095311299,"y":1.076095311299,"name":"N.S."},{"row_labels":"N.C.","Hombre":0.159235668789809,"Mujer":0.307455803228286,"y":0.307455803228286,"name":"N.C."}],"type":"column","name":"mujer"}]},"theme":{"colors":["#47475c","#61BC7B","#508CC8","#F49952","#9C9EDB","#6699a1"],"chart":{"style":{"fontFamily":"Roboto","color":"#666666"}},"title":{"align":"left","style":{"fontFamily":"Alegreya Sans SC","fontSize":"24px"}},"subtitle":{"align":"left","style":{"fontFamily":"Alegreya Sans","fontSize":"16px"}},"caption":{"style":{"fontFamily":"Alegreya Sans","fontSize":"14px"}},"credits":{"style":{"fontFamily":"Roboto","fontSize":"10px"}},"legend":{"align":"right","verticalAlign":"bottom"},"xAxis":{"gridLineWidth":1,"gridLineColor":"#F3F3F3","lineColor":"#F3F3F3","minorGridLineColor":"#F3F3F3","tickColor":"#F3F3F3","tickWidth":1},"yAxis":{"gridLineColor":"#F3F3F3","lineColor":"#F3F3F3","minorGridLineColor":"#F3F3F3","tickColor":"#F3F3F3","tickWidth":1},"plotOptions":{"line":{"marker":{"enabled":false}},"spline":{"marker":{"enabled":false}},"area":{"marker":{"enabled":false}},"areaspline":{"marker":{"enabled":false}},"arearange":{"marker":{"enabled":false}},"bubble":{"maxSize":"10%"}},"tooltip":{"valueDecimals":2}},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","drillUpText":"Back to {series.name}","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"thousandsSep":" ","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":["Roboto","Alegreya+Sans+SC","Alegreya+Sans"],"debug":false},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figura 6.13: Uso de gráfico highcharter 2
</p>
</div>
<p>Alternativamente, si queremos utilizar el paquete <code>plotly</code> …</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="tse06.html#cb143-1" aria-hidden="true" tabindex="-1"></a>Grupo <span class="ot">&lt;-</span> <span class="fu">factor</span>(tab<span class="sc">$</span>row_labels, <span class="at">levels=</span>tab<span class="sc">$</span>row_labels)</span>
<span id="cb143-2"><a href="tse06.html#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(tab, <span class="at">x =</span> <span class="sc">~</span>Grupo, <span class="at">y =</span> <span class="sc">~</span>Hombre, <span class="at">type =</span> <span class="st">&#39;bar&#39;</span>, <span class="at">name =</span> <span class="st">&#39;Hombre&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb143-3"><a href="tse06.html#cb143-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">add_trace</span>(<span class="at">y =</span> <span class="sc">~</span>Mujer, <span class="at">name =</span> <span class="st">&#39;Mujer&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb143-4"><a href="tse06.html#cb143-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">layout</span>(<span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&#39;Count&#39;</span>))</span></code></pre></div>
<div class="figure" style="text-align: center"><span id="fig:unnamed-chunk-94"></span>
<div id="htmlwidget-eed2949e66871f26bdab" style="width:80%;height:504px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-eed2949e66871f26bdab">{"x":{"visdat":{"c285815437c":["function () ","plotlyVisDat"]},"cur_data":"c285815437c","attrs":{"c285815437c":{"x":{},"y":{},"name":"Hombre","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"},"c285815437c.1":{"x":{},"y":{},"name":"Mujer","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"yaxis":{"domain":[0,1],"automargin":true,"title":"Count"},"xaxis":{"domain":[0,1],"automargin":true,"title":"Grupo","type":"category","categoryorder":"array","categoryarray":["Detractores","Neutrales","Promotores","N.S.","N.C."]},"hovermode":"closest","showlegend":true},"source":"A","config":{"showSendToCloud":false},"data":[{"x":["Detractores","Neutrales","Promotores","N.S.","N.C."],"y":[19.187898089172,48.4076433121019,30.7324840764331,1.51273885350318,0.159235668789809],"name":"Hombre","type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Detractores","Neutrales","Promotores","N.S.","N.C."],"y":[21.9062259800154,40.3535741737125,36.3566487317448,1.076095311299,0.307455803228286],"name":"Mujer","type":"bar","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figura 6.14: Uso de gráfico con plotly
</p>
</div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tse05.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tse07.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 1.25
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true,
"info": true,
"bibliography": ["packages.bib", "book.bib"],
"biblio-style": "apalike",
"link-citations": true,
"cover-image": "data/portada.png"
});
});
</script>

</body>

</html>
